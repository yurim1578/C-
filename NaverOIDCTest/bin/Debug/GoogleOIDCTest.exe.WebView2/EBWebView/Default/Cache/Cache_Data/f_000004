GuestLogIn=function(){this.init.apply(this,arguments)};GuestLogIn.prototype={_ENTER_KEY_CODE:13,_loginReady:true,_emailChecked:false,_retryCount:0,_retryCountForOTP:0,_notFoundUser:2,_notMatchedIdc:3,_needCaptcha:4,_nReturnCodeFailToSendOTPMail:99,_nReturnCodeWrongIDC:22,init:function(a){if(a=="otp"){this._setTitleText("otp_title_step1");$("#otpArea").show()}else{this._setTitleText("password_title");$("#pwdArea").show()}this._attachEvent()},_attachEvent:function(){var a=this;$("#user_email").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._sendOTP()}});$("#user_otp").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#user_auth_pwd").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._loginByPassword()}});$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$(".input_box").on("input",function(){a._hideEmailErrorMessage();a._hideOtpErrorMessage();a._hidePasswordErrorMessage();a._hideCaptchaErrorMessage()});$("#btnConfirmOtp").click(function(){if(a._emailChecked){a._login()}else{a._sendOTP()}});$("#btnConfirmPwd").click(function(){a._loginByPassword()});$("#otpResend").click(function(){a._sendOTP()});$("#refreshButton").click(function(){a._setCaptchaImage($("#captchaKey").val())});$("#user_auth").on("input",function(){var b=$(this).val();var c=b.toUpperCase().replace(/[^0-9A-Z]/g,"");$(this).val(c)})},_setTitleText:function(a){$("#title").text($("#"+a).val())},_otpTimeChecker:function(b){var d=b*60;var a,c;a=parseInt(d/60%60,10);c=parseInt(d%60,10);$("#otpTimer").text("0"+a+":00");d-=1;_this=this;interval=setInterval(function(){a=parseInt(d/60%60,10);c=parseInt(d%60,10);a=a<10?"0"+a:a;c=c<10?"0"+c:c;if(a!=0){$("#otpTimer").text(a+":"+c)}else{if(a==0&&c!=0){$("#otpTimer").text("00:"+c)}}if(--d<0){d=0;$("#otpTimer").text(a+":"+c);$("#otpResend").show();_this._showOtpErrorMessage(Message.GUEST_LOGIN_OTP_EXPIRED_MESSAGE);$("#emailCover").removeClass("disabled");$("#user_otp").val("");_this._loginReady=false;clearInterval(interval)}},1000)},_changeUIAfterSendOTP:function(a){this._hideEmailErrorMessage();this._emailChecked=true;this._setTitleText("otp_title_step2");$("#pwdWarp").show();$("#emailCover").addClass("disabled");$("#user_email").prop("disabled",true);$("#user_otp").focus()},_resetTimer:function(){$("#otpTimer").text(":"+0);clearInterval(interval)},_showEmailErrorMessage:function(a){$("#emailFailMessage").text(a);$("#emailFailMessage").show();$("#emailCover").addClass("invalid")},_hideEmailErrorMessage:function(){$("#emailFailMessage").hide();$("#emailCover").removeClass("invalid")},_showPasswordErrorMessage:function(a){$("#passwordFailMessage").text(a);$("#passwordFailMessage").show();$("#passwordCover").addClass("invalid")},_hidePasswordErrorMessage:function(){$("#passwordFailMessage").hide();$("#passwordCover").removeClass("invalid")},_showOtpErrorMessage:function(a){$("#otpFailMessage").text(a);$("#otpFailMessage").show();$("#otpCover").addClass("invalid")},_hideOtpErrorMessage:function(){$("#otpFailMessage").hide();$("#otpCover").removeClass("invalid")},_showCaptchaErrorMessage:function(){$("#captchaFailMessage").show();$("#captchaCover").addClass("invalid")},_hideCaptchaErrorMessage:function(){$("#captchaFailMessage").hide();$("#captchaCover").removeClass("invalid")},_inputValidCheckForOTP:function(){var a=$("#user_email");if($.trim($(a).val())==""){$(a).focus();return false}var b=$.trim($(a).val());for(var c=0;c<b.length;c++){if(b.charAt(c)==" "){this._showEmailErrorMessage(Message.GUEST_LOGIN_ID_9);return false}}return true},_inputValidCheck:function(){var a=$("#user_email");var d=$("#user_otp");if($.trim($(a).val())==""){$(a).focus();return false}if($.trim($(d).val())==""){$(d).focus();return false}var b=$.trim($(a).val());for(var c=0;c<b.length;c++){if(b.charAt(c)==" "){this._showEmailErrorMessage(Message.GUEST_LOGIN_ID_9);return false}}return true},_sendOTP:function(){if($("#emailCover").hasClass("disabled")){return}if(typeof interval!=="undefined"){clearInterval(interval)}this._hideOtpErrorMessage();$("#otpResend").hide();this._loginReady=true;this._otpTimeChecker(5);try{if(!this._inputValidCheckForOTP()){return}_this=this;var a=$.trim($("#user_email").val());$.ajax({url:"/guest/sendOTP",type:"POST",dataType:"json",beforeSend:function(c){c.setRequestHeader("Access-Control-Allow-Origin","*")},data:({inputId:a,accessUrl:$("#accessUrl").val()})}).done(function(c){if(c.returnCode==0){_this._changeUIAfterSendOTP(c.oneBrowserUseYn)}else{if(c.returnCode==_this._nReturnCodeWrongIDC){_this._resetTimer();if(_this._retryCountForOTP==0){_this._retryCountForOTP++;_this._sendOTP()}else{_this._showEmailErrorMessage(Message.DEFAULT_ERROR_MESSAGE);_this._retryCountForOTP=0}}else{_this._resetTimer();_this._showEmailErrorMessage(c.returnMessage)}}}).fail(function(c,e,d){_this._resetTimer();if(_this._retryCountForOTP<5){_this._retryCountForOTP++;_this._sendOTP()}else{_this._showEmailErrorMessage(Message.DEFAULT_ERROR_MESSAGE);_this._retryCountForOTP=0}})}catch(b){_this._showEmailErrorMessage(Message.DEFAULT_ERROR_MESSAGE)}},_login:function(){_this=this;try{if(!this._loginReady){return}if(!this._inputValidCheck()){return}this._loginReady=false;var a=$.trim($("#user_email").val());$.ajax({url:"/guest/loginProcess",type:"POST",dataType:"json",beforeSend:function(c){c.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),inputId:a,otp:$.trim($("#user_otp").val())})}).done(function(c){if(c.returnCode==0){window.location=c.accessUrl}else{if(c.returnCode==_this._nReturnCodeWrongIDC){_this._loginReady=true;if(_this._retryCount==0){_this._retryCount++;_this._login()}else{_this._showOtpErrorMessage(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0}}else{_this._showOtpErrorMessage(c.returnMessage)}}}).fail(function(c,e,d){_this._loginReady=true;if(_this._retryCount<5){_this._retryCount++;_this._login()}else{_this._showOtpErrorMessage(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0}})}catch(b){_this._showOtpErrorMessage(Message.DEFAULT_ERROR_MESSAGE)}finally{_this._loginReady=true}},_loginByPassword:function(){_this=this;try{if(!this._loginReady){return}var b=$("#user_auth_pwd");if($.trim(b.val())==""){$(b).focus();return false}var a=$("#user_auth");if($("#captchaKey").val()!=""&&$.trim(a.val())==""){$(a).focus();_this._showCaptchaErrorMessage();return false}var c=new RSAKey();c.setPublic($("#RSAModulus").val(),$("#RSAExponent").val());var d=c.encrypt(b.val());this._loginReady=false;$.ajax({url:"/guest/loginProcessByPassword",type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),password:d,captchaKey:$("#captchaKey").val(),captchaValue:$("#user_auth").val()})}).done(function(e){if(e.returnCode==0){if(e.accessUrl!=$("#accessUrl").val()){_this._showPasswordErrorMessage(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0}else{window.location=e.accessUrl}}else{if(e.returnCode==_this._nReturnCodeWrongIDC){_this._loginReady=true;if(_this._retryCount==0){_this._retryCount++;_this._loginByPassword()}else{_this._showPasswordErrorMessage(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0;$(b).focus()}}else{if(e.returnCode==_this._needCaptcha){_this._captchaOn(e.captchaKey,e.returnMessage);$(b).focus()}else{_this._showPasswordErrorMessage(e.returnMessage);$(b).focus()}}}}).fail(function(e,h,g){_this._loginReady=true;if(_this._retryCount<5){_this._retryCount++;_this._loginByPassword()}else{_this._showPasswordErrorMessage(Message.DEFAULT_ERROR_MESSAGE);_this._retryCount=0}})}catch(f){_this._showPasswordErrorMessage(Message.DEFAULT_ERROR_MESSAGE)}finally{_this._loginReady=true;$("#user_auth_pwd").val("");$("#user_auth").val("")}},_captchaOn:function(a,b){$("#captchaKey").val(a);this._setCaptchaImage(a);this._showPasswordErrorMessage(b);$("#captchaArea").show()},_setCaptchaImage:function(b){var a="/getCapchaImage?key="+b;a+="&re="+crypto.getRandomValues(new Uint32Array(1))[0]%1000+1;$("#captchaImage").css("background-image","url('"+a+"')")}};IdFind2=function(){this.init.apply(this,arguments)};IdFind2.prototype={_nReturn_code_not_exists_user:21,init:function(a){sServiceCode=a.serviceCode;isUseOneAppLoginPage=a.isUseDevicePage;isFromMobileStepOne=a.isFromMobileStepOne;sBrowserLanguage=a.browserLanguage;bIsAndroid=a.isAndroid;accessUrl=a.accessUrl;bIsAbuser=a.isAbuser;this._sCountryCode=$("#inputCountryCode").val();this._sCustomDomain=a.customDomain||"";this._findType=a.findType;this._mobileOrEmail="mobile";this._setDefaultCountryCode();this._attachEvent();$("input").prop("disabled","");if(bIsAbuser){$("#inputId").attr("disabled",true)}},_attachEvent:function(){var a=this;$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$("#tab-phone").on("click",function(){$("#tab-phone").attr("aria-selected","true");$("#tab-email").attr("aria-selected","false");$("#tabpanel-phone").removeClass("hide");$("#tabpanel-email").addClass("hide");a._mobileOrEmail="mobile";a._clearAllInfo()});$("#tab-email").on("click",function(){$("#tab-email").attr("aria-selected","true");$("#tab-phone").attr("aria-selected","false");$("#tabpanel-email").removeClass("hide");$("#tabpanel-phone").addClass("hide");a._mobileOrEmail="email";a._clearAllInfo()});$(".countryCodeButton").on("click",function(){if($(".countryCodeButton").hasClass("open")){$(".countryCodeButton").removeClass("open")}else{$(".countryCodeButton").addClass("open")}});$(".countryItem").on("click",function(){$(".countryCodeButton").text($(this).find(".name").text());$(".countryItem").find(".inner").removeClass("selected");a._sCountryCode=$(this).find(".code").text();$(".countryCodeButton").removeClass("open");$(this).find(".inner").addClass("selected")});$(document).on("click",function(b){if(!$(".country_list").is(b.target)&&!$(".countryCodeButton").is(b.target)){$(".countryCodeButton").removeClass("open")}});$(".input_box").focusin(function(){$(this).parent().addClass("focus");$(this).parent().removeClass("invalid")});$(".input_box").focusout(function(){$(this).parent().removeClass("focus")});$(".btn_auth").click(function(){a._sendAuthNo()});$(".find_id").click(function(){a.findId()});$("#sendAuthNo").click(function(){a.sendAuthNo()});$(".find_password").click(function(){a.findPassword()});$(".btn_back").click(function(){location.reload()});$(".btn_cancel").click(function(){if(isFromMobileStepOne){location.href="http://close";return}else{if(isUseOneAppLoginPage){location.href=decodeURIComponent(accessUrl)}else{var b="/login/login?accessUrl="+accessUrl;if(this._sCustomDomain!==""&&this._sCustomDomain!==undefined){b+="&customDomain="+this._sCustomDomain}location.href=b}}});$("#user_first").click(function(){$("#user_first").parent().removeClass("invalid");$("#user_second").parent().removeClass("invalid")});$("#user_second").click(function(){$("#user_first").parent().removeClass("invalid");$("#user_second").parent().removeClass("invalid")})},findId:function(){this._hideAllMessage();var c=this._sCountryCode;var f=this._mobileOrEmail=="mobile"?$("#user_auth_code").val():$("#user_auth_code2").val();var a=$("#_hidden_auth_key").val();var g=$("#_hidden_location").val();if(this._mobileOrEmail==="mobile"){var h=$("#user_phone").val();var d=$("#user_first").val().replace(/\s/g,"");var b=$("#user_second").val().replace(/\s/g,"");if(!this._checkValidIdFind(h,a,f,d,b)){return}this.findByPhoneAjax(h,c,a,f,g,d,b)}else{var e=$("#user_email");var i=e.val().trim();if(!this._checkValidIdForEmail(i,a,f,"","")){return}this.findByEmailAjax(i,a,f,g)}},_checkValidIdForEmail:function(d,b,c,a,e){if(d===""&&a===""&&e===""&&c===""){$(".input_blank_warn").show().text(Message.FIND_PW_10);return false}if(!this._checkValidEmail(d)){return false}if(b==""){this._showWrongMessageEmail(Message.ADDED_MSG_117);return}if(c==""){$(".show_wrong_auth_no").show().text(Message.FIND_PW_10);$("#user_auth_code2").parent().addClass("invalid");return false}return true},_checkValidIdFind:function(f,d,e,c,g){var a=this._mobileOrEmail=="mobile";var b=this._findType!=="id"&&this._getInputId();if(!b&&f===""&&c===""&&g===""&&e===""){$(".input_blank_warn").show().text(Message.FIND_PW_10);return false}if(a){if(!this._checkValidMobile(f,c,g)){return false}}else{if(!this._checkValidEmail(f)){return false}}if(d==""){if(a){this._showWrongMessageMobile(Message.ADDED_MSG_116)}else{this._showWrongMessageEmail(Message.ADDED_MSG_117)}return false}if(e==""){if(a){$("#user_auth_code").parent().addClass("invalid")}else{$("#user_auth_code2").parent().addClass("invalid")}$(".show_wrong_auth_no").show().text(Message.FIND_PW_10);return false}return true},findByPhoneAjax:function(f,a,d,e,c,b,h){var g=this;$.post("/rl/"+c+"/idpw/findId",{countryNo:a,phone:f,authKey:d,authNo:e,firstName:h,lastName:b},function(i){g.callbackIdFind(i,a+" "+f)})},findByEmailAjax:function(e,b,c,a){var d=this;$.post("/rl/"+a+"/idpw/findIdByEmail",{email:e,authKey:b,authNo:c},function(f){d.callbackIdFind(f,e)})},callbackIdFind:function(c,a){var h=c.emails;if(c.code=="00"){var g=this;var f=$("#idFindResult").html();$(".contents_box").html(f);$(".result_title").text(Message.replaceParam(Message.FIND_ID_23,a));var e="";for(var b=0,d=h.length;b<d;b++){e+='<strong class="result_id">'+h[b]+"</strong>"}$(".result_box").html(e);$(".btn_confirm").on("click",function(){location.href=isFromMobileStepOne?"http://close":decodeURIComponent(accessUrl)})}else{if(c.code=="53"){this._showWrongAuthCode(c.message)}else{if(c.code=="55"||c.code=="56"){$("#auth_value").val("");$("#auth_value").parent().find("label").removeClass("blind");this._showWrongAuthCode(c.message)}else{$("#wrong_message2").show()}}}},_sendAuthNo:function(){this._hideAllMessage();var b=this._findType=="password"?this._getInputId():"";var a=$("#user_first").val().replace(/\s/g,"");var c=$("#user_second").val().replace(/\s/g,"");if(this._mobileOrEmail=="mobile"){this._sendAuthNoToMobile(b,a,c)}else{this._sendAuthNoToEmail(b,a,c)}},_checkValidCommon:function(b,a){if(b==""){this._showWrongMessageEmail(a);return false}return true},_checkValidCommonName:function(a,d){if(a===""&&d===""){this._showWrongNameInput(Message.UNREGISTERED_DEVICE_39);$("#user_first").parent().addClass("invalid");$("#user_second").parent().addClass("invalid");return false}var c=a.length+d.length;if(a.length+d.length>80){this._showWrongNameInput(Message.replaceParam(Message.UNREGISTERED_DEVICE_37,c));return false}var b="!@&()-_+[]{},./";if(oNweCommonUtils.isContainSpecialChar(a,b)||oNweCommonUtils.isContainSpecialChar(d,b)){this._showWrongNameInput(Message.UNREGISTERED_DEVICE_38);return false}return true},_checkValidAccount:function(){var a=this._findType==="id";if(!a){var b=this._getInputId();a=b.indexOf("@")>=1;if(!a){this._showWrongMessageAccount(Message.NEW_LOGIN_038)}}return a},_checkValidMobile:function(c,b,f){var a=this._checkValidAccount();var d=this._checkValidCommon(c,Message.FIND_PW_09);var e=false;if(d){e=$.isNumeric(c);if(!e){this._showWrongMessageMobile(Message.FIND_PW_22)}}if(!this._checkValidCommonName(b,f)){return false}return a&&d&&e},_checkValidEmail:function(b){var a=this._checkValidAccount();if(this._checkValidCommon(b,Message.FIND_PW_16)==false){return false}if(b!=b.toLowerCase()){this._showWrongMessageEmail(Message.FIND_PW_21);return false}var c=/^[\-_.0-9a-zA-Z]{1,40}@[\-_.0-9a-zA-Z]{1,255}\.[a-zA-z]{2,}$/;if(c.test(b)==false){this._showWrongMessageEmail(Message.FIND_PW_20);return false}return a},_sendAuthNoToMobile:function(b,a,f){var d=$("#user_phone");var c=d.val();var e=this;if(this._checkValidMobile(c,a,f)==false){return}$.post("/idpw/sendSms",{email:b,phone:c,countryNo:e._sCountryCode,findType:e._findType,lastName:a,firstName:f},function(g){if(g.code=="00"){$("#_hidden_auth_key").val(g.authNoKey);$("#_hidden_location").val(g.location);$(".btn_auth").text(Message.FIND_ID_PW_01);e._addDimmedAttr(d);e._addDimmedAttr($("#user_first"));e._addDimmedAttr($("#user_second"));e._addDimmedAttr($("#user_account"));$(".countryCodeButton").prop("disabled");$(".country_list").css("display","none").addClass("freeze");alert(g.message)}else{if(g.code=="32"){e._sendAuthNoToMobile(b,a,f,c,sCountryNo,d);return}else{e._showWrongAuthCode(g.message);alert(g.message)}}})},_sendAuthNoToEmail:function(b,a,f){var e=$("#user_email");var c=e.val().trim();if(this._checkValidEmail(c)==false){return}var d=this;$.post("/idpw/sendEmail",{email:b,privateEmail:c,findType:d._findType},function(g){if(g.code=="00"){$(".btn_auth").text(Message.FIND_ID_PW_01);$("#_hidden_auth_key").val(g.authNoKey);$("#_hidden_location").val(g.location);d._addDimmedAttr(e);d._addDimmedAttr($("#user_account2"));alert(g.message)}else{if(g.code=="32"){d._sendAuthNoToEmail(b,a,f,c,e);return}else{d._showWrongAuthCodeEmail(g.message,true);alert(g.message)}}})},_showWrongMessageMobile:function(a){$("#wrong_message1").show().text(a);$("#user_phone").parent().addClass("invalid")},_showWrongAuthCode:function(a){$(".show_wrong_auth_no").show().text(a);$(".auth_code_val").parent().addClass("invalid")},_showWrongAuthCodeEmail:function(a){$(".show_wrong_auth_no").show().text(a);$(".auth_code_val").parent().addClass("invalid")},_showWrongNameInput:function(a){$("#wrong_name_input").show().text(a)},_showWrongMessageEmail:function(a){$(".show_wrong_form").show().text(a);$("#user_email").parent().addClass("invalid");$("#user_phone").parent().addClass("invalid")},_showWrongMessageAccount:function(a){$(".invalid_account").show().text(a);$(".user_account").parent().addClass("invalid")},_hideAllMessage:function(){$(".wrong_message").hide();$(".input_cover").removeClass("invalid")},_addDimmedAttr:function(a){a.parent().addClass("disabled");a.prop("disabled",true)},findPassword:function(){var j=this;this._hideAllMessage();var d=j._getInputId();var e=$("#user_first").val().replace(/\s/g,"");var b=$("#user_second").val().replace(/\s/g,"");var c=this._sCountryCode;var h=this._mobileOrEmail=="mobile"?$("#user_auth_code").val():$("#user_auth_code2").val();var a=$("#_hidden_auth_key").val();if(j._mobileOrEmail=="mobile"){var f=$("#user_phone");var i=f.val();if(!this._checkValidIdFind(i,a,h,e,b)){return}j._findPasswordByMobile(d,e,b,i,h,a,c)}else{var g=$("#user_email");var k=g.val().trim();if(!this._checkValidIdFind(k,a,h,"","")){return}j._findPasswordByEmail(d,e,b,k,h,a)}},_findPasswordByMobile:function(e,c,h,f,d,b,a){var g=this;$.post("/idpw/findPassword",{email:e,lastName:c,firstName:h,phone:f,authNo:d,authKey:b,countryNo:a},function(i){g._findPasswordCallback(i,e,c,h,f)})},_findPasswordByEmail:function(d,b,g,e,c,a){var f=this;$.post("/idpw/findPasswordByEmail",{email:d,lastName:b,firstName:g,privateEmail:e,authNo:c,authKey:a},function(h){f._findPasswordCallback(h,d,b,g,e)})},_findPasswordCallback:function(d,c,a,f,b){if(d.code=="00"){var e=$("#frmPwChange");$(e).find("input[name=tenantId]").val(d.tenantId);$(e).find("input[name=domainId]").val(d.domainId);$(e).find("input[name=userIdNo]").val(d.userIdNo);$(e).find("input[name=token]").val(d.token);$(e).find("input[name=accessUrl]").val(accessUrl);$(e).find("input[name=serviceCode]").val(sServiceCode);if(bIsAbuser){$(e).find("input[name=usage]").val("relieveBlackList");$(e).find("input[name=privateInfo]").val(b)}else{$(e).find("input[name=usage]").val("changePassword")}$(e).attr("action","/integrate/password/change/byToken").submit()}else{if(d.code=="55"){$("#auth_value").val("");$("#auth_value").parent().find("label").removeClass("blind")}this._showWrongAuthCodeEmail(d.message)}},_clearAllInfo:function(){var a=$(".input_box");a.parent().removeClass("invalid","focus");a.val("");a.parent().removeClass("disabled");a.prop("disabled",false);$(".countryCodeButton").prop("disabled",false);$(".country_list").css("display","");$("#_hidden_auth_key").val("");$(".btn_auth").text(Message.SMS_SEND_BUTTON);$(".countryItem .inner").removeClass("selected");this._hideAllMessage();this._setDefaultCountryCode()},_setCountry:function(a){var b=$(".countryItem .inner").filter(function(){return $(this).find(".code").text()===a}).first();$(".countryCodeButton").text(b.find(".name").text());b.addClass("selected");this._sCountryCode=b.find(".code").text()},_setDefaultCountryCode:function(){if(sBrowserLanguage=="ko_KR"){this._setCountry("+82")}else{if(sBrowserLanguage=="ja_JP"){this._setCountry("+81")}else{if(sBrowserLanguage=="zh_CN"){this._setCountry("+86")}else{if(sBrowserLanguage=="zh_TW"){this._setCountry("+886")}else{this._setCountry("+1")}}}}},_getInputId:function(){return this._mobileOrEmail==="mobile"?$("#user_account").val().trim():$("#user_account2").val().trim()},};WebLogIn=function(){this.init.apply(this,arguments)};WebLogIn.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_sPartNo:1,_sMailDomain:"",_sCustomDomain:"",_loginReady:true,_retryCount:0,_nTwoStepLoginProgress:1,_nOtherLoginOver90Days:3,_nOtherLoginNotConnected:4,_needCaptcha:4,_nReturnCodeFailToSendOTPMail:99,_nReturnCodeWrongIDC:110,_nReturnCodeExpiredPw:24,_nReturnCodeChangePwForFirstUser:25,_nReturnCodeDomainStopStatus:76,_nReturnCodeDomainHoldStatus:78,_nReturnCodePendingDomainMember:72,_nReturnCodePendingDomainAdmin:75,_nReturnCodeDomainChangeName:141,_nReturnCodeWaitPendingMember:600,_webLoginServiceCode:"login_web",_SELECTED_TYPE_KEY:"selectedLoginType",_uaData:[],_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(e,b,a,c){var d=this;this._root=$(e);this._sPartNo=b;this._sMailDomain=a;this._sCustomDomain=c;if(this._sPartNo==1&&this._getLoginType()==="id"){oNweCommonUtils.attachLabelEvent($("#user_id"));if(oNweCommonUtils.getInternetExplorerVersion()<9){$("body").focus()}}else{oNweCommonUtils.attachAllLabelEvent();if($("#keepLogin").prop("checked")==true){$("#login_label").addClass("on")}else{$("#login_label").removeClass("on")}$("#login_label").click(function(){$(this).toggleClass("on");if($(this).hasClass("on")){$("#keepLogin").prop("checked",true)}else{$("#keepLogin").prop("checked",false)}});if(c>""){$("#inputId").focus();$("#inputId").parents(".inp").addClass("focus")}else{$("#password").focus();$("#password").parents(".inp").addClass("focus")}}this._setFingerPrint();this._attachEvent();this._browserCheck();if(sessionStorage.getItem(this._SELECTED_TYPE_KEY)==="id"){$("._idLoginOption").click();$("._userIdLabel").addClass("blind");$("#user_id").focus()}this._setClientHint();addMessageEventListener()},_attachEvent:function(){var a=this;$(".inp input").focus(function(b){b.stopPropagation();$(this).parents(".inp").addClass("focus")}).focusout(function(b){b.stopPropagation();$(this).parents(".inp").removeClass("focus")});$("#user_id").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE&&a._getLoginType()==="id"){a._emailCheck()}});$("#user_id").on("input",function(){if($(this).val()!==""&&$(this).val()!=null){$(".inp").removeClass("failed");$("#div_fail_message").hide()}});$("#loginStart").click(function(){if(a._getLoginType()==="id"){a._emailCheck()}});$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$("#password").on("input",function(c){$("#div_fail_message").hide();var b=$(this).val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#password").val($("#password").val().substr(0,a._MAX_PASSWORD_LENGTH))}});$("#inputId").on("input",function(){$("#div_fail_message").hide()});$(".btn_masking").click(function(f){var d=$("#password");var g=d.attr("type");var c=g==="password"?"text":"password";d.attr("type",c);d.focus();var b=$(this);if(b.hasClass("checked")){b.removeClass("checked")}else{b.addClass("checked")}});$("#inputId").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#password").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#captchaValue").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#changeCaptchaBtn").click(function(b){a._setCaptchaImage($("#captchaKey").val())});$("#clearIdBtn").click(function(b){a._clearSavedId()});$("#loginBtn").click(function(b){a._login()});$("#findIdBtn").click(function(b){a._findId()});$("#lineLogin").click(function(b){a._snsLogin("line",$("#lineLogin").attr("data-accessUrl"))});$("#naverLogin").click(function(b){a._snsLogin("naver",$("#naverLogin").attr("data-accessUrl"))});$("._loginOption").click(function(b){a._selectLoginOption($(b.target).attr("data-type"))})},_setClientHint:function(){var b=this;try{b._getUserAgentData().then(function(c){b._uaData=c},function(c){})}catch(a){console.warn(a)}},_getUserAgentData:function(){try{var b=navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","model","uaFullVersion"]);return b}catch(a){console.warn(a)}},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){console.warn(a)}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)},_changeDefaultMessageText:function(a){$("#div_fail_message").show().find("p").text(a)},_inputValidCheck:function(a){var c=a?a:$.trim($("#user_id").val());if(c==""){$(".inp").addClass("failed");$("#div_fail_message").show();$("#user_id").focus();return false}var d=false;for(var b=0;b<c.length;b++){if(c.charAt(b)==" "){$(".inp").addClass("failed");$("#div_fail_message").show();$("#user_id").focus();return false}if(c.charAt(b)=="@"){d=true}}if(d==false){$(".inp").addClass("failed");$("#div_fail_message").show();$("#user_id").focus();return false}return true},_inputValidCheckForLogin:function(d,b){var a=$("#inputId");var c=$("#password");d=d?d:$.trim($("#inputId").val());b=b?b:$.trim($("#password").val());if(d.indexOf("@")>=0){this._changeDefaultMessageText(Message.WEB_LOGIN_1);$(a).focus();return false}if(d==""){this._changeDefaultMessageText(Message.WEB_LOGIN_2);$(a).focus();return false}if(b==""){this._changeDefaultMessageText(Message.WEB_LOGIN_3);$(c).focus();return false}if($("#divCaptcha").css("display")!="none"&&$("#captchaValue").val().length==0){this._changeDefaultMessageText(Message.WEB_LOGIN_4);$("#captchaValue").focus();return false}return true},_emailCheck:function(){var b=this;if(this._loginReady==false){return}var a=this._convertToHalfWidth($.trim($("#user_id").val()));if(this._inputValidCheck(a)==false){return}loginReady=false;try{$.get("/login/domainCheck",{userId:a},function(d){if(d.returnCode==0){$("#inputId").val(a);var e=window.location.href;if(e.substr(e.length-1,e.length)==="#"){e=e.substr(0,e.length-1)}var f="";if(e.indexOf("?")==-1){f="?userId=".concat(encodeURIComponent(a))}else{f="&userId=".concat(encodeURIComponent(a))}var c=e.concat(f);sessionStorage.setItem(b._SELECTED_TYPE_KEY,"id");location.href=c}else{if(d.returnCode==b._nReturnCodeWrongIDC){if(b._retryCount==0){b._retryCount++;b._emailCheck()}else{$(".inp").addClass("failed");$("#div_fail_message").show();b._retryCount=0}}else{$(".inp").addClass("failed");$("#div_fail_message").show()}}}).fail(function(c,e,d){if(c.readyState=="0"){b._changeDefaultMessageText(Message.NETWORK_ERROR_MESSAGE_WEB,"_password")}})}finally{b._loginReady=true}},_login:function(){var d=this;try{if(this._loginReady==false){return}var a=this._convertToHalfWidth($.trim($("#inputId").val()));var b=this._convertToHalfWidth($.trim($("#password").val()));if(this._inputValidCheckForLogin(a,b)==false){return}this._loginReady=false;a=a+"@"+this._sMailDomain;$.ajax({url:"/login/loginProcess",type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),inputId:a,password:b,keepLoginYn:($("#keepLogin").is(":checked")?"Y":"N"),captchaKey:$("#captchaKey").val(),captchaValue:$("#captchaValue").val(),customDomain:d._sCustomDomain,fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val()})}).done(function(h){if(h.returnCode==0){window.location=h.accessUrl;sessionStorage.removeItem(d._SELECTED_TYPE_KEY)}else{if(h.returnCode==d._nReturnCodeWrongIDC){d._loginReady=true;if(d._retryCount==0){d._retryCount++;d._login()}else{d._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);d._retryCount=0}}else{if(h.returnCode==d._nReturnCodeExpiredPw){var g=$("#changePasswordForm");$(g).find("input[name=tenantId]").val(h.tenantId);$(g).find("input[name=domainId]").val(h.domainId);$(g).find("input[name=userIdNo]").val(h.userIdNo);$(g).find("input[name=accessUrl]").val(h.accessUrl);$(g).find("input[name=token]").val(h.sessionKey);$(g).find("input[name=keepLoginYn]").val(h.keepLoginYn);$(g).find("input[name=serviceCode]").val(h.serviceCode);$(g).find("input[name=usage]").val("expiredPassword");$(g).attr("action","/integrate/password/change/expired").submit()}else{if(h.returnCode==d._nReturnCodeChangePwForFirstUser){var g=$("#changePasswordFormForFirstMember");$(g).find("input[name=id]").val(a);$(g).find("input[name=tenantId]").val(h.tenantId);$(g).find("input[name=accessUrl]").val(h.accessUrl);$(g).find("input[name=token]").val(h.token);$(g).find("input[name=from]").val(h.from);$(g).attr("action","/password/change/first").submit()}else{if(h.returnCode==d._nReturnCodeDomainStopStatus||h.returnCode==d._nReturnCodePendingDomainMember||h.returnCode==d._nReturnCodePendingDomainAdmin||h.returnCode==d._nReturnCodeDomainHoldStatus){var g=$("#domainStopStatusView");$(g).find("input[name=email]").val(h.email);$(g).find("input[name=memberAuthLevel]").val(h.memberAuthLevel);$(g).find("input[name=serviceCode]").val(h.serviceCode);$(g).find("input[name=domainResultCode]").val(h.returnCode);$(g).attr("action","/login/domainStop/view").submit()}else{if(h.returnCode==d._nReturnCodeDomainChangeName){window.location=h.redirectUrl}else{if(h.returnCode==d._nReturnCodeWaitPendingMember){var g=$("#waitPendingMember");$(g).find("input[name=domainId]").val(h.domainId);$(g).attr("action","/login/mWait").submit()}else{if(h.returnCode==d._nTwoStepLoginProgress){var g=$("#twoStepLogin");$(g).find("input[name=usage]").val(h.usage);$(g).find("input[name=redirectUrl]").val(h.redirectUrl);$(g).find("input[name=userIdNo]").val(h.userIdNo);$(g).find("input[name=domainId]").val(h.domainId);$(g).find("input[name=sessionKey]").val(h.sessionKey);$(g).attr("action",h.nextUrl).submit()}else{if(h.returnCode==d._nOtherLoginOver90Days){var f=$("#otherLoginLastLoginForm");f.find("input[name=accessUrl]").val(h.accessUrl);f.find("input[name=phoneNo]").val(h.phoneNo);f.find("input[name=countryCode]").val(h.countryCode);f.find("input[name=phoneNoForView]").val(h.phoneNoForView);f.find("input[name=serviceCode]").val(h.serviceCode);f.find("input[name=language]").val(h.language);f.find("input[name=fidoRegisterEnabled]").val(h.fidoRegisterEnabled);f.find("input[name=phoneIntegrateType]").val("over_90_days_re_auth");f.attr("action",h.nextUrl).submit()}else{if(h.returnCode==d._nOtherLoginNotConnected){var e=$("#phoneLoginConnectForm");e.find("input[name=accessUrl]").val(h.accessUrl);e.find("input[name=deviceId]").val(h.deviceId);e.find("input[name=serviceCode]").val(h.serviceCode);e.find("input[name=language]").val(h.language);e.find("input[name=phoneIntegrateType]").val("after_login_connect");e.attr("action",h.nextUrl).submit()}else{d._loginReady=true;if(h.captchaKey!=null&&h.captchaKey!=""){if($("#divCaptcha").css("display")=="none"){$("#div_fail_message").hide()}else{$("#div_fail_message").show().find("p").text(h.returnMessage)}d._captchaOn(h.captchaKey);$("#captchaValue").val("");d._changeDefaultMessageText(h.returnMessage)}else{if($("#divCaptcha").css("display")!="none"&&$("#captchaKey").val()!=""){d._setCaptchaImage($("#captchaKey").val());$("#captchaValue").val("");$("#div_fail_message").show().find("p").text(h.returnMessage)}else{$("#div_fail_message").show().find("p").text(h.returnMessage)}}}}}}}}}}}}}).fail(function(e,g,f){d._loginReady=true;if(e.readyState=="0"){d._changeDefaultMessageText(Message.NETWORK_ERROR_MESSAGE_WEB,"_password")}else{if(e.status=="401"){d._changeDefaultMessageText(Message.ABUSER_LOGIN_FAIL);d._retryCount=0}else{if(d._retryCount<5){d._retryCount++;d._login()}else{d._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);d._retryCount=0}}}})}catch(c){d._changeDefaultMessageText(Message.DEFAULT_ERROR_MESSAGE);d._loginReady=true}},_captchaOn:function(a){$("#captchaKey").val(a);this._setCaptchaImage(a);$("#divLoginImage").hide();$(".captcha").show();$("#divCaptchaTitle").show()},_setCaptchaImage:function(b){var a="/getCapchaImage?key="+b;a+="&re="+crypto.getRandomValues(new Uint32Array(1))[0]%1000+1;$("#captchaImage").attr("src",a)},_findId:function(){var a=oNweCommonUtils.getQueryParamOrDefault("accessUrl",$("#accessUrl").val());location.href="/view/find/id?accessUrl="+a},_clearSavedId:function(){var a=this;$.get("/login/clearSavedId","",function(){var b=oNweCommonUtils.getQueryParamOrDefault("accessUrl",$("#accessUrl").val());window.location.href="/login/login?accessUrl="+b})},_snsLogin:function(h,c){var j=this;var p="";var g="";if(j._uaData.length>0||!!j._uaData.platform){try{p=encodeURIComponent('"'+j._uaData.platform+'";v="'+j._uaData.platformVersion+'"');if(navigator.userAgentData.brands){g=encodeURIComponent($.map(navigator.userAgentData.brands,function(e){return'"'+e.brand+'";v="'+e.version+'"'}).join(","))}else{g=encodeURIComponent($.map(navigator.userAgentData.uaList,function(e){return'"'+e.brand+'";v="'+e.version+'"'}).join(","))}}catch(k){console.warn(k)}}var d=window.screenLeft?window.screenLeft:window.screenX;var b=window.screenTop?window.screenTop:window.screenY;var n=document.body.clientWidth;var m=document.body.clientHeight;var o=900;var l=730;var r=d+(n/2)-(o/2);var q=b+(m/2)-(l/2);var f="left="+r+"px, top="+q+"px, width="+o+"px, height="+l+"px,";f+="toolbar=no, menubar=no, location=no, scrollbars=yes, resizable=yes, status=no";var i="";if(window.crypto){i=crypto.getRandomValues(new Uint32Array(1))[0]}else{i=window.msCrypto.getRandomValues(new Uint32Array(1))[0]}$("#msgToken").val(i);c=oNweCommonUtils.getQueryParamOrDefault("accessUrl",c);var a="/login/snslogin/"+h+"?serviceCode="+this._webLoginServiceCode+"&clientHintOS="+p+"&clientHintBrowser="+g+"&authOrigin="+window.location.origin+"&msgToken="+i+"&accessUrl="+c;window.open(a,"",f)},_browserCheck:function(){if(/(MSIE (9|8|7)|Trident\/(5|4|3))/.test((window.navigator||{}).userAgent)){$("#_ie_banner").show()}},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_selectLoginOption:function(a){this._setLoginType(a);if(a==="phone"){$("._phoneLoginSelected").show();$("._idLoginSelected").hide();$("._phoneLoginOption").addClass("selected");$("._idLoginOption").removeClass("selected");$(".inp").removeClass("failed");$("#div_fail_message").hide();$(".check_info").hide()}else{$(".form_cover").removeClass("failed");$("._idLoginSelected").show();$("._phoneLoginSelected").hide();$("._idLoginOption").addClass("selected");$("._phoneLoginOption").removeClass("selected");$("#div_phone_fail_message").hide();$(".check_info").show()}},_setLoginType:function(a){$("#nowLoginType").val(a)},_getLoginType:function(){return $("#nowLoginType").val().trim()}};StartLogIn=function(){this.init.apply(this,arguments)};StartLogIn.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_sPartNo:1,_sMailDomain:"",_sCustomDomain:"",_loginReady:true,_retryCount:0,_nTwoStepLoginProgress:1,_nOtherLoginOver90Days:3,_nOtherLoginNotConnected:4,_needCaptcha:4,_nReturnCodeFailToSendOTPMail:99,_nReturnCodeWrongIDC:110,_nAlreadyLogined:200,_nReturnCodeExpiredPw:24,_nReturnCodeChangePwForFirstUser:25,_nReturnCodeDomainStopStatus:76,_nReturnCodeDomainHoldStatus:78,_nReturnCodePendingDomainMember:72,_nReturnCodePendingDomainAdmin:75,_nReturnCodeDomainChangeName:141,_nReturnCodeWaitPendingMember:600,_webLoginServiceCode:"login_web",_SELECTED_TYPE_KEY:"selectedLoginType",_uaData:[],_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},_bIsMobile:false,_sServiceCode:"",_aEventQueue:new Array(),LEFT_ARROW_KEY:37,RIGHT_ARROW_KEY:39,UP_ARROW_KEY:38,DOWN_ARROW_KEY:40,BACKSPACE_KEY:8,ENTER_KEY_CODE:13,_SELECTED_COUNTRY_CODE:"selectedCountryCode",_nUnregisteredDeviceProgress:2,_nReturnCodeLoginRestrictedFromOtherDomain:55,_nReturnCodeServiceNoAuth:54,_nReturnCodeNotConnectedPhone:30,_nReturnCodeDomainNotUsePhoneLogin:31,_nReturnCodeResignUser:64,_nReturnCodeStopUser:65,_nReturnCodeAbuser:998,init:function(){var c=this;if(sessionStorage.getItem(this._SELECTED_COUNTRY_CODE)!=null&&sessionStorage.getItem(this._SELECTED_COUNTRY_CODE)!==""){var b=sessionStorage.getItem(this._SELECTED_COUNTRY_CODE);if(b!=null&&b!==""){b=b.replace(/\+/g,"");setTimeout(function(){c._selectCountryCode(b)},100)}}var a=$("#lastLoginType").val();if(a==="naver"){$("#recent_naver").show()}else{if(a==="line"){$("#recent_line").show()}}this._setFingerPrint();this._attachEvent();this._setClientHint();addMessageEventListener();this._setDefaultCountryCode()},_attachEvent:function(){var a=this;$(".input_cover input").focus(function(b){b.stopPropagation();$(this).parent().addClass("focus")}).focusout(function(b){b.stopPropagation();$(this).parent().removeClass("focus")}).change(function(b){var c=$(this);if(c.val()){c.parent().addClass("writing")}else{c.parent().removeClass("writing")}});$("#user_id").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._checkValidParam()}});$("#user_id").on("input",function(){if($(this).val()!==""&&$(this).val()!=null){$("#user_id_clear").addClass("show");a._closeWarning()}else{$("#user_id_clear").removeClass("show")}});$("#user_id_clear").click(function(){$("#user_id").val("");a._checkCountryCodeVisibility()});$("#loginStart").click(function(){a._checkValidParam()});$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$("input").keydown(function(b){a._checkCountryCodeVisibility();a._checkLoginButtonDisabled()});$("input").keyup(function(b){a._checkCountryCodeVisibility();a._checkLoginButtonDisabled()});$("#findIdBtn").click(function(b){a._findId()});$("#lineLogin").click(function(b){a._snsLogin("line",$("#lineLogin").attr("data-accessUrl"))});$("#naverLogin").click(function(b){a._snsLogin("naver",$("#naverLogin").attr("data-accessUrl"))});$("#countryCodeBtn").click(function(b){if($("#countryCodeBtn").hasClass("open")){$("#countryCodeBtn").removeClass("open")}else{$("#countryCodeBtn").addClass("open")}});$(".countryCode").click(function(b){a._selectCountryCode($(this).data("country-code"))});$(document).click(function(b){if(!$("#country_list").is(b.target)&&!$("#countryCodeBtn").is(b.target)){$("#countryCodeBtn").removeClass("open")}})},_selectCountryCode:function(a){$(".countryCode.selected").removeClass("selected");var b=$(".countryCode").filter(function(){return $(this).data("country-code")==a}).first();b.addClass("selected");var c=b.find("em").text();$("#countryCodeBtn").html(c);$("#countryCodeBtn").data("selected-country-code",a);$("#countryCodeBtn").removeClass("open");this._closeWarning()},_setDefaultCountryCode:function(){var d=this;var c=$("#language").val();var b=$("#lastCountryCode").val();if(b!=null&&b!=""){$("#"+b).prop("selected",true);setTimeout(function(){d._selectCountryCode(b)},100)}else{var a="81";if(c==="ja_JP"||c==="en_US"){a="81"}else{if(c==="ko_KR"){a="82"}else{if(c==="zh_TW"){a="886"}else{if(c==="zh_CN"){a="86"}}}}setTimeout(function(){d._selectCountryCode(a)},100)}},_setClientHint:function(){var b=this;try{b._getUserAgentData().then(function(c){b._uaData=c},function(c){})}catch(a){console.warn(a)}},_checkLoginButtonDisabled:function(){var b=this;var a=$("#user_id").val();if(a.length<1){$(".login_normal").addClass("disabled");$(".login_normal").attr("disabled","disabled")}},_getUserAgentData:function(){try{var b=navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","model","uaFullVersion"]);return b}catch(a){console.warn(a)}},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){console.warn(a)}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)},_inputValidCheck:function(a){var b=a?a:$.trim($("#user_id").val());var d=this;if(b==""){d._showWarning(Message.WEB_LOGIN_2);return false}var c=new RegExp("^([\\w\\.\\@\\- ]+)$");if(!c.test(b)){d._showWarning(Message.WEB_LOGIN_5);return false}var c=new RegExp("^([\\d\\- ]+)$");if(b.indexOf("@")==-1&&!c.test(b)){d._showWarning(Message.WEB_LOGIN_5);return false}return true},_checkValidParam:function(){var c=this;if(this._loginReady==false){return}var b=this._convertToHalfWidth($.trim($("#user_id").val()));var a="+"+$("#countryCodeBtn").data("selected-country-code");if(this._inputValidCheck(b)==false){return}loginReady=false;try{$.get("/login/checkParam",{loginParam:b,countryCode:a},function(d){if(d.returnCode==0){c._gotoLoginPage()}else{if(d.returnCode==c._nReturnCodeWrongIDC){if(c._retryCount==0){c._retryCount++;c._checkValidParam()}else{c._showWarning(Message.WEB_LOGIN_5);c._retryCount=0}}else{if(d.returnCode==c._nAlreadyLogined){window.location.reload()}else{if(d.returnCode==32){c._showWarning(Message.WEB_LOGIN_6)}else{if(d.returnCode==11){c._showWarning(Message.WEB_LOGIN_7)}else{c._showWarning(Message.WEB_LOGIN_5)}}}}}}).fail(function(d,f,e){if(d.readyState=="0"){c._showWarning(Message.NETWORK_ERROR_MESSAGE,"_password")}})}finally{c._loginReady=true}},_findId:function(){var a=oNweCommonUtils.getQueryParamOrDefault("accessUrl",$("#accessUrl").val());location.href="/view/find/id?accessUrl="+a},_snsLogin:function(h,c){var j=this;var p="";var g="";if(j._uaData.length>0||!!j._uaData.platform){try{p=encodeURIComponent('"'+j._uaData.platform+'";v="'+j._uaData.platformVersion+'"');if(navigator.userAgentData.brands){g=encodeURIComponent($.map(navigator.userAgentData.brands,function(e){return'"'+e.brand+'";v="'+e.version+'"'}).join(","))}else{g=encodeURIComponent($.map(navigator.userAgentData.uaList,function(e){return'"'+e.brand+'";v="'+e.version+'"'}).join(","))}}catch(k){console.warn(k)}}var d=window.screenLeft?window.screenLeft:window.screenX;var b=window.screenTop?window.screenTop:window.screenY;var n=document.body.clientWidth;var m=document.body.clientHeight;var o=900;var l=730;var r=d+(n/2)-(o/2);var q=b+(m/2)-(l/2);var f="left="+r+"px, top="+q+"px, width="+o+"px, height="+l+"px,";f+="toolbar=no, menubar=no, location=no, scrollbars=yes, resizable=yes, status=no";var i="";if(window.crypto){i=crypto.getRandomValues(new Uint32Array(1))[0]}else{i=window.msCrypto.getRandomValues(new Uint32Array(1))[0]}$("#msgToken").val(i);c=oNweCommonUtils.getQueryParamOrDefault("accessUrl",c);var a="/login/snslogin/"+h+"?serviceCode="+this._webLoginServiceCode+"&clientHintOS="+p+"&clientHintBrowser="+g+"&authOrigin="+window.location.origin+"&msgToken="+i+"&accessUrl="+c;window.open(a,"",f)},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_showWarning:function(a){$(".input_cover").addClass("invalid");$("#user_id").focus();$("#fail_message").show().html(a)},_closeWarning:function(){$(".input_cover").removeClass("invalid");$("#fail_message").hide()},_gotoLoginPage:function(){var h=this;var d=this._convertToHalfWidth($.trim($("#user_id").val()));var b=$("#countryCodeBtn").data("selected-country-code");var g=$("#language").val();var c=new URLSearchParams(window.location.search);c.set("loginParam",d);c.set("language",g);c.set("countryCode",b);c.set("serviceCode","login_web");var a=$("#rememberId").prop("checked");if(a){c.set("isIdRememberChecked","true")}var f=new URLSearchParams();c.forEach(function(j,i){if(i!=="isFidoOtherLogin"){f.set(i,j)}});var e=window.location.href.split("?")[0];e=h._removeHashFromUrl(e);window.location.href=e+"?"+f.toString()},_removeHashFromUrl:function(b){var a=b.indexOf("#");if(a===-1){return b}return b.substr(0,a)},_checkCountryCodeVisibility:function(){var c=this;var a=$("#user_id").val();var b=new RegExp("^([0-9\\- ]+)$");if(b.test(a)&&a.length>=7){document.getElementsByClassName("country_code")[0].style.display=""}else{document.getElementsByClassName("country_code")[0].style.display="none"}},getCountryName:function(a){var b=$.trim(a.html());try{return b.split("+")[0]}catch(c){return b}},};PasswordLogIn=function(){this.init.apply(this,arguments)};PasswordLogIn.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_sPartNo:1,_sMailDomain:"",_sCustomDomain:"",_retryCount:0,_sServiceCode:"login_web",_webLoginServiceCode:"login_web",_SELECTED_TYPE_KEY:"selectedLoginType",_uaData:[],_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(b,a){this._sMailDomain=b;this._sServiceCode=a;this._attachEvent();this._setFingerPrint();this._setClientHint();addMessageEventListener();var c=$("#user_id").val();if(c<=""){$("#user_id").focus()}else{$("#user_pwd").focus()}this._checkWpTempUser()},_attachEvent:function(){var a=this;$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$(".input_box").focus(function(b){b.stopPropagation();$(this).parents(".input_cover").addClass("focus")}).focusout(function(b){b.stopPropagation();$(this).parents(".input_cover").removeClass("focus")});$("#user_pwd").on("input",function(c){a._closeWarning();var b=$(this).val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#user_pwd").val($("#user_pwd").val().substr(0,a._MAX_PASSWORD_LENGTH))}if($(this).val()!==""&&$(this).val()!=null){$("#user_pwd_clear").addClass("show")}else{$("#user_pwd_clear").removeClass("show")}});$("#user_pwd_clear").click(function(){$("#user_pwd").val("")});$("#user_id").on("input",function(){$("#fail_message").hide();var b=a._convertToHalfWidth($.trim($("#user_id").val()));var c=a._convertToHalfWidth($.trim($("#user_pwd").val()));if(b!=""||c!=""){$("#idFailMessage").hide();$("#idInputCover").removeClass("invalid");a._clearMsgAndBtn()}});$("#user_auth").on("input",function(){$("#fail_message").hide();if($("#user_auth").val()!=""){$("#captchaFailMessage").hide();$("#captchaInputCover").removeClass("invalid");a._clearMsgAndBtn()}});$(".btn_masking").click(function(f){var d=$("#user_pwd");var g=d.attr("type");var c=g==="password"?"text":"password";d.attr("type",c);d.focus();var b=$(this);if(b.hasClass("checked")){b.removeClass("checked")}else{b.addClass("checked")}});$("#user_id, #user_pwd, #user_auth").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$("#changeCaptchaBtn").click(function(b){a._setCaptchaImage($("#captchaKey").val())});$("#loginBtn").click(function(b){a._login()});$("#fidoAuthentication").click(function(c){var b=a._convertToHalfWidth($.trim($("#user_id").val()));b=b+"@"+a._sMailDomain;$.ajax({url:"/fido2/auth/req/view/check",type:"GET",async:false,data:{loginParam:b},success:function(e){if(e.redirectUrl){var d=new URLSearchParams(window.location.search);if(!d.get("serviceCode")){d.set("serviceCode",a._sServiceCode)}d.set("loginParam",b);window.location.href=e.redirectUrl+"?"+d}else{if(e.message){alert(e.message)}}},})});$("#clearIdBtn").click(function(b){a._clearSavedId()});$(".findPwdBtn").click(function(b){a._findPassword()})},_clearSavedId:function(){var a=oNweCommonUtils.getQueryParamOrDefault("accessUrl",$("#accessUrl").val());window.location.href="/login/clear/savedId?accessUrl="+a},_setClientHint:function(){var b=this;try{b._getUserAgentData().then(function(c){b._uaData=c},function(c){})}catch(a){console.warn(a)}},_getUserAgentData:function(){try{var b=navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","model","uaFullVersion"]);return b}catch(a){console.warn(a)}},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){console.warn(a)}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)},_inputValidCheckForLogin:function(c,b){var c=c?c:$.trim($("#user_id").val());var b=b?b:$.trim($("#user_pwd").val());var a=$("#wpTempUserLoginId").val()!="";var d=this._sServiceCode==="service_api";if(c.indexOf("@")>=0){if(!a&&!d){this._showWarning(Message.WEB_LOGIN_1);$("#user_id").parents(".inp").addClass("focus");return false}}if(c==""){$("#idFailMessage").show();$("#idInputCover").addClass("invalid");$("#user_id").parents(".inp").addClass("focus");return false}if(b==""){this._showWarning(Message.WEB_LOGIN_3);$("#user_pwd").parents(".inp").addClass("focus");return false}if($("#divCaptcha").css("display")!="none"&&$("#user_auth").val().length==0){$("#captchaFailMessage").show();$("#captchaInputCover").addClass("invalid");$("#user_auth").focus();return false}return true},_webIdPwLogin:function(){var f=this;try{var b=f._convertToHalfWidth($.trim($("#user_id").val()));var c=f._convertToHalfWidth($.trim($("#user_pwd").val()));if(this._inputValidCheckForLogin(b,c)==false){return}b=b+"@"+this._sMailDomain;var a=$("#wpTempUserLoginId").val()!="";if(a){b=$("#wpTempUserLoginId").val()}$.ajax({url:"/login/loginProcessV2",type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),inputId:b,password:c,keepLoginYn:($("#keepLogin").is(":checked")?"Y":"N"),captchaKey:$("#captchaKey").val(),captchaValue:$("#user_auth").val(),customDomain:f._sMailDomain,fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val(),rememberIdYn:($("#rememberId").is(":checked")?"Y":"N")})}).done(function(e){window.location=e.accessUrl;sessionStorage.removeItem(f._SELECTED_TYPE_KEY)}).fail(function(n,g,k){if(n.readyState=="0"){f._showWarning(Message.NETWORK_ERROR_MESSAGE,"_password");return}var i=n.status;var l=n.responseJSON;var m=l.message;if(i===301){var h=n.getResponseHeader("X-Request-Method");if(h=="GET"){window.location=l.redirectUrl;return}if(h=="POST"){var j=l.data;var e=document.createElement("form");e.method="post";e.action=l.redirectUrl;for(var o in j){if(j.hasOwnProperty(o)){var p=document.createElement("input");p.setAttribute("type","hidden");p.setAttribute("name",o);p.setAttribute("value",j[o]);e.appendChild(p)}}document.body.appendChild(e);e.submit();return}}if(i===307){if(f._retryCount==0){f._retryCount++;f._login()}else{f._showWarning(Message.DEFAULT_ERROR_MESSAGE);f._retryCount=0}}if(i===400||i===401){if($("#divCaptcha").css("display")!="none"&&$("#captchaKey").val()!=""){f._setCaptchaImage($("#captchaKey").val());$("#user_auth").val("")}f._showWarning(m);f._retryCount=0;return}if(i===429){f._captchaOn(l.body.captchaKey);$("#user_auth").val("");f._showWarning(m);return}if(f._retryCount<5){f._retryCount++;f._login()}else{f._showWarning(Message.DEFAULT_ERROR_MESSAGE);f._retryCount=0}})}catch(d){f._showWarning(Message.DEFAULT_ERROR_MESSAGE)}},_showWarning:function(a){$("#fail_message").show().html(a);$("#pwdInputCover").addClass("invalid")},_closeWarning:function(){var a=this;this._clearMsgAndBtn()},_clearMsgAndBtn:function(){$("#fail_message").hide();$("#pwdInputCover").removeClass("invalid")},_captchaOn:function(a){$("#captchaKey").val(a);this._setCaptchaImage(a);$("#divCaptcha").show()},_setCaptchaImage:function(b){var a="/getCapchaImage?key="+b;a+="&re="+crypto.getRandomValues(new Uint32Array(1))[0]%1000+1;$("#captchaImage").css("background-image","url('"+a+"')")},_findPassword:function(){if(this._sServiceCode!="login_web"&&this._sServiceCode!="service_api"){var b="/view/find/password?accessUrl="+encodeURIComponent(location.href)+"&customDomain="+this._sMailDomain+"&serviceCode="+serviceCode;location.href=b;return}var a=oNweCommonUtils.getQueryParamOrDefault("accessUrl",$("#accessUrl").val());location.href="/view/find/password?accessUrl="+a+"&customDomain="+this._sCustomDomain+"&serviceCode="+this._sServiceCode},_goToLoginPart1:function(){var b=this;var a=oNweCommonUtils.getQueryParamOrDefault("accessUrl",$("#accessUrl").val());location.href="/login/login?accessUrl="+a},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_login:function(){if(this._sServiceCode==="service_api"){this._openapiIdPwLogin();return}var a=$("#loginType").val();if(a=="web"){this._webIdPwLogin()}else{if(a=="mobile"){this._mobileIdPwLogin()}else{if(a=="pcapp"){this._pcAppIdPwLogin()}else{this._showWarning(Message.DEFAULT_ERROR_MESSAGE)}}}},_mobileIdPwLogin:function(){var g=this;try{var b=g._convertToHalfWidth($.trim($("#user_id").val()));var c=g._convertToHalfWidth($.trim($("#user_pwd").val()));if(g._inputValidCheckForLogin(b,c)===false){return}b=b+"@"+this._sMailDomain;var a=$("#wpTempUserLoginId").val()!="";if(a){b=$("#wpTempUserLoginId").val()}var f=oCommonDeviceLogin.getUrlParam("code");$.ajax({url:"/mobile/loginProcessV2",type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({inputId:b,password:c,serviceCode:g._sServiceCode,accessUrl:encodeURIComponent(location.href),captchaKey:$("#captchaKey").val(),captchaValue:$("#user_auth").val(),mdmCode:f,deviceId:$("#deviceId").val(),deviceIdSessionKey:$("#deviceIdSessionKey").val()})}).done(function(e){window.location=e.redirectUrl}).fail(function(o,h,l){if(o.readyState=="0"){this._showWarning(Message.NETWORK_ERROR_MESSAGE_WEB);return}var j=o.status;var m=o.responseJSON;var n=m.message;if(j===301){var i=o.getResponseHeader("X-Request-Method");if(i=="GET"){window.location=m.redirectUrl;return}if(i=="POST"){var k=m.data;var e=document.createElement("form");e.method="post";e.action=m.redirectUrl;for(var p in k){if(k.hasOwnProperty(p)){var q=document.createElement("input");q.setAttribute("type","hidden");q.setAttribute("name",p);q.setAttribute("value",k[p]);e.appendChild(q)}}document.body.appendChild(e);e.submit();return}}if(j===307){if(g._retryCount===0){g._retryCount++;g._mobileIdPwLogin()}else{g._showWarning(Message.DEFAULT_ERROR_MESSAGE);g._retryCount=0}}if(j===400||j===401||j===403){if($("#divCaptcha").css("display")!="none"&&$("#captchaKey").val()!=""){g._setCaptchaImage($("#captchaKey").val());$("#user_auth").val("")}g._showWarning(n);return}if(j===429){g._captchaOn(m.body.captchaKey);$("#user_auth").val("");g._showWarning(n);return}g._showWarning(Message.DEFAULT_ERROR_MESSAGE)})}catch(d){g._showWarning(Message.DEFAULT_ERROR_MESSAGE)}},_pcAppIdPwLogin:function(){var d=this;try{var a=d._convertToHalfWidth($.trim($("#user_id").val()));var b=d._convertToHalfWidth($.trim($("#user_pwd").val()));if(d._inputValidCheckForLogin(a,b)===false){return}a=a+"@"+this._sMailDomain;$.ajax({url:"/pcapp/loginProcessV2",type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({inputId:a,password:b,serviceCode:d._sServiceCode,accessUrl:encodeURIComponent(location.href),captchaKey:$("#captchaKey").val(),captchaValue:$("#user_auth").val(),deviceId:$("#deviceId").val(),rememberIdYn:($("#rememberId").is(":checked")?"Y":"N")})}).done(function(e){window.location=e.redirectUrl}).fail(function(m,f,j){if(m.readyState=="0"){this._showWarning(Message.NETWORK_ERROR_MESSAGE_WEB);return}var h=m.status;var k=m.responseJSON;var l=k.message;if(h===301){var g=m.getResponseHeader("X-Request-Method");if(g=="GET"){window.location=k.redirectUrl;return}if(g=="POST"){var i=k.data;var e=document.createElement("form");e.method="post";e.action=k.redirectUrl;for(var n in i){if(i.hasOwnProperty(n)){var o=document.createElement("input");o.setAttribute("type","hidden");o.setAttribute("name",n);o.setAttribute("value",i[n]);e.appendChild(o)}}document.body.appendChild(e);e.submit();return}}if(h===307){if(d._retryCount===0){d._retryCount++;d._pcAppIdPwLogin()}else{d._showWarning(Message.DEFAULT_ERROR_MESSAGE);d._retryCount=0}}if(h===400||h===401||h===403){if($("#divCaptcha").css("display")!="none"&&$("#captchaKey").val()!=""){d._setCaptchaImage($("#captchaKey").val());$("#user_auth").val("")}d._showWarning(l);return}if(h===429){d._captchaOn(k.body.captchaKey);$("#user_auth").val("");d._showWarning(l);return}d._showWarning(Message.DEFAULT_ERROR_MESSAGE)})}catch(c){d._showWarning(Message.DEFAULT_ERROR_MESSAGE)}},_openapiIdPwLogin:function(){var g=this;try{var a=g._convertToHalfWidth($.trim($("#user_id").val()));var b=g._convertToHalfWidth($.trim($("#user_pwd").val()));if(g._inputValidCheckForLogin(a,b)===false){return}var c=new RSAKey();$.ajaxSetup({async:false});getKeysForced();keySplit();c.setPublic(evalue,nvalue);encpw=c.encrypt(getLenChar(sessionkey)+sessionkey+getLenChar(a)+a+getLenChar(b)+b);$.ajaxSetup({async:true});var f=JSON.parse($("#openapiParameters").val());$.ajax({url:"/oauth2/v2.0/authorize/login",type:"POST",async:false,dataType:"json",data:({encnm:keyname,encpw:encpw,inputId:a,clientId:f.clientId,redirectUri:f.redirectUri,state:f.state,scope:f.scope,responseType:f.responseType,nonce:f.nonce,fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val(),captchaKey:$("#captchaKey").val(),captchaValue:$("#user_auth").val()})}).done(function(e){window.location=e.redirectUrl}).fail(function(o,h,l){getKeysForced();if(o.readyState=="0"){g._showWarning(Message.NETWORK_ERROR_MESSAGE_WEB);return}var j=o.status;var m=o.responseJSON;var n=m.message;if(j===301){var i=o.getResponseHeader("X-Request-Method");if(i=="GET"){window.location=m.redirectUrl;return}if(i=="POST"){var k=m.data;var e=document.createElement("form");e.method="post";e.action=m.redirectUrl;for(var p in k){if(k.hasOwnProperty(p)){var q=document.createElement("input");q.setAttribute("type","hidden");q.setAttribute("name",p);q.setAttribute("value",k[p]);e.appendChild(q)}}document.body.appendChild(e);e.submit();return}}if(j===307){if(g._retryCount<5){g._retryCount++;g._openapiIdPwLogin()}else{g._showWarning(Message.DEFAULT_ERROR_MESSAGE);g._retryCount=0}return}if(j===400||j===401||j===403||j===429){g._showWarning(n);return}g._showWarning(Message.DEFAULT_ERROR_MESSAGE)})}catch(d){g._showWarning(Message.DEFAULT_ERROR_MESSAGE)}},_checkWpTempUser:function(){var a=$("#wpTempUserLoginId").val()!="";if(!a){return}$("#idInputCover").addClass("uncorrectable");$("#user_id").attr("readonly",true);$("#mail_domain").text("")}};MobileLogIn=function(){this.init.apply(this,arguments)};var callbackSnsLogin=function(a){if(a.includes("naver")){$("#naverLogin").show()}};MobileLogIn.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_loginReady:true,_nTwoStepLoginProgress:1,_nUnregisteredDeviceProgress:2,_nOtherLoginOver90Days:3,_nOtherLoginNotConnected:4,_needCaptcha:4,_nReturnCodeExpiredPw:24,_nReturnCodeChangePwForFirstUser:25,_nReturnCodeWrongIDC:110,_nReturnCodeDomainStopStatus:76,_nReturnCodeDomainHoldStatus:78,_nReturnCodePendingDomainMember:72,_nReturnCodePendingDomainAdmin:75,_nReturnCodeDomainChangeName:141,_nReturnCodeWaitPendingMember:600,_nReturnCodeLoginRestrictedFromOtherDomain:55,_pcAppServiceCode:"one_pc",_driveAppServiceCode:"drive_client",_mobileAppServiceCode:"one_app",init:function(b,c,a){this._hideMessageAll(["_password","_captcha"]);$(".works_login").css("min-height",$(window).height()-70);$(window).resize(function(){$(".works_login").css("min-height",$(window).height()-70)});this._attachEvent();this.sNweEmail=b;this.sServiceCode=c;this.accessUrl=encodeURIComponent(location.href);this.mdmCode=this._getUrlParam("code");this.deviceId=this._getUrlParam("deviceId");if(this.sNweEmail!=null&&this.sNweEmail!=""){this._setAutoInputId(this.sNweEmail)}$("#password").focus();this._supportableSNSLogin()},_supportableSNSLogin:function(){var a=this;if(a.sServiceCode!=a._mobileAppServiceCode){$("#naverLogin").show();return}if(typeof worksAuth.supportableSNSLogin==="function"){worksAuth.supportableSNSLogin("callbackSnsLogin")}},_attachEvent:function(){var a=this;$("#password").on("input",function(c){var b=$("#password").val();if(b.length==0){$("#_loginBtn").removeClass("active")}else{$("#_loginBtn").addClass("active")}if(b.length>a._MAX_PASSWORD_LENGTH){$("#password").val($("#password").val().substr(0,a._MAX_PASSWORD_LENGTH))}});if($("#inputId").val().length>0){$("#inputId").parent().children("label").addClass("blind")}if($("#password").val().length>0){$("#password").parent().children("label").addClass("blind")}$("#inputId, #password, #captchaValue").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$(".btn_masking").click(function(f){var d=$("#password");var g=d.attr("type");var c=g==="password"?"text":"password";d.attr("type",c);d.focus();var b=$(this);if(b.hasClass("checked")){b.removeClass("checked")}else{b.addClass("checked")}});$("#_loginBtn").click(function(){a._login()});$("#_pwFindBtn").click(function(){a._findPassword();var b=a._filter(window.location.href);a._findPassword(b)});$("#_refreshCaptchaBtn").click(function(){a._hideMessage("_captcha");a._setCaptchaImage($("#captchaKey").val())});$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});$("#lineLogin").click(function(){a._snsLogin("line")});$("#naverLogin").click(function(){a._snsLogin("naver")});$(".inp input").focus(function(b){b.stopPropagation();$(this).parents(".inp").addClass("focus")}).focusout(function(b){b.stopPropagation();$(this).parents(".inp").removeClass("focus")})},_snsLogin:function(a){var c=this;if(c.sServiceCode==c._mobileAppServiceCode){worksAuth.login(a);return}else{var b="/login/snslogin/"+a+"?serviceCode="+c.sServiceCode+"&language="+$.cookie("language");if(this.deviceId){b+="&deviceId="+this.deviceId}window.location=b}},_setAutoInputId:function(a){$("#inputId").focus();$("#inputId").val(a)},_login:function(){var d=this;try{if(this._loginReady==false){return}var a=this._convertToHalfWidth($.trim($("#inputId").val()));var b=this._convertToHalfWidth($.trim($("#password").val()));if(this._inputValidCheck(a,b)==false){return}this._loginReady=false;$("._login").hide();$.ajax({url:"/mobile/loginProcess",type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({inputId:a,password:b,serviceCode:d.sServiceCode,accessUrl:d.accessUrl,emailFromClient:d.sNweEmail,captchaKey:$("#captchaKey").val(),captchaValue:$("#captchaValue").val(),mdmCode:d.mdmCode,deviceId:$("#deviceId").val(),deviceIdSessionKey:$("#deviceIdSessionKey").val()})}).done(function(i){if(i.returnCode==0){var j="/login/mSuccess?userIdNo="+i.userIdNo+"&domainId="+i.domainId+"&tenantId="+i.tenantId+"&email="+i.email+"&fidoRegisterEnabled="+i.fidoRegisterEnabled;if(i.useDomainAclYn){j+="&useDomainAclYn="+i.useDomainAclYn}if(i.domainAclListJson){j+="&domainAclList="+i.domainAclListJson}if(i.userIp){j+="&userIp="+i.userIp}window.location=j}else{if(i.returnCode==20&&i.captchaKey!=null&&i.captchaKey!=""){d._loginReady=true;if($("#divCaptcha").css("display")!="none"){d._showMessage(i.returnMessage,"_password")}d._captchaOn(i.captchaKey)}else{if(i.returnCode==d._nReturnCodeExpiredPw){var h=$("#changePasswordForm");$(h).find("input[name=tenantId]").val(i.tenantId);$(h).find("input[name=domainId]").val(i.domainId);$(h).find("input[name=userIdNo]").val(i.userIdNo);$(h).find("input[name=accessUrl]").val(i.accessUrl);$(h).find("input[name=token]").val(i.sessionKey);$(h).find("input[name=keepLoginYn]").val(i.keepLoginYn);$(h).find("input[name=serviceCode]").val(i.serviceCode);$(h).find("input[name=usage]").val("expiredPassword");$(h).attr("action","/integrate/password/change/expired").submit()}else{if(i.returnCode==d._nReturnCodeChangePwForFirstUser){var h=$("#changePasswordFormForFirstMember");$(h).find("input[name=id]").val(a);$(h).find("input[name=tenantId]").val(i.tenantId);$(h).find("input[name=accessUrl]").val(i.accessUrl);$(h).find("input[name=token]").val(i.token);$(h).find("input[name=from]").val(i.from);$(h).find("input[name=mdmCode]").val(i.mdmCode);$(h).find("input[name=deviceId]").val(i.deviceId);$(h).attr("action","/password/change/first").submit()}else{if(i.returnCode==d._nReturnCodeWrongIDC){d._loginReady=true;d._login()}else{if(i.returnCode==d._nReturnCodeDomainStopStatus||i.returnCode==d._nReturnCodePendingDomainMember||i.returnCode==d._nReturnCodePendingDomainAdmin||i.returnCode==d._nReturnCodeDomainHoldStatus){var h=$("#domainStopStatusView");$(h).find("input[name=email]").val(i.email);$(h).find("input[name=memberAuthLevel]").val(i.memberAuthLevel);$(h).find("input[name=serviceCode]").val(i.serviceCode);$(h).find("input[name=domainResultCode]").val(i.returnCode);$(h).attr("action","/login/domainStop/view").submit()}else{if(i.returnCode==d._nReturnCodeDomainChangeName){window.location=i.redirectUrl}else{if(i.returnCode==d._nReturnCodeWaitPendingMember){var h=$("#waitPendingMember");$(h).find("input[name=email]").val(i.email);$(h).find("input[name=domainId]").val(i.domainId);$(h).find("input[name=tenantId]").val(i.tenantId);$(h).find("input[name=userIdNo]").val(i.userIdNo);$(h).find("input[name=userIp]").val(i.userIp);$(h).attr("action","/login/mWait").submit()}else{if(i.returnCode==120){d._loginReady=true;window.location=i.returnUrl}else{if(i.returnCode==d._nReturnCodeLoginRestrictedFromOtherDomain){var h=$("#mFail");$(h).find("input[name=message]").val(i.returnMessageId);$(h).attr("action","/login/mFail").submit()}else{if(i.returnCode==d._nTwoStepLoginProgress){var h=$("#twoStepLogin");$(h).find("input[name=usage]").val(i.usage);$(h).find("input[name=redirectUrl]").val(i.redirectUrl);$(h).find("input[name=userIdNo]").val(i.userIdNo);$(h).find("input[name=domainId]").val(i.domainId);$(h).find("input[name=sessionKey]").val(i.sessionKey);$(h).attr("action",i.nextUrl).submit()}else{if(i.returnCode==d._nUnregisteredDeviceProgress){var f=$("#unregisteredDeviceForm");f.find("input[name=accessUrl]").val(i.accessUrl);f.find("input[name=sessionKey]").val(i.sessionKey);f.find("input[name=phoneNo]").val(i.phoneNo);f.find("input[name=countryCode]").val(i.countryCode);f.find("input[name=serviceCode]").val(i.serviceCode);f.find("input[name=phoneNoForView]").val(i.phoneNoForView);f.find("input[name=language]").val(i.language);f.find("input[name=phoneIntegrateType]").val("unregistered_device");f.attr("action",i.nextUrl).submit()}else{if(i.returnCode==d._nOtherLoginOver90Days){var g=$("#otherLoginLastLoginForm");g.find("input[name=accessUrl]").val(i.accessUrl);g.find("input[name=phoneNo]").val(i.phoneNo);g.find("input[name=countryCode]").val(i.countryCode);g.find("input[name=phoneNoForView]").val(i.phoneNoForView);g.find("input[name=serviceCode]").val(i.serviceCode);g.find("input[name=language]").val(i.language);g.find("input[name=fidoRegisterEnabled]").val(i.fidoRegisterEnabled);g.find("input[name=phoneIntegrateType]").val("over_90_days_re_auth");g.attr("action",i.nextUrl).submit()}else{if(i.returnCode==d._nOtherLoginNotConnected){var e=$("#phoneLoginConnectForm");e.find("input[name=accessUrl]").val(i.accessUrl);e.find("input[name=deviceId]").val(i.deviceId);e.find("input[name=serviceCode]").val(i.serviceCode);e.find("input[name=language]").val(i.language);e.find("input[name=phoneIntegrateType]").val("after_login_connect");e.attr("action",i.nextUrl).submit()}else{d._loginReady=true;d._showMessage(i.returnMessage,"_password");$("._login").show()}}}}}}}}}}}}}}}).fail(function(e,g,f){d._loginReady=true;if(e.readyState=="0"){d._showMessage(Message.NETWORK_ERROR_MESSAGE,"_password")}else{if(e.status=="401"){d._showMessage(Message.ABUSER_LOGIN_FAIL,"_password")}else{d._showMessage(Message.DEFAULT_ERROR_MESSAGE,"_password")}}})}catch(c){d._showMessage(Message.DEFAULT_ERROR_MESSAGE,"_password")}finally{d._loginReady=true;$("._login").show()}},_inputValidCheck:function(e,b){var a=$("#inputId");var d=$("#password");var e=e?e:$.trim($("#inputId").val());var b=b?b:$.trim($("#password").val());if(e==""){this._showMessage(Message.MOBILE_LOGIN_1,"_id");$(a).focus();return false}this._hideMessage("_id");if(b==""){this._showMessage(Message.MOBILE_LOGIN_2,"_password");$(d).focus();return false}this._hideMessage("_password");if($("#divCaptcha").css("display")!="none"&&$("#captchaValue").val().length==0){var c=Message.MOBILE_LOGIN_3;this._showMessage(c,"_captcha");$("#captchaValue").focus();return false}this._hideMessage("_captcha");for(var f=0;f<e.length;f++){if(e.charAt(f)==" "){this._showMessage(Message.MOBILE_LOGIN_4,"_password");return false}}this._hideMessage("_password");return true},_showMessage:function(c,b){$("._availWrong").removeClass("wrong");var a='<p class="alert _message">'+c+"</p>";if($("._message").length>0){$("._message").remove()}$("."+b).addClass("wrong");$("."+b).after(a)},_hideMessage:function(a){$("."+a).removeClass("wrong");$("."+a).next("._message").remove()},_hideMessageAll:function(a){for(var b=0;b<a.length;b++){$("."+a[b]).removeClass("wrong")}$("._message").remove()},_captchaOn:function(a){$("#captchaKey").val(a);$("#captchaValue").val("");$("#captchaMessage").show();this._setCaptchaImage(a);$("#divCaptcha").show()},_findPassword:function(a){window.location.href="/view/find/password?customDomain="+this.sCustomDomain+"&serviceCode="+this.sServiceCode+"&accessUrl="+encodeURIComponent(a)},_setCaptchaImage:function(b){var a="/getCapchaImage?key="+b;a+="&re="+crypto.getRandomValues(new Uint32Array(1))[0]%1000+1;$("#captchaImage").attr("src",a)},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_getUrlParam:function(a){var c=this._filter(window.location.href);var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));if(b==null){return null}else{return decodeURI(b[1])||0}},_filter:function(a){if(a.includes("worksmobile.com")==false&&a.includes("gov-naverworks.com")==false&&a.includes("navercorp.com")==false&&a.includes("ncpworkplace.com")==false&&a.includes("whalespace.io")==false){return""}else{return a}}};PhoneLogin=function(){this.init.apply(this,arguments)};PhoneLogin.prototype={_loginReady:true,_retryCount:0,_bIsMobile:false,_sServiceCode:"",_aEventQueue:new Array(),LEFT_ARROW_KEY:37,RIGHT_ARROW_KEY:39,UP_ARROW_KEY:38,DOWN_ARROW_KEY:40,BACKSPACE_KEY:8,ENTER_KEY_CODE:13,_SELECTED_TYPE_KEY:"selectedLoginType",_SELECTED_COUNTRY_CODE:"selectedCountryCode",_nTwoStepLoginProgress:1,_nUnregisteredDeviceProgress:2,_nReturnCodeExpiredPw:24,_nReturnCodeChangePwForFirstUser:25,_nReturnCodeWrongIDC:110,_nReturnCodeDomainStopStatus:76,_nReturnCodeDomainHoldStatus:78,_nReturnCodePendingDomainMember:72,_nReturnCodePendingDomainAdmin:75,_nReturnCodeDomainChangeName:141,_nReturnCodeWaitPendingMember:600,_nReturnCodeLoginRestrictedFromOtherDomain:55,_nReturnCodeRestrictedIp:53,_nReturnCodeServiceNoAuth:54,_nReturnCodeNotConnectedPhone:30,_nReturnCodeDomainNotUsePhoneLogin:31,_nReturnCodeResignUser:64,_nReturnCodeStopUser:65,_nReturnCodeAbuser:998,init:function(b,a){if(typeof b==="boolean"){this._bIsMobile=b}else{if(typeof value==="string"){this._bIsMobile=b==="true"}}this._sServiceCode=a;this._setTitleMessage("");this._setFingerPrint();this._attachment()},_attachment:function(){var a=this;$(".input_box").on("input",function(b){a._setCopyValue($(b.target))});$(".input_box").keydown(function(b){a._keydownProcess(b)});$(".input_box").on("keyup",function(b){a._checkAuthNo(b)});$(".input_cover input, .number_cover input").on("focus",function(){$(this).parents("[class*='_cover']").addClass("focus")});$(".input_cover input, .number_cover input").on("focusout",function(){$(this).parents("[class*='_cover']").removeClass("focus")});$(".btn_notify").click(function(b){a._sendAuthNo($(b.target))});$("#resendToastClose").click(function(){a._hideResendMessage()})},_setCopyValue:function(a){if(oNweCommonUtils.isMsBrowser()){return}var g=this;var c=a.val();if(c.length<2){return}a.val("");var f=parseInt(a.data("no"));c=c.substr(0,4);var d=0;for(var e=f;e<=4;e++){$("#authNumber"+e).val(c.slice(d,++d))}this._hideFailElement();var b=g._makeAuthNo();if(b.length<4){return}if(this._pushQueue(b)){setTimeout(function(){g._processQueue()},200)}},_hideFailElement:function(){$("#fail_message").hide();$(".number_cover").removeClass("invalid");this._hideResendMessage()},_requestAuthNoCheck:function(a){var c=this;var b="/otherLogin/message/verify";if($("._authNoType").val()==="sms"){b="/otherLogin/beforeLogin/sms/verify"}$(".input_box").prop("disabled",true);$.ajax({type:"post",url:b,data:{phoneNo:$("._requestId").val(),sessionKey:$("._authNoSessionKey").val(),authNo:a}}).done(function(d){$(".input_box").prop("disabled",false);if(d.returnCode==="00"){c._doOtherLogin("phone",d.verifiedKey)}else{c._showFailMessage(d.returnMessage)}})},_showFailMessage:function(a){$("#fail_message").show().html(a);$(".number_cover").addClass("invalid");$(".input_box").each(function(){$(this).val("")});$("#authNumber1").focus()},_checkAuthNo:function(f){var h=this;var a=$(f.target);var d=parseInt(a.attr("data-no"));if(f.keyCode===this.LEFT_ARROW_KEY){if(d===1){return}this._selectOrFocus($("#authNumber"+(d-1)));return}else{if(f.keyCode===this.RIGHT_ARROW_KEY){if(d===4){return}this._selectOrFocus($("#authNumber"+(d+1)));return}else{if(f.keyCode===this.UP_ARROW_KEY||f.keyCode===this.DOWN_ARROW_KEY){return}else{if(f.keyCode===this.BACKSPACE_KEY){this._selectOrFocus($("#authNumber"+(d-1)))}}}}var g=a.val().trim();if(g==null||g===""){a.val("");return}this._hideFailElement();var c=this._convertToHalfWidth(a.val());if(isNaN(c)){a.val("");return}$(".input_box").each(function(){$(this).attr("readonly",false)});var b=this._makeAuthNo();if(b.length===4){if(this._pushQueue(b)){setTimeout(function(){h._processQueue()},200)}}else{if(a.attr("data-no")==="1"){a.focus()}this._nextAuthNo(a)}},_selectOrFocus:function(a){if(a.val()==null||a.val()===""){a.focus();a.attr("data-selected","n")}else{a.select();a.attr("data-selected","y")}},_nextAuthNo:function(b){var a=b.attr("data-no");b.attr("data-selected","n");$(".input_box").each(function(){if(parseInt($(this).attr("data-no"))===parseInt(a)+1){if($(this).val()!==""){$(this).select()}else{$(this).focus()}return false}})},_lengthCheck:function(a){if(a.attr("data-no")==="4"&&a.val().length>=1){a.attr("readonly",true)}if(a.val().length>=1){if(a.attr("data-selected")==="y"){a.attr("data-selected","n");return}this._nextAuthNo(a)}},_keydownProcess:function(b){var a=$(b.target);if(b.keyCode===this.LEFT_ARROW_KEY||b.keyCode===this.RIGHT_ARROW_KEY||b.keyCode===this.UP_ARROW_KEY||b.keyCode===this.DOWN_ARROW_KEY||b.keyCode===this.BACKSPACE_KEY){return}else{this._lengthCheck(a)}},_makeAuthNo:function(){var a="";$(".input_box").each(function(){a+=$(this).val()});if(a.length<4){return a}return this._convertToHalfWidth(a)},_doOtherLogin:function(f,b){var d=this;try{var a=this._convertToHalfWidth($.trim($("._requestId").val()));$.ajax({url:"/otherLogin/"+f+"/loginProcess",type:"post",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({accessUrl:$("#accessUrl").val(),otherLoginId:a,fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val(),serviceCode:d._sServiceCode,deviceIdSessionKey:$("#deviceIdSessionKey").val(),verifiedKey:b})}).done(function(e){d._bIsMobile?d._mobileProcess(f,e,b):d._webProcess(f,e,b)}).fail(function(e,h,g){d._loginReady=true;if(e.readyState=="0"){d._showFailMessage(Message.NETWORK_ERROR_MESSAGE)}else{if(e.status=="401"){d._showFailMessage(Message.ABUSER_LOGIN_FAIL);d._retryCount=0}else{if(d._retryCount<5){d._retryCount++;d._doOtherLogin(f,b)}else{d._showFailMessage(Message.DEFAULT_ERROR_MESSAGE);d._retryCount=0}}}})}catch(c){d._showFailMessage(Message.DEFAULT_ERROR_MESSAGE);d._loginReady=true}},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_webProcess:function(d,b,c){if(b.returnCode==0){sessionStorage.removeItem(this._SELECTED_TYPE_KEY);window.location=b.accessUrl}else{if(b.returnCode==this._nReturnCodeWrongIDC){this._loginReady=true;if(this._retryCount==0){this._retryCount++;this._doOtherLogin(d,c)}else{this._showFailMessage(Message.DEFAULT_ERROR_MESSAGE);this._retryCount=0}}else{if(b.returnCode==this._nReturnCodeExpiredPw){var a=$("#changePasswordForm");$(a).find("input[name=tenantId]").val(b.tenantId);$(a).find("input[name=domainId]").val(b.domainId);$(a).find("input[name=userIdNo]").val(b.userIdNo);$(a).find("input[name=accessUrl]").val(b.accessUrl);$(a).find("input[name=token]").val(b.sessionKey);$(a).find("input[name=keepLoginYn]").val(b.keepLoginYn);$(a).find("input[name=serviceCode]").val(b.serviceCode);$(a).find("input[name=usage]").val("expiredPassword");if(d=="phone"){$(a).find("input[name=isPhoneLogin]").val(true)}$(a).attr("action","/integrate/password/change/expired").submit()}else{if(b.returnCode==this._nReturnCodeChangePwForFirstUser){var a=$("#changePasswordFormForFirstMember");$(a).find("input[name=id]").val(b.id);$(a).find("input[name=tenantId]").val(b.tenantId);$(a).find("input[name=accessUrl]").val(b.accessUrl);$(a).find("input[name=token]").val(b.token);$(a).find("input[name=from]").val(b.from);$(a).attr("action","/password/change/first").submit()}else{if(b.returnCode==this._nReturnCodeDomainStopStatus||b.returnCode==this._nReturnCodePendingDomainMember||b.returnCode==this._nReturnCodePendingDomainAdmin||b.returnCode==this._nReturnCodeDomainHoldStatus){var a=$("#domainStopStatusView");$(a).find("input[name=email]").val(b.email);$(a).find("input[name=memberAuthLevel]").val(b.memberAuthLevel);$(a).find("input[name=serviceCode]").val(b.serviceCode);$(a).find("input[name=domainResultCode]").val(b.returnCode);$(a).attr("action","/login/domainStop/view").submit()}else{if(b.returnCode==this._nReturnCodeDomainChangeName){window.location=b.redirectUrl}else{if(b.returnCode==this._nReturnCodeWaitPendingMember){var a=$("#waitPendingMember");$(a).find("input[name=domainId]").val(b.domainId);$(a).attr("action","/login/mWait").submit()}else{if(b.returnCode==this._nReturnCodeNotConnectedPhone||b.returnCode==this._nReturnCodeDomainNotUsePhoneLogin||b.returnCode==this._nReturnCodeResignUser||b.returnCode==this._nReturnCodeStopUser||b.returnCode==this._nReturnCodeAbuser){this._showFailMessage(b.returnMessage)}else{if(b.returnCode==this._nTwoStepLoginProgress){var a=$("#twoStepLogin");$(a).find("input[name=usage]").val(b.usage);$(a).find("input[name=redirectUrl]").val(b.redirectUrl);$(a).find("input[name=userIdNo]").val(b.userIdNo);$(a).find("input[name=domainId]").val(b.domainId);$(a).find("input[name=sessionKey]").val(b.sessionKey);if(d=="phone"){$(a).find("input[name=isPhoneLogin]").val(true)}$(a).attr("action",b.nextUrl).submit()}else{if(b.returnCode==this._nReturnCodeRestrictedIp){this._showFailMessage(Message.WEB_LOGIN_8)}else{this._showFailMessage(Message.DEFAULT_ERROR_MESSAGE)}}}}}}}}}}},_mobileProcess:function(f,c,d){if(c.returnCode==0){var e="/login/mSuccess?userIdNo="+c.userIdNo+"&domainId="+c.domainId+"&tenantId="+c.tenantId+"&email="+c.email+"&fidoRegisterEnabled="+c.fidoRegisterEnabled;if(c.useDomainAclYn){e+="&useDomainAclYn="+c.useDomainAclYn}if(c.domainAclListJson){e+="&domainAclList="+c.domainAclListJson}if(c.userIp){e+="&userIp="+c.userIp}window.location=e}else{if(c.returnCode==this._nReturnCodeExpiredPw){var b=$("#changePasswordForm");$(b).find("input[name=tenantId]").val(c.tenantId);$(b).find("input[name=domainId]").val(c.domainId);$(b).find("input[name=userIdNo]").val(c.userIdNo);$(b).find("input[name=accessUrl]").val(c.mobileLoginPart2Url);$(b).find("input[name=token]").val(c.sessionKey);$(b).find("input[name=keepLoginYn]").val(c.keepLoginYn);$(b).find("input[name=serviceCode]").val(c.serviceCode);$(b).find("input[name=usage]").val("expiredPassword");$(b).attr("action","/integrate/password/change/expired").submit()}else{if(c.returnCode==this._nReturnCodeChangePwForFirstUser){var b=$("#changePasswordFormForFirstMember");$(b).find("input[name=id]").val(c.id);$(b).find("input[name=tenantId]").val(c.tenantId);$(b).find("input[name=accessUrl]").val(c.mobileLoginPart2Url);$(b).find("input[name=token]").val(c.token);$(b).find("input[name=from]").val(c.from);$(b).find("input[name=mdmCode]").val(c.mdmCode);$(b).find("input[name=deviceId]").val(c.deviceId);$(b).attr("action","/password/change/first").submit()}else{if(c.returnCode==this._nReturnCodeWrongIDC){this._loginReady=true;this._doOtherLogin(f,d)}else{if(c.returnCode==this._nReturnCodeDomainStopStatus||c.returnCode==this._nReturnCodePendingDomainMember||c.returnCode==this._nReturnCodePendingDomainAdmin||c.returnCode==this._nReturnCodeDomainHoldStatus){var b=$("#domainStopStatusView");$(b).find("input[name=email]").val(c.email);$(b).find("input[name=memberAuthLevel]").val(c.memberAuthLevel);$(b).find("input[name=serviceCode]").val(c.serviceCode);$(b).find("input[name=domainResultCode]").val(c.returnCode);$(b).attr("action","/login/domainStop/view").submit()}else{if(c.returnCode==this._nReturnCodeDomainChangeName){window.location=c.redirectUrl}else{if(c.returnCode==this._nReturnCodeWaitPendingMember){var b=$("#waitPendingMember");$(b).find("input[name=email]").val(c.email);$(b).find("input[name=domainId]").val(c.domainId);$(b).find("input[name=tenantId]").val(c.tenantId);$(b).find("input[name=userIdNo]").val(c.userIdNo);$(b).find("input[name=userIp]").val(c.userIp);$(b).attr("action","/login/mWait").submit()}else{if(c.returnCode==this._nReturnCodeLoginRestrictedFromOtherDomain){var b=$("#mFail");$(b).find("input[name=message]").val(c.returnMessageId);$(b).attr("action","/login/mFail").submit()}else{if(c.returnCode==this._nReturnCodeServiceNoAuth||c.returnCode==this._nReturnCodeNotConnectedPhone||c.returnCode==this._nReturnCodeDomainNotUsePhoneLogin||c.returnCode==this._nReturnCodeResignUser||c.returnCode==this._nReturnCodeStopUser||c.returnCode==this._nReturnCodeAbuser){this._showFailMessage(c.returnMessage)}else{if(c.returnCode==this._nTwoStepLoginProgress){var b=$("#twoStepLogin");$(b).find("input[name=usage]").val(c.usage);$(b).find("input[name=redirectUrl]").val(c.redirectUrl);$(b).find("input[name=userIdNo]").val(c.userIdNo);$(b).find("input[name=domainId]").val(c.domainId);$(b).find("input[name=sessionKey]").val(c.sessionKey);if(f=="phone"){$(b).find("input[name=isPhoneLogin]").val(true)}$(b).attr("action",c.nextUrl).submit()}else{if(c.returnCode==this._nUnregisteredDeviceProgress){var a=$("#unregisteredDeviceForm");a.find("input[name=accessUrl]").val(c.accessUrl);a.find("input[name=sessionKey]").val(c.sessionKey);a.find("input[name=phoneNo]").val(c.phoneNo);a.find("input[name=countryCode]").val(c.countryCode);a.find("input[name=phoneNoForView]").val(c.phoneNoForView);a.find("input[name=language]").val(c.language);a.find("input[name=phoneIntegrateType]").val("unregistered_device");a.attr("action",c.nextUrl).submit()}else{this._loginReady=true;this._showFailMessage(c.returnMessage)}}}}}}}}}}}},_sendAuthNo:function(a){var d=a.attr("data-authNoType");var c=this;this._hideFailElement();this._hideResendMessage();var b="";if(d==="sms"){b="/otherLogin/beforeLogin/sms/send"}else{b="/otherLogin/message/send"}$.ajax({url:b,type:"post",data:{phoneNo:$("._requestId").val(),serviceCode:c._sServiceCode}}).done(function(e){if(e.returnCode==="00"){if(a.attr("id")=="resendBtn"){c._showResendMessage()}$("._authNoSessionKey").val(e.data);$(".input_box").val("");$("._authNoType").val(d);$("#resendBtn").attr("data-authNoType",d);c._setTitleMessage(d);if(d==="sms"){$("#sendMessageBtn").show();$("#sendSmsBtn").hide()}else{$("#sendMessageBtn").hide();$("#sendSmsBtn").show()}}else{alert(e.returnMessage)}})},_showResendMessage:function(){$("#resendToast").show()},_hideResendMessage:function(){$("#resendToast").hide()},_pushQueue:function(a){if(this._aEventQueue.length===0){this._aEventQueue.push(a);return true}return false},_processQueue:function(){this._requestAuthNoCheck(this._aEventQueue.shift())},_setTitleMessage:function(c){var b=$("._requestEmail").val();var e=$("#messageTitleText").val().replace("{emailId}",'<em class="point">'+b+"</em>");var a=$("._requestId").val();var d=$("#smsTitleText").val().replace("{phoneNo}",'<em class="point">'+a+"</em>");if(c==null||c===""){c=$("._authNoType").val()}if(c=="message"){$(".title").html(e)}else{$(".title").html(d)}$(".title").show()},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){console.warn(a)}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)},};FidoAuthRequest=function(){this.init.apply(this,arguments)};FidoAuthRequest.prototype={_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(){if(this._ieCheck()){location.href="/fido2/auth/req/error/view"+window.location.search;return}this._setFingerPrint();this._doPush()},_setFailUrl:function(e){var d=this;var c="/fido2/auth/login/fail?";var a=$("#sendSmsAuthNo");if(a){var b=new URLSearchParams(window.location.search);b.set("fidoRequestId",e);b.set("isPhoneLoginRequest",true);a.click(function(){location.href=c+b})}$("#failMsgLayerClose").click(function(){$("#failMsgLayer").hide();var f=new URLSearchParams(window.location.search);f.set("fidoRequestId",e);f.set("isFidoFailure",true);location.href=c+f})},_ieCheck:function(){var a=navigator.userAgent.toLowerCase();if((navigator.appName==="Netscape"&&a.indexOf("trident")!==-1)||(a.indexOf("msie")!==-1)){return true}return false},_doPush:function(){var d=this;var g=window.location.search;var b=d._getQueryParam("loginParam");var a=d._getQueryParam("countryCode");var f=d._getQueryParam("serviceCode");var e=d._getQueryParam("deviceId");var c=d._getQueryParam("accessUrl");$.ajax({url:"/api/fido2/auth/req/push",method:"PUT",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({loginParam:decodeURIComponent(b),countryCode:a,accessUrl:decodeURIComponent(c),serviceType:"MASTER_DEVICE_LOGIN",clientType:f,deviceId:e}),success:function(h){d._setFailUrl(h.fidoRequestId);d._showData(h);$("#fm_login").show();d._callCheck(1000,{loginParam:b,countryCode:a,fidoRequestId:h.fidoRequestId,serviceCode:f})},error:function(h,k,j){if(h.status===409){alert(h.responseJSON.description);var i=h.responseJSON.data.loginUrl;i+=g;if(g.indexOf("isFidoFailure")<0){i+="&isFidoFailure=true"}location.href=i}else{location.href="/fido2/auth/req/error/view"+g}}})},_doPolling:function(a,b,c){setTimeout(function(){try{a(b,c)}catch(d){console.warn(d)}},b)},_callCheck:function(a,b){$.ajax({url:"/api/fido2/auth/req/check",method:"GET",async:false,dataType:"json",data:{loginParam:decodeURIComponent(b.loginParam),countryCode:b.countryCode,fidoRequestId:b.fidoRequestId},success:function(d){if(d.sessionStatus==="SUCCESS"){var c=new URLSearchParams(window.location.search);c.set("fidoRequestId",b.fidoRequestId);c.set("fingerPrint",$("#fingerPrint").val());c.set("fingerPrintDetail",encodeURIComponent($("#fingerPrintDetail").val()));location.href="/fido2/auth/login?"+c}else{if(d.sessionStatus==="CANCELED"){FidoAuthRequest.prototype._showFailureLayer(b.serviceCode)}else{if(d.sessionStatus==="WAITING"){FidoAuthRequest.prototype._doPolling(FidoAuthRequest.prototype._callCheck,1000,b)}}}},error:function(c){FidoAuthRequest.prototype._showFailureLayer(b.serviceCode)}})},_showFailureLayer:function(a){$("#failMsgLayer").show()},_showData:function(a){var b=$("#deviceModel").text();$("#deviceModel").html(b.replace("{deviceModel}",'<em class="point">'+a.deviceName+" ("+a.modelName+")</em>"));a.sessionNumber.split("").forEach(function(c){var d=$('<strong class="auth_number">'+c+"</strong>");$("#sessionNumber").append(d)});$("#deviceModel,#sessionNumber").show()},_getQueryParam:function(b){var a=location.search.substr(location.search.indexOf("?")+1);var d="";a=a.split("&");for(var c=0;c<a.length;c++){temp=a[c].split("=");if([temp[0]]==b){d=temp[1]}}return d},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){console.warn(a)}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)}};OpenapiLogIn=function(){this.init.apply(this,arguments)};OpenapiLogIn.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_sPartNo:1,_sClientId:"",_sRedirectUri:"",_sState:"",_sScope:"",_sResponseType:"",_sNonce:"",_loginReady:true,_retryCount:0,_serviceCode:"login_web",_webLoginServiceCode:"login_web",_SELECTED_TYPE_KEY:"selectedLoginType",_uaData:[],_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(a,f,e,d,b,c){this._sClientId=a;this._sRedirectUri=f;this._sState=e;this._sScope=d;this._sResponseType=b;this._sNonce=c;this._attachEvent();this._setFingerPrint();this._setClientHint()},_attachEvent:function(){var a=this;$("input").keypress(function(b){oNweCommonUtils.preventEnterKey(b)});if($("#inputId").val().length>0){$("#inputId").removeClass("nodata")}if($("#password").val().length>0){$("#password").removeClass("nodata")}$("#inputId, #password, #captchaValue").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._login()}});$(".inp").click(function(){$(this).children("input").focus()});$("#inputId, #password").focus(function(){$(this).removeClass("nodata")}).focusout(function(){if($(this).val().length<=0){$(this).addClass("nodata")}});$("#loginBtn").click(function(b){a._login()})},_login:function(){var d=this;try{if(d._loginReady!=true){return}if(d._inputValidCheck()!=true){return}var a=$("#inputId").val();d._loginReady=false;var b=new RSAKey();$.ajaxSetup({async:false});getKeysForced();keySplit();b.setPublic(evalue,nvalue);encpw=b.encrypt(getLenChar(sessionkey)+sessionkey+getLenChar(a)+a+getLenChar($("#password").val())+$("#password").val());$.ajaxSetup({async:true});$.ajax({url:"/oauth2/v2.0/authorize/login",type:"POST",async:false,dataType:"json",data:({encnm:keyname,encpw:encpw,inputId:a,clientId:d._sClientId,redirectUri:d._sRedirectUri,state:d._sState,scope:d._sScope,responseType:d._sResponseType,nonce:d._sNonce,fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val(),captchaKey:$("#captchaKey").val(),captchaValue:$("#captchaValue").val()})}).done(function(e){window.location=e.redirectUrl}).fail(function(m,f,j){getKeysForced();d._loginReady=true;if(m.readyState=="0"){alert(Message.NETWORK_ERROR_MESSAGE_WEB);return}var h=m.status;var k=m.responseJSON;var l=k.message;if(h===301){var g=m.getResponseHeader("X-Request-Method");if(g=="GET"){window.location=k.redirectUrl;return}if(g=="POST"){var i=k.data;var e=document.createElement("form");e.method="post";e.action=k.redirectUrl;for(var n in i){if(i.hasOwnProperty(n)){var o=document.createElement("input");o.setAttribute("type","hidden");o.setAttribute("name",n);o.setAttribute("value",i[n]);e.appendChild(o)}}document.body.appendChild(e);e.submit();return}}if(h===307){if(d._retryCount<5){d._retryCount++;d._login()}else{alert(Message.DEFAULT_ERROR_MESSAGE);d._retryCount=0}return}if(h===400||h===401||h===403||h===429){alert(l);return}alert(Message.DEFAULT_ERROR_MESSAGE)})}catch(c){alert(Message.DEFAULT_ERROR_MESSAGE);d._loginReady=true}finally{d._loginReady=true}},_inputValidCheck:function(){var a=$("#inputId");var b=$("#password");if($.trim($(a).val())==""){alert(Message.WEB_LOGIN_2);$(a).focus();return false}if($.trim($(b).val())==""){alert(Message.WEB_LOGIN_3);$(b).focus();return false}return true},_setClientHint:function(){var b=this;try{b._getUserAgentData().then(function(c){b._uaData=c},function(c){})}catch(a){console.warn(a)}},_getUserAgentData:function(){try{var b=navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture","model","uaFullVersion"]);return b}catch(a){console.warn(a)}},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){console.warn(a)}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)},_showWarning:function(a){$("#div_fail_message").show().find("p").html(a);$("#loginBtn").addClass("disabled");$("#loginBtn").attr("disabled","disabled")},_closeWarning:function(){var c=this;var a=c._convertToHalfWidth($.trim($("#inputId").val()));var b=c._convertToHalfWidth($.trim($("#password").val()));c._clearMsgAndBtn()},_clearMsgAndBtn:function(){$("#loginBtn").removeClass("disabled");$("#loginBtn").removeAttr("disabled");$("#div_fail_message").hide()},_captchaOn:function(a){$("#captchaKey").val(a);this._setCaptchaImage(a);$("#divLoginImage").hide();$(".captcha").show();$("#divCaptchaTitle").show()},_setCaptchaImage:function(b){var a="/getCapchaImage?key="+b;a+="&re="+crypto.getRandomValues(new Uint32Array(1))[0]%1000+1;$("#captchaImage").attr("src",a)},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})}};PasswordChange=function(){this.init.apply(this,arguments)};PasswordChange.prototype={_nOtherLoginNotConnected:4,_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_ajaxReady:true,_nPasswordSameMessage:21,_nReturnCodeRestrictedIp:53,_RESULT_CODE_TOKEN_EXPIRED:320,_nReturnCodeDomainChangeName:141,_nTwoStepLoginProgress:1,_nUserStatusStaged:202,_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(b,a,c){this._bUsingToken=b;this._oTenantConfig=a;this._fromAuthMail=c;this._attachEvent();this._setFingerPrint();$("#user_pwd").focus();this._passwordGradeChecker=new PasswordGradeChecker(this._oTenantConfig)},_attachEvent:function(){var a=this;$("#user_pwd").on("input",function(c){var b=$("#user_pwd").val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#user_pwd").val($("#user_pwd").val().substr(0,a._MAX_PASSWORD_LENGTH))}});$("#user_pwd2").on("input",function(c){var b=$("#user_pwd2").val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#user_pwd2").val($("#user_pwd2").val().substr(0,a._MAX_PASSWORD_LENGTH))}});$("#user_pwd").focusin(function(){$("#newPasswordLayer").removeClass("invalid");$("#newPasswordLayer").addClass("focus")});$("#user_pwd").focusout(function(){$("#newPasswordLayer").removeClass("focus");a._passwordGradeChecker._doCheckSafetyLevel()});$("#user_pwd2").focusin(function(){$("#newPasswordLayer2").removeClass("invalid");$("#newPasswordLayer2").addClass("focus")});$("#user_pwd2").focusout(function(){$("#newPasswordLayer2").removeClass("focus");a._passwordGradeChecker._validCheckPassword()});$("#user_pwd2").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){if(a._bUsingToken){a._changePasswordByToken()}else{a._changePasswordForFirst()}}});$("#_changePasswordBtn").click(function(){if(a._bUsingToken){a._changePasswordByToken()}else{a._changePasswordForFirst()}});$(".btn_masking").click(function(f){var b=$(this).parent().find(".input_box");var g=b.attr("type");var d=g==="password"?"text":"password";b.attr("type",d);var c=$(this);if(c.hasClass("checked")){c.removeClass("checked")}else{c.addClass("checked")}})},_validCheckPassword:function(){var a=$.trim($("#user_pwd").val());var b=$.trim($("#user_pwd2").val());if(a==""){this._showWarningMessageForNewPassword(Message.PASSWORD_CHANGE_8);return false}if(b==""){this._showWarningMessageForNewPassword2(Message.PASSWORD_CHANGE_8);return false}if(a!=b){this._showWarningMessageForNewPassword2(Message.PASSWORD_CHANGE_3);return false}if(a==b&&b.length>this._MAX_PASSWORD_LENGTH){alert(Message.PASSWORD_CHANGE_4);return false}return this._passwordGradeChecker._calculatePwResult()},_changePasswordForFirst:function(){if(this._ajaxReady==false){return}var a=$("#id").val();if(!this._validCheckPassword()){return}this._ajaxReady=false;var b=this;$.post("/password/change/first/do",{encodedPassword:Base64.encode($("#user_pwd").val()),token:$("#token").val(),from:$("#from").val(),id:a,accessUrl:$("#accessUrl").val(),tenantId:b._oTenantConfig.tenantId,deviceId:$("#deviceId").val(),keepLoginYn:$("#keepLoginYn").val(),fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val(),rememberIdYn:$("#rememberIdYn").val()},function(e){b._ajaxReady=true;if(e.returnCode==b._nReturnCodeDomainChangeName){location.href=e.redirectUrl;return}if(e.returnCode==0){alert(e.alertSuccess);if(e.isMobilePage==true){location.href="/login/mSuccess?userIdNo="+e.userIdNo+"&domainId="+e.domainId+"&tenantId="+e.tenantId+"&email="+e.email+"&fidoRegisterEnabled="+e.fidoRegisterEnabled}else{location.href=e.accessUrl}}else{if(e.returnCode==b._nOtherLoginNotConnected){alert(e.alertSuccess);var c=$("#phoneLoginConnectForm");c.find("input[name=accessUrl]").val(e.accessUrl);c.find("input[name=deviceId]").val(e.deviceId);c.find("input[name=serviceCode]").val(e.serviceCode);c.find("input[name=language]").val(e.language);c.find("input[name=phoneIntegrateType]").val("after_login_connect");c.attr("action",e.nextUrl).submit()}else{if(e.returnCode==b._nTwoStepLoginProgress){alert(e.alertSuccess);var d=$("#twoStepLogin");$(d).find("input[name=usage]").val(e.usage);$(d).find("input[name=redirectUrl]").val(e.redirectUrl);$(d).find("input[name=userIdNo]").val(e.userIdNo);$(d).find("input[name=domainId]").val(e.domainId);$(d).find("input[name=sessionKey]").val(e.sessionKey);$(d).attr("action",e.nextUrl).submit()}else{if(e.returnCode==b._nUserStatusStaged){alert(e.alertSuccess);window.location.href="/login/login?accessUrl="+$("#accessUrl").val()}else{if(e.returnCode==b._nPasswordSameMessage){alert(e.message)}else{if(e.returnCode==b._nReturnCodeRestrictedIp){alert(e.returnMessage);window.location.href="/login/login?accessUrl="+$("#accessUrl").val()}else{alert(Message.DEFAULT_ERROR_MESSAGE);location.href=e.accessUrl}}}}}}})},_changePasswordByToken:function(){var b=this;if(!this._ajaxReady){return}var a=$("#id").val();if(!this._validCheckPassword()){return}this._ajaxReady=false;$.post("/password/passwordChangeByToken",{encnm:"",encpw:$("#user_pwd").val(),token:$("#token").val(),id:a,passwordReuseDenyCount:b._oTenantConfig.passwordReuseDenyCount,tenantId:b._oTenantConfig.tenantId,fromAuthMail:b._fromAuthMail,redirectUrl:$("#redirectUrl").val(),fingerPrint:$("#fingerPrint").val(),fingerPrintDetail:$("#fingerPrintDetail").val()},function(d){b._ajaxReady=true;if(d.returnCode==b._nReturnCodeDomainChangeName){location.href=d.redirectUrl;return}alert(d.returnMessage);if(d.returnCode==0||d.returnCode==b._RESULT_CODE_TOKEN_EXPIRED){if(b._fromAuthMail==true){document.getElementById("frm1").submit()}else{location.href=$("#accessUrl").val()}}else{if(d.returnCode==b._nTwoStepLoginProgress){var c=$("#twoStepLogin");$(c).find("input[name=usage]").val(d.usage);$(c).find("input[name=userIdNo]").val(d.userIdNo);$(c).find("input[name=domainId]").val(d.domainId);$(c).find("input[name=sessionKey]").val(d.sessionKey);$(c).attr("action",d.nextUrl).submit()}}})},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,d){b._makeFingerPrintDetail(c,d)})},500)}}catch(a){console.warn(a)}},_makeFingerPrintDetail:function(a,f){$("#fingerPrint").val(a);var e="";for(var d in f){var g=f[d];if(g===null){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}$("#fingerPrintDetail").val(e)},_showWarningMessageForNewPassword:function(a){$("#newPasswordLayer").addClass("invalid");$("#pwErrorMessage").text(a).show()},_showWarningMessageForNewPassword2:function(a){$("#newPasswordLayer2").addClass("invalid");$("#pwErrorMessage2").text(a).show()},};PasswordGradeChecker=function(){this.init.apply(this,arguments)};PasswordGradeChecker.prototype={_ajaxReady:true,init:function(a){this._oTenantConfig=a},_doCheckSafetyLevel:function(){var b=this;var a=$("#user_pwd").val();if(a==""){this._showPasswordDefaultlayer("password");this._showPasswordDefaultlayer("passwordConfirm");return false}if(a.length>=b._oTenantConfig.passwordMinLength){this._ajaxReady=false;$.ajax({url:"/passwordGrade/getLevel",type:"POST",data:{password:a,tenantId:b._oTenantConfig.tenantId,domainId:b._oTenantConfig.domainId},success:function(c){b.passwordLevel=c.level;b.passwordSafetyReason=c.reason;b._ajaxReady=true;b._calculatePwResult()},error:function(){b._ajaxReady=true}})}else{b._ajaxReady=true;b.passwordLevel=1;b.passwordSafetyReason="";b._calculatePwResult()}},_calculatePwResult:function(){var c=this;var b=c.passwordLevel;var a=c._oTenantConfig.passwordDifficultyType;if(b==""||b<=1){if(this.passwordSafetyReason=="REPEAT_CHAR"){$("#pwErrorMessage").html(Message.PASSWORD_CHANGE_5).show();this._showPasswordErrorlayer("password");return false}if(a=="1"){$("#pwErrorMessage").html(Message.replaceParam(Message.PASSWORD_CHANGE_6,this._oTenantConfig.passwordMinLength)).show()}else{$("#pwErrorMessage").html(Message.replaceParam(Message.PASSWORD_CHANGE_7,this._oTenantConfig.passwordMinLength)).show()}this._showPasswordErrorlayer("password");return false}this._showPasswordCorrectlayer("password");return this._validCheckPasswordConfirm()},_showPasswordDefaultlayer:function(a){if(a=="password"){$("#newPasswordInput").find(".input_cover").removeClass("invalid");$("#pwErrorMessage").html("").hide();$("#newPasswordAlert").removeClass("checked")}else{if(a=="passwordConfirm"){$("#newPasswordInput").find(".input_cover").removeClass("invalid");$("#pwErrorMessage2").html("").hide();$("#newPasswordAlert2").removeClass("checked")}}},_showPasswordErrorlayer:function(a){if(a=="password"){$("#newPasswordLayer").addClass("invalid");$("#newPasswordAlert").removeClass("checked")}else{if(a=="passwordConfirm"){$("#newPasswordLayer2").addClass("invalid");$("#newPasswordAlert2").removeClass("checked")}}},_validCheckPasswordConfirm:function(){var a=$.trim($("#user_pwd").val());var b=$.trim($("#user_pwd2").val());if(b==""){this._showPasswordDefaultlayer("passwordConfirm");return false}if(a!=b){$("#pwErrorMessage2").html(Message.PASSWORD_CHANGE_3).show();this._showPasswordErrorlayer("passwordConfirm");return false}if(a==b&&b.length>this._MAX_PASSWORD_LENGTH){$("#pwErrorMessage2").html(Message.PASSWORD_CHANGE_4).show();this._showPasswordErrorlayer("passwordConfirm");return false}this._showPasswordCorrectlayer("passwordConfirm");return true},_validCheckPassword:function(){var a=$.trim($("#user_pwd").val());if(a==""){this._showPasswordDefaultlayer("password");this._showPasswordDefaultlayer("passwordConfirm");return false}var b=this._calculatePwResult();if(b==false){return false}return this._validCheckPasswordConfirm()},_showPasswordCorrectlayer:function(a){if(a=="password"){$("#newPasswordInput").find(".input_cover").removeClass("invalid");$("#newPasswordAlert").addClass("checked");$("#pwErrorMessage").hide()}else{if(a=="passwordConfirm"){$("#newPasswordInput").find(".input_cover").removeClass("invalid");$("#newPasswordAlert2").addClass("checked");$("#pwErrorMessage2").hide()}}},};var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}return Base64._utf8_decode(a)},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};CapsLockHelper=function(){this.init.apply(this,arguments)};CapsLockHelper.prototype={_oCurrentInstance:null,_welTextForm:null,_bCapsLockIsOn:false,EVENT_TYPE:{CAPSLOCK_ON:"capsLockOn",CAPSLOCK_OFF:"capsLockOff"},init:function(a){this._oCurrentInstance=$(this);this._welTextForm=$(a);this._bindEvents()},_bindEvents:function(){this._welTextForm.on({keydown:$.proxy(this._capsLockIsOff,this),keyup:$.proxy(this._capsLockIsOff,this),keypress:$.proxy(this._capsLockIsOn,this)})},on:function(){this._oCurrentInstance.on.apply(this._oCurrentInstance,arguments)},off:function(){this._oCurrentInstance.off.apply(this._oCurrentInstance,arguments)},getStatus:function(){return this._bCapsLockIsOn},setStatus:function(a){this._bCapsLockIsOn=a},_capsLockIsOn:function(a){var b=false;if(!this.getStatus()){b=a.shiftKey?a.shiftKey:!!(a.modifiers&4);if(((a.which>=65&&a.which<=90)&&!b)||((a.which>=97&&a.which<=122)&&b)){this.setStatus(true);this._oCurrentInstance.trigger(this.EVENT_TYPE.CAPSLOCK_ON,[a])}}},_capsLockIsOff:function(a){if(a.keyCode===20&&this.getStatus()){this.setStatus(false);this._oCurrentInstance.trigger(this.EVENT_TYPE.CAPSLOCK_OFF,[a])}}};(function(){var rsplit=function(string,regex){var result=regex.exec(string),retArr=new Array(),first_idx,last_idx,first_bit;while(result!=null){first_idx=result.index;last_idx=regex.lastIndex;if((first_idx)!=0){first_bit=string.substring(0,first_idx);retArr.push(string.substring(0,first_idx));string=string.slice(first_idx)}retArr.push(result[0]);string=string.slice(result[0].length);result=regex.exec(string)}if(!string==""){retArr.push(string)}return retArr},chop=function(string){return string.substr(0,string.length-1)},extend=function(d,s){for(var n in s){if(s.hasOwnProperty(n)){d[n]=s[n]}}};EJS=function(options){options=typeof options=="string"?{view:options}:options;this.set_options(options);if(options.precompiled){this.template={};this.template.process=options.precompiled;EJS.update(this.name,this);return}if(options.element){if(typeof options.element=="string"){var name=options.element;options.element=document.getElementById(options.element);if(options.element==null){throw name+"does not exist!"}}if(options.element.value){this.text=options.element.value}else{this.text=options.element.innerHTML}this.name=options.element.id;this.type="["}else{if(options.url){options.url=EJS.endExt(options.url,this.extMatch);this.name=this.name?this.name:options.url;var url=options.url;var template=EJS.get(this.name,this.cache);if(template){return template}if(template==EJS.INVALID_PATH){return null}try{this.text=EJS.request(url+(this.cache?"":"?"+Math.random()))}catch(e){}if(this.text==null){throw ({type:"EJS",message:"There is no template at "+url})}}}var template=new EJS.Compiler(this.text,this.type);template.compile(options,this.name);EJS.update(this.name,this);this.template=template};EJS.prototype={render:function(object,extra_helpers){object=object||{};this._extra_helpers=extra_helpers;var v=new EJS.Helpers(object,extra_helpers||{});return this.template.process.call(object,object,v)},update:function(element,options){if(typeof element=="string"){element=document.getElementById(element)}if(options==null){_template=this;return function(object){EJS.prototype.update.call(_template,element,object)}}if(typeof options=="string"){params={};params.url=options;_template=this;params.onComplete=function(request){var object=eval(request.responseText);EJS.prototype.update.call(_template,element,object)};EJS.ajax_request(params)}else{element.innerHTML=this.render(options)}},out:function(){return this.template.out},set_options:function(options){this.type=options.type||EJS.type;this.cache=options.cache!=null?options.cache:EJS.cache;this.text=options.text||null;this.name=options.name||null;this.ext=options.ext||EJS.ext;this.extMatch=new RegExp(this.ext.replace(/\./,"."))}};EJS.endExt=function(path,match){if(!path){return null}match.lastIndex=0;return path+(match.test(path)?"":this.ext)};EJS.Scanner=function(source,left,right){extend(this,{left_delimiter:left+"%",right_delimiter:"%"+right,double_left:left+"%%",double_right:"%%"+right,left_equal:left+"%=",left_comment:left+"%#"});this.SplitRegexp=left=="["?/(\[%%)|(%%\])|(\[%=)|(\[%#)|(\[%)|(%\]\n)|(%\])|(\n)/:new RegExp("("+this.double_left+")|(%%"+this.double_right+")|("+this.left_equal+")|("+this.left_comment+")|("+this.left_delimiter+")|("+this.right_delimiter+"\n)|("+this.right_delimiter+")|(\n)");this.source=source;this.stag=null;this.lines=0};EJS.Scanner.to_text=function(input){if(input==null||input===undefined){return""}if(input instanceof Date){return input.toDateString()}if(input.toString){return input.toString()}return""};EJS.Scanner.prototype={scan:function(block){scanline=this.scanline;regex=this.SplitRegexp;if(!this.source==""){var source_split=rsplit(this.source,/\n/);for(var i=0;i<source_split.length;i++){var item=source_split[i];this.scanline(item,regex,block)}}},scanline:function(line,regex,block){this.lines++;var line_split=rsplit(line,regex);for(var i=0;i<line_split.length;i++){var token=line_split[i];if(token!=null){try{block(token,this)}catch(e){throw {type:"EJS.Scanner",line:this.lines}}}}}};EJS.Buffer=function(pre_cmd,post_cmd){this.line=new Array();this.script="";this.pre_cmd=pre_cmd;this.post_cmd=post_cmd;for(var i=0;i<this.pre_cmd.length;i++){this.push(pre_cmd[i])}};EJS.Buffer.prototype={push:function(cmd){this.line.push(cmd)},cr:function(){this.script=this.script+this.line.join("; ");this.line=new Array();this.script=this.script+"\n"},close:function(){if(this.line.length>0){for(var i=0;i<this.post_cmd.length;i++){this.push(pre_cmd[i])}this.script=this.script+this.line.join("; ");line=null}}};EJS.Compiler=function(source,left){this.pre_cmd=["var ___ViewO = [];"];this.post_cmd=new Array();this.source=" ";if(source!=null){if(typeof source=="string"){source=source.replace(/\r\n/g,"\n");source=source.replace(/\r/g,"\n");this.source=source}else{if(source.innerHTML){this.source=source.innerHTML}}if(typeof this.source!="string"){this.source=""}}left=left||"<";var right=">";switch(left){case"[":right="]";break;case"<":break;default:throw left+" is not a supported deliminator";break}this.scanner=new EJS.Scanner(this.source,left,right);this.out=""};EJS.Compiler.prototype={compile:function(options,name){options=options||{};this.out="";var put_cmd="___ViewO.push(";var insert_cmd=put_cmd;var buff=new EJS.Buffer(this.pre_cmd,this.post_cmd);var content="";var clean=function(content){content=content.replace(/\\/g,"\\\\");content=content.replace(/\n/g,"\\n");content=content.replace(/"/g,'\\"');return content};this.scanner.scan(function(token,scanner){if(scanner.stag==null){switch(token){case"\n":content=content+"\n";buff.push(put_cmd+'"'+clean(content)+'");');buff.cr();content="";break;case scanner.left_delimiter:case scanner.left_equal:case scanner.left_comment:scanner.stag=token;if(content.length>0){buff.push(put_cmd+'"'+clean(content)+'")')}content="";break;case scanner.double_left:content=content+scanner.left_delimiter;break;default:content=content+token;break}}else{switch(token){case scanner.right_delimiter:switch(scanner.stag){case scanner.left_delimiter:if(content[content.length-1]=="\n"){content=chop(content);buff.push(content);buff.cr()}else{buff.push(content)}break;case scanner.left_equal:buff.push(insert_cmd+"(EJS.Scanner.to_text("+content+")))");break}scanner.stag=null;content="";break;case scanner.double_right:content=content+scanner.right_delimiter;break;default:content=content+token;break}}});if(content.length>0){buff.push(put_cmd+'"'+clean(content)+'")')}buff.close();this.out=buff.script+";";var to_be_evaled="/*"+name+"*/this.process = function(_CONTEXT,_VIEW) { try { with(_VIEW) { with (_CONTEXT) {"+this.out+" return ___ViewO.join('');}}}catch(e){e.lineNumber=null;throw e;}};";try{eval(to_be_evaled)}catch(e){if(typeof JSLINT!="undefined"){JSLINT(this.out);for(var i=0;i<JSLINT.errors.length;i++){var error=JSLINT.errors[i];if(error.reason!="Unnecessary semicolon."){error.line++;var e=new Error();e.lineNumber=error.line;e.message=error.reason;if(options.view){e.fileName=options.view}throw e}}}else{throw e}}}};EJS.config=function(options){EJS.cache=options.cache!=null?options.cache:EJS.cache;EJS.type=options.type!=null?options.type:EJS.type;EJS.ext=options.ext!=null?options.ext:EJS.ext;var templates_directory=EJS.templates_directory||{};EJS.templates_directory=templates_directory;EJS.get=function(path,cache){if(cache==false){return null}if(templates_directory[path]){return templates_directory[path]}return null};EJS.update=function(path,template){if(path==null){return}templates_directory[path]=template};EJS.INVALID_PATH=-1};EJS.config({cache:true,type:"<",ext:".ejs"});EJS.Helpers=function(data,extras){this._data=data;this._extras=extras;extend(this,extras)};EJS.Helpers.prototype={view:function(options,data,helpers){if(!helpers){helpers=this._extras}if(!data){data=this._data}return new EJS(options).render(data,helpers)},to_text:function(input,null_text){if(input==null||input===undefined){return null_text||""}if(input instanceof Date){return input.toDateString()}if(input.toString){return input.toString().replace(/\n/g,"<br />").replace(/''/g,"'")}return""}};EJS.newRequest=function(){var factories=[function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];for(var i=0;i<factories.length;i++){try{var request=factories[i]();if(request!=null){return request}}catch(e){continue}}};EJS.request=function(path){var request=new EJS.newRequest();request.open("GET",path,false);try{request.send(null)}catch(e){return null}if(request.status==404||request.status==2||(request.status==0&&request.responseText=="")){return null}return request.responseText};EJS.ajax_request=function(params){params.method=(params.method?params.method:"GET");var request=new EJS.newRequest();request.onreadystatechange=function(){if(request.readyState==4){if(request.status==200){params.onComplete(request)}else{params.onComplete(request)}}};request.open(params.method,params.url);request.send(null)}})();EJS.Helpers.prototype.date_tag=function(b,f,d){if(!(f instanceof Date)){f=new Date()}var c=["January","February","March","April","May","June","July","August","September","October","November","December"];var n=[],a=[],e=[];var k=f.getFullYear();var m=f.getMonth();var g=f.getDate();for(var h=k-15;h<k+15;h++){n.push({value:h,text:h})}for(var p=0;p<12;p++){a.push({value:(p),text:c[p]})}for(var l=0;l<31;l++){e.push({value:(l+1),text:(l+1)})}var i=this.select_tag(b+"[year]",k,n,{id:b+"[year]"});var o=this.select_tag(b+"[month]",m,a,{id:b+"[month]"});var j=this.select_tag(b+"[day]",g,e,{id:b+"[day]"});return i+o+j};EJS.Helpers.prototype.form_tag=function(b,a){a=a||{};a.action=b;if(a.multipart==true){a.method="post";a.enctype="multipart/form-data"}return this.start_tag_for("form",a)};EJS.Helpers.prototype.form_tag_end=function(){return this.tag_end("form")};EJS.Helpers.prototype.hidden_field_tag=function(a,b,c){return this.input_field_tag(a,b,"hidden",c)};EJS.Helpers.prototype.input_field_tag=function(a,b,c,d){d=d||{};d.id=d.id||a;d.value=b||"";d.type=c||"text";d.name=a;return this.single_tag_for("input",d)};EJS.Helpers.prototype.is_current_page=function(a){return(window.location.href==a||window.location.pathname==a?true:false)};EJS.Helpers.prototype.link_to=function(c,a,b){if(!c){var c="null"}if(!b){var b={}}if(b.confirm){b.onclick=' var ret_confirm = confirm("'+b.confirm+'"); if(!ret_confirm){ return false;} ';b.confirm=null}b.href=a;return this.start_tag_for("a",b)+c+this.tag_end("a")};EJS.Helpers.prototype.submit_link_to=function(c,a,b){if(!c){var c="null"}if(!b){var b={}}b.onclick=b.onclick||"";if(b.confirm){b.onclick=' var ret_confirm = confirm("'+b.confirm+'"); if(!ret_confirm){ return false;} ';b.confirm=null}b.value=c;b.type="submit";b.onclick=b.onclick+(a?this.url_for(a):"")+"return false;";return this.start_tag_for("input",b)};EJS.Helpers.prototype.link_to_if=function(b,f,a,d,e,c){return this.link_to_unless((b==false),f,a,d,e,c)};EJS.Helpers.prototype.link_to_unless=function(b,e,a,d,c){d=d||{};if(b){if(c&&typeof c=="function"){return c(e,a,d,c)}else{return e}}else{return this.link_to(e,a,d)}};EJS.Helpers.prototype.link_to_unless_current=function(d,a,c,b){c=c||{};return this.link_to_unless(this.is_current_page(a),d,a,c,b)};EJS.Helpers.prototype.password_field_tag=function(a,b,c){return this.input_field_tag(a,b,"password",c)};EJS.Helpers.prototype.select_tag=function(f,c,b,d){d=d||{};d.id=d.id||f;d.value=c;d.name=f;var h="";h+=this.start_tag_for("select",d);for(var e=0;e<b.length;e++){var g=b[e];var a={value:g.value};if(g.value==c){a.selected="selected"}h+=this.start_tag_for("option",a)+g.text+this.tag_end("option")}h+=this.tag_end("select");return h};EJS.Helpers.prototype.single_tag_for=function(a,b){return this.tag(a,b,"/>")};EJS.Helpers.prototype.start_tag_for=function(a,b){return this.tag(a,b)};EJS.Helpers.prototype.submit_tag=function(a,b){b=b||{};b.type=b.type||"submit";b.value=a||"Submit";return this.single_tag_for("input",b)};EJS.Helpers.prototype.tag=function(e,c,d){if(!d){var d=">"}var f=" ";for(var a in c){if(c[a]!=null){var b=c[a].toString()}else{var b=""}if(a=="Class"){a="class"}if(b.indexOf("'")!=-1){f+=a+'="'+b+'" '}else{f+=a+"='"+b+"' "}}return"<"+e+f+d};EJS.Helpers.prototype.tag_end=function(a){return"</"+a+">"};EJS.Helpers.prototype.text_area_tag=function(a,b,c){c=c||{};c.id=c.id||a;c.name=c.name||a;b=b||"";if(c.size){c.cols=c.size.split("x")[0];c.rows=c.size.split("x")[1];delete c.size}c.cols=c.cols||50;c.rows=c.rows||4;return this.start_tag_for("textarea",c)+b+this.tag_end("textarea")};EJS.Helpers.prototype.text_tag=EJS.Helpers.prototype.text_area_tag;EJS.Helpers.prototype.text_field_tag=function(a,b,c){return this.input_field_tag(a,b,"text",c)};EJS.Helpers.prototype.url_for=function(a){return'window.location="'+a+'";'};EJS.Helpers.prototype.img_tag=function(c,b,a){a=a||{};a.src=c;a.alt=b;return this.single_tag_for("img",a)};var oNweCommonUtils={getInternetExplorerVersion:function(){var c=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){c=parseFloat(RegExp.$1)}}return c},attachEnterKeyEvent:function(a,c){var b=13;a.keydown(function(d){if(d.keyCode==b){c()}})},isChromeOrFirefox:function(){var a=navigator.userAgent.toLowerCase();if(-1!=a.indexOf("chrome")){return true}else{if(-1!=a.indexOf("firefox")){return true}}return false},isMsBrowser:function(){var a=navigator.userAgent.toLowerCase();return(navigator.appName=="Netscape"&&navigator.userAgent.search("Trident")>-1)||(a.indexOf("msie")>-1)||a.indexOf("edge/")>-1},preventEnterKey:function(a){if(a.keyCode==13){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}}},preventEventBubbling:function(a){$(a).keydown(function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}});$(a).click(function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}});$(a).dblclick(function(b){b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}})},attachLabelEvent:function(a){if(a==null){return}var b=a.attr("id");if(a.val().length>0){a.parent().find('label[for="'+b+'"]').addClass("blind")}else{a.parent().find('label[for="'+b+'"]').removeClass("blind")}a.focus(function(c){a.parent().find('label[for="'+b+'"]').addClass("blind")}).focusout(function(){if(a.val().length==0){a.parent().find('label[for="'+b+'"]').removeClass("blind")}})},attachAllLabelEvent:function(){oSelf=this;$('input[type="text"]').each(function(){oSelf.attachLabelEvent($(this))});$('input[type="password"]').each(function(){oSelf.attachLabelEvent($(this))});$('input[type="email"]').each(function(){oSelf.attachLabelEvent($(this))})},setTwoStepValues:function(d){var a=document.getElementById("nweAuthUrl").value;var c=document.getElementById("msgToken").value;if(d.origin!==a||d.data.msgToken!==c){return}var b=$("#twoStepLogin",window.document);$(b).find("input[name=usage]").val(data.usage);$(b).find("input[name=redirectUrl]").val(data.redirectUrl);$(b).find("input[name=userIdNo]").val(data.userIdNo);$(b).find("input[name=domainId]").val(data.domainId);$(b).find("input[name=sessionKey]").val(data.sessionKey);$(b).attr("action",data.nextUrl).submit()},isContainSpecialChar:function(g,f){if(f==null||f==""){return false}var e=["`","~","!","@","#","$","%","^","&","*","(",")","-","_","=","+","\\","|","{","}",";",":",'"',"'","<",">",",",".","?","/","[","]"];var h=f.split("");for(var d=0;d<h.length;d++){for(var c=0;c<e.length;c++){if(h[d]==e[c]){e.splice(c,1)}}}var a="";$(e).each(function(i,j){a+="\\"+j});var b=new RegExp("["+a+"]+","gi");return b.test(g)},setDelay:function(a){try{setTimeout(function(){},a)}catch(b){console.warn(b)}},getQueryParam:function(b){var a=location.search.substr(location.search.indexOf("?")+1);var d="";a=a.split("&");for(var c=0;c<a.length;c++){temp=a[c].split("=");if([temp[0]]==b){d=temp[1]}}return d},getQueryParamOrDefault:function(b,a){oSelf=this;var c=oSelf.getQueryParam(b);return c?c:a}};PasswordSafetyModel={html:{tooltip:'<div id="_safetyTooltip" class="tooltip" style="position:absolute;display:none;">',capslock:'<span class="ex2">'+Message.PW_EXPIRED_16+"</span>"},level1:{title:Message.PW_EXPIRED_10_1,levelClass:"",level:Message.PW_EXPIRED_10_2,message:Message.PW_EXPIRED_11},level2:{title:Message.PW_EXPIRED_12,levelClass:"level1",level:Message.PW_EXPIRED_12_1,message:Message.PW_EXPIRED_12_4},level3:{title:Message.PW_EXPIRED_12,levelClass:"level2",level:Message.PW_EXPIRED_12_2,message:Message.PW_EXPIRED_13},level4:{title:Message.PW_EXPIRED_12,levelClass:"level3",level:Message.PW_EXPIRED_12_3,message:Message.PW_EXPIRED_14}};PasswordSafetyTooltip=function(){this.init.apply(this,arguments)};PasswordSafetyTooltip.prototype={SAFETY_LEVEL_1:1,init:function(b,a){this._sSelector=b||"";this._sTooptipSelector=a.tooltipSelector;this._sLevelUrl=a.levelUrl||"";this._aTemplateUrl=a.templateUrl||"";this._tenantId=a.tenantId||"";this._domainId=a.domainId||"";this.PASSWORD_MIN_LENGTH=a.minLength||8;this.reason="";this._htStringTable=a.passwordSafetyModel||PasswordSafetyModel;if(a.passwordDifficultyType==1){this._htStringTable.level1.message=Message.replaceParam(Message.PW_EXPIRED_11,this.PASSWORD_MIN_LENGTH)}else{this._htStringTable.level1.message=Message.replaceParam(Message.PW_EXPIRED_11_2,this.PASSWORD_MIN_LENGTH)}this._sHidPasswordSecurityLevelSelector=a.hidPasswordSecurityLevelSelector;this._initHelper();this._assignElement();this._bindEvents();this._assignTemplate()},_initHelper:function(){this._oCapsLockHelper=new CapsLockHelper(this._sSelector)},_assignElement:function(){this._welTextInput=$(this._sSelector);this._welTooltip=$(this._sTooptipSelector);this._welCapsLock=$(this._htStringTable.html.capslock);this._welSafetyLevelInput=$(this._sHidPasswordSecurityLevelSelector)},_bindEvents:function(){var a=this;this._welTextInput.on({input:function(b){a._doCheckSafetyLevel()},focus:$.proxy(function(){if($.trim(this._welTextInput.val()).length>0){this._welTooltip.show()}},this),blur:$.proxy(function(){this._welTooltip.hide()},this)})},_doCheckSafetyLevel:function(){var b=this;var a=b._welTextInput.val();if(a.length>=this.PASSWORD_MIN_LENGTH){$.post(this._sLevelUrl,{password:a,tenantId:b._tenantId,domainId:b._domainId},function(c){b._showTooltip(c.level);b.reason=c.reason})}else{b._showTooltip(b.SAFETY_LEVEL_1);b.reason=""}},_showTooltip:function(a){this._welTooltip.show();this._welTooltip.html(this._tmplTooltip.render(this._getPwdSafetyDataMap(a)));this._welSafetyLevelInput.val(a)},_getPwdSafetyDataMap:function(b){var a={};if(this._oCapsLockHelper.getStatus()){a=this._htStringTable["level"+b];a.capslock=this._welCapsLock.get(0).outerHTML}else{a=this._htStringTable["level"+b];a.capslock=""}return a},_assignTemplate:function(){this._tmplTooltip=new EJS({url:this._aTemplateUrl})},isRepeateChar:function(){return this.reason=="REPEAT_CHAR"}};(function(a,c,b){if(typeof window.define==="function"&&window.define.amd){window.define(b)}else{if(typeof module!=="undefined"&&module.exports){module.exports=b()}else{if(c.exports){c.exports=b()}else{c[a]=b()}}}})("Fingerprint2",this,function(){var Fingerprint2=function(options){if(!(this instanceof Fingerprint2)){return new Fingerprint2(options)}var defaultOptions={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:true,sortPluginsFor:[/palemoon/i],excludeDoNotTrack:true,excludePixelRatio:true};this.options=this.extend(options,defaultOptions);this.nativeForEach=Array.prototype.forEach;this.nativeMap=Array.prototype.map};Fingerprint2.prototype={extend:function(source,target){if(source==null){return target}for(var k in source){if(source[k]!=null&&target[k]!==source[k]){target[k]=source[k]}}return target},get:function(done){var that=this;var keys={data:[],addPreprocessedComponent:function(pair){var componentValue=pair.value;if(typeof that.options.preprocessor==="function"){componentValue=that.options.preprocessor(pair.key,componentValue)}keys.data.push({key:pair.key,value:componentValue})}};keys=this.userAgentKey(keys);keys=this.languageKey(keys);keys=this.colorDepthKey(keys);keys=this.deviceMemoryKey(keys);keys=this.hardwareConcurrencyKey(keys);keys=this.screenResolutionKey(keys);keys=this.timezoneOffsetKey(keys);keys=this.sessionStorageKey(keys);keys=this.localStorageKey(keys);keys=this.platformKey(keys);keys=this.canvasKey(keys);keys=this.webglKey(keys);keys=this.webglVendorAndRendererKey(keys);keys=this.hasLiedLanguagesKey(keys);keys=this.hasLiedResolutionKey(keys);keys=this.hasLiedOsKey(keys);keys=this.hasLiedBrowserKey(keys);keys=this.customEntropyFunction(keys);this.fontsKey(keys,function(newKeys){var values=[];that.each(newKeys.data,function(pair){var value=pair.value;if(value&&typeof value.join==="function"){value=value.join(";")}values.push(value)});var murmur=that.x64hash128(values.join("~~~"),31);return done(murmur,newKeys.data)})},customEntropyFunction:function(keys){if(typeof this.options.customFunction==="function"){keys.addPreprocessedComponent({key:"custom",value:this.options.customFunction()})}return keys},userAgentKey:function(keys){if(!this.options.excludeUserAgent){keys.addPreprocessedComponent({key:"user_agent",value:this.getUserAgent()})}return keys},getUserAgent:function(){return navigator.userAgent},languageKey:function(keys){if(!this.options.excludeLanguage){keys.addPreprocessedComponent({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||""})}return keys},colorDepthKey:function(keys){if(!this.options.excludeColorDepth){keys.addPreprocessedComponent({key:"color_depth",value:window.screen.colorDepth||-1})}return keys},deviceMemoryKey:function(keys){if(!this.options.excludeDeviceMemory){keys.addPreprocessedComponent({key:"device_memory",value:this.getDeviceMemory()})}return keys},getDeviceMemory:function(){return navigator.deviceMemory||-1},screenResolutionKey:function(keys){if(!this.options.excludeScreenResolution){return this.getScreenResolution(keys)}return keys},getScreenResolution:function(keys){var resolution;if(this.options.detectScreenOrientation){resolution=(window.screen.height>window.screen.width)?[window.screen.height,window.screen.width]:[window.screen.width,window.screen.height]}else{resolution=[window.screen.width,window.screen.height]}keys.addPreprocessedComponent({key:"resolution",value:resolution});return keys},timezoneOffsetKey:function(keys){if(!this.options.excludeTimezoneOffset){keys.addPreprocessedComponent({key:"timezone_offset",value:new Date().getTimezoneOffset()})}return keys},sessionStorageKey:function(keys){if(!this.options.excludeSessionStorage&&this.hasSessionStorage()){keys.addPreprocessedComponent({key:"session_storage",value:1})}return keys},localStorageKey:function(keys){if(!this.options.excludeSessionStorage&&this.hasLocalStorage()){keys.addPreprocessedComponent({key:"local_storage",value:1})}return keys},platformKey:function(keys){if(!this.options.excludePlatform){keys.addPreprocessedComponent({key:"navigator_platform",value:this.getNavigatorPlatform()})}return keys},canvasKey:function(keys){if(!this.options.excludeCanvas&&this.isCanvasSupported()){keys.addPreprocessedComponent({key:"canvas",value:this.getCanvasFp()})}return keys},webglKey:function(keys){if(!this.options.excludeWebGL&&this.isWebGlSupported()){keys.addPreprocessedComponent({key:"webgl",value:this.getWebglFp()})}return keys},webglVendorAndRendererKey:function(keys){if(!this.options.excludeWebGLVendorAndRenderer&&this.isWebGlSupported()){keys.addPreprocessedComponent({key:"webgl_vendor",value:this.getWebglVendorAndRenderer()})}return keys},hasLiedLanguagesKey:function(keys){if(!this.options.excludeHasLiedLanguages){keys.addPreprocessedComponent({key:"has_lied_languages",value:this.getHasLiedLanguages()})}return keys},hasLiedResolutionKey:function(keys){if(!this.options.excludeHasLiedResolution){keys.addPreprocessedComponent({key:"has_lied_resolution",value:this.getHasLiedResolution()})}return keys},hasLiedOsKey:function(keys){if(!this.options.excludeHasLiedOs){keys.addPreprocessedComponent({key:"has_lied_os",value:this.getHasLiedOs()})}return keys},hasLiedBrowserKey:function(keys){if(!this.options.excludeHasLiedBrowser){keys.addPreprocessedComponent({key:"has_lied_browser",value:this.getHasLiedBrowser()})}return keys},fontsKey:function(keys,done){return done(keys)},hardwareConcurrencyKey:function(keys){if(!this.options.excludeHardwareConcurrency){keys.addPreprocessedComponent({key:"hardware_concurrency",value:this.getHardwareConcurrency()})}return keys},hasSessionStorage:function(){try{return !!window.sessionStorage}catch(e){return true}},hasLocalStorage:function(){try{return !!window.localStorage}catch(e){return true}},getHardwareConcurrency:function(){if(navigator.hardwareConcurrency){return navigator.hardwareConcurrency}return"unknown"},getNavigatorPlatform:function(){if(navigator.platform){return navigator.platform}else{return"unknown"}},getCanvasFp:function(){var result=[];var canvas=document.createElement("canvas");canvas.width=2000;canvas.height=200;canvas.style.display="inline";var ctx=canvas.getContext("2d");ctx.rect(0,0,10,10);ctx.rect(2,2,6,6);result.push("canvas winding:"+((ctx.isPointInPath(5,5,"evenodd")===false)?"yes":"no"));ctx.textBaseline="alphabetic";ctx.fillStyle="#f60";ctx.fillRect(125,1,62,20);ctx.fillStyle="#069";if(this.options.dontUseFakeFontInCanvas){ctx.font="11pt Arial"}else{ctx.font="11pt no-real-font-123"}ctx.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15);ctx.fillStyle="rgba(102, 204, 0, 0.2)";ctx.font="18pt Arial";ctx.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45);ctx.globalCompositeOperation="multiply";ctx.fillStyle="rgb(255,0,255)";ctx.beginPath();ctx.arc(50,50,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(0,255,255)";ctx.beginPath();ctx.arc(100,50,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(255,255,0)";ctx.beginPath();ctx.arc(75,100,50,0,Math.PI*2,true);ctx.closePath();ctx.fill();ctx.fillStyle="rgb(255,0,255)";ctx.arc(75,75,75,0,Math.PI*2,true);ctx.arc(75,75,25,0,Math.PI*2,true);ctx.fill("evenodd");if(canvas.toDataURL){result.push("canvas fp:"+canvas.toDataURL())}return result.join("~")},getWebglFp:function(){var gl;var fa2s=function(fa){gl.clearColor(0,0,0,1);gl.enable(gl.DEPTH_TEST);gl.depthFunc(gl.LEQUAL);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);return"["+fa[0]+", "+fa[1]+"]"};var maxAnisotropy=function(gl){var ext=gl.getExtension("EXT_texture_filter_anisotropic")||gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||gl.getExtension("MOZ_EXT_texture_filter_anisotropic");if(ext){var anisotropy=gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT);if(anisotropy===0){anisotropy=2}return anisotropy}else{return null}};gl=this.getWebglCanvas();if(!gl){return null}var result=[];var vShaderTemplate="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}";var fShaderTemplate="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}";var vertexPosBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,vertexPosBuffer);var vertices=new Float32Array([-0.2,-0.9,0,0.4,-0.26,0,0,0.732134444,0]);gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW);vertexPosBuffer.itemSize=3;vertexPosBuffer.numItems=3;var program=gl.createProgram();var vshader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vshader,vShaderTemplate);gl.compileShader(vshader);var fshader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fshader,fShaderTemplate);gl.compileShader(fshader);gl.attachShader(program,vshader);gl.attachShader(program,fshader);gl.linkProgram(program);gl.useProgram(program);program.vertexPosAttrib=gl.getAttribLocation(program,"attrVertex");program.offsetUniform=gl.getUniformLocation(program,"uniformOffset");gl.enableVertexAttribArray(program.vertexPosArray);gl.vertexAttribPointer(program.vertexPosAttrib,vertexPosBuffer.itemSize,gl.FLOAT,!1,0,0);gl.uniform2f(program.offsetUniform,1,1);gl.drawArrays(gl.TRIANGLE_STRIP,0,vertexPosBuffer.numItems);try{result.push(gl.canvas.toDataURL())}catch(e){console.warn(e)}result.push("extensions:"+(gl.getSupportedExtensions()||[]).join(";"));result.push("webgl aliased line width range:"+fa2s(gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE)));result.push("webgl aliased point size range:"+fa2s(gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE)));result.push("webgl alpha bits:"+gl.getParameter(gl.ALPHA_BITS));result.push("webgl antialiasing:"+(gl.getContextAttributes().antialias?"yes":"no"));result.push("webgl blue bits:"+gl.getParameter(gl.BLUE_BITS));result.push("webgl depth bits:"+gl.getParameter(gl.DEPTH_BITS));result.push("webgl green bits:"+gl.getParameter(gl.GREEN_BITS));result.push("webgl max anisotropy:"+maxAnisotropy(gl));result.push("webgl max combined texture image units:"+gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS));result.push("webgl max cube map texture size:"+gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE));result.push("webgl max fragment uniform vectors:"+gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS));result.push("webgl max render buffer size:"+gl.getParameter(gl.MAX_RENDERBUFFER_SIZE));result.push("webgl max texture image units:"+gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));result.push("webgl max texture size:"+gl.getParameter(gl.MAX_TEXTURE_SIZE));result.push("webgl max varying vectors:"+gl.getParameter(gl.MAX_VARYING_VECTORS));result.push("webgl max vertex attribs:"+gl.getParameter(gl.MAX_VERTEX_ATTRIBS));result.push("webgl max vertex texture image units:"+gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS));result.push("webgl max vertex uniform vectors:"+gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS));result.push("webgl max viewport dims:"+fa2s(gl.getParameter(gl.MAX_VIEWPORT_DIMS)));result.push("webgl red bits:"+gl.getParameter(gl.RED_BITS));result.push("webgl renderer:"+gl.getParameter(gl.RENDERER));result.push("webgl shading language version:"+gl.getParameter(gl.SHADING_LANGUAGE_VERSION));result.push("webgl stencil bits:"+gl.getParameter(gl.STENCIL_BITS));result.push("webgl vendor:"+gl.getParameter(gl.VENDOR));result.push("webgl version:"+gl.getParameter(gl.VERSION));try{var extensionDebugRendererInfo=gl.getExtension("WEBGL_debug_renderer_info");if(extensionDebugRendererInfo){result.push("webgl unmasked vendor:"+gl.getParameter(extensionDebugRendererInfo.UNMASKED_VENDOR_WEBGL));result.push("webgl unmasked renderer:"+gl.getParameter(extensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL))}}catch(e){console.warn(e)}if(!gl.getShaderPrecisionFormat){return result.join("~")}var that=this;that.each(["FLOAT","INT"],function(numType){that.each(["VERTEX","FRAGMENT"],function(shader){that.each(["HIGH","MEDIUM","LOW"],function(numSize){that.each(["precision","rangeMin","rangeMax"],function(key){var format=gl.getShaderPrecisionFormat(gl[shader+"_SHADER"],gl[numSize+"_"+numType])[key];if(key!=="precision"){key="precision "+key}var line=["webgl ",shader.toLowerCase()," shader ",numSize.toLowerCase()," ",numType.toLowerCase()," ",key,":",format];result.push(line.join(""))})})})});return result.join("~")},getWebglVendorAndRenderer:function(){try{var glContext=this.getWebglCanvas();var extensionDebugRendererInfo=glContext.getExtension("WEBGL_debug_renderer_info");return glContext.getParameter(extensionDebugRendererInfo.UNMASKED_VENDOR_WEBGL)+"~"+glContext.getParameter(extensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL)}catch(e){return null}},getHasLiedLanguages:function(){if(typeof navigator.languages!=="undefined"){try{var firstLanguages=navigator.languages[0].substr(0,2);if(firstLanguages!==navigator.language.substr(0,2)){return true}}catch(err){return true}}return false},getHasLiedResolution:function(){if(window.screen.width<window.screen.availWidth){return true}if(window.screen.height<window.screen.availHeight){return true}return false},getHasLiedOs:function(){var userAgent=navigator.userAgent.toLowerCase();var oscpu=navigator.oscpu;var platform=navigator.platform.toLowerCase();var os;if(userAgent.indexOf("windows phone")>=0){os="Windows Phone"}else{if(userAgent.indexOf("win")>=0){os="Windows"}else{if(userAgent.indexOf("android")>=0){os="Android"}else{if(userAgent.indexOf("linux")>=0){os="Linux"}else{if(userAgent.indexOf("iphone")>=0||userAgent.indexOf("ipad")>=0){os="iOS"}else{if(userAgent.indexOf("mac")>=0){os="Mac"}else{os="Other"}}}}}}var mobileDevice;if(("ontouchstart" in window)||(navigator.maxTouchPoints>0)||(navigator.msMaxTouchPoints>0)){mobileDevice=true}else{mobileDevice=false}if(mobileDevice&&os!=="Windows Phone"&&os!=="Android"&&os!=="iOS"&&os!=="Other"){return true}if(typeof oscpu!=="undefined"){oscpu=oscpu.toLowerCase();if(oscpu.indexOf("win")>=0&&os!=="Windows"&&os!=="Windows Phone"){return true}else{if(oscpu.indexOf("linux")>=0&&os!=="Linux"&&os!=="Android"){return true}else{if(oscpu.indexOf("mac")>=0&&os!=="Mac"&&os!=="iOS"){return true}else{if((oscpu.indexOf("win")===-1&&oscpu.indexOf("linux")===-1&&oscpu.indexOf("mac")===-1)!==(os==="Other")){return true}}}}}if(platform.indexOf("win")>=0&&os!=="Windows"&&os!=="Windows Phone"){return true}else{if((platform.indexOf("linux")>=0||platform.indexOf("android")>=0||platform.indexOf("pike")>=0)&&os!=="Linux"&&os!=="Android"){return true}else{if((platform.indexOf("mac")>=0||platform.indexOf("ipad")>=0||platform.indexOf("ipod")>=0||platform.indexOf("iphone")>=0)&&os!=="Mac"&&os!=="iOS"){return true}else{if((platform.indexOf("win")===-1&&platform.indexOf("linux")===-1&&platform.indexOf("mac")===-1)!==(os==="Other")){return true}}}}if(typeof navigator.plugins==="undefined"&&os!=="Windows"&&os!=="Windows Phone"){return true}return false},getHasLiedBrowser:function(){var userAgent=navigator.userAgent.toLowerCase();var productSub=navigator.productSub;var browser;if(userAgent.indexOf("firefox")>=0){browser="Firefox"}else{if(userAgent.indexOf("opera")>=0||userAgent.indexOf("opr")>=0){browser="Opera"}else{if(userAgent.indexOf("chrome")>=0){browser="Chrome"}else{if(userAgent.indexOf("safari")>=0){browser="Safari"}else{if(userAgent.indexOf("trident")>=0){browser="Internet Explorer"}else{browser="Other"}}}}}if((browser==="Chrome"||browser==="Safari"||browser==="Opera")&&productSub!=="20030107"){return true}var tempRes=eval.toString().length;if(tempRes===37&&browser!=="Safari"&&browser!=="Firefox"&&browser!=="Other"){return true}else{if(tempRes===39&&browser!=="Internet Explorer"&&browser!=="Other"){return true}else{if(tempRes===33&&browser!=="Chrome"&&browser!=="Opera"&&browser!=="Other"){return true}}}var errFirefox;try{throw"a"}catch(err){try{err.toSource();errFirefox=true}catch(errOfErr){errFirefox=false}}if(errFirefox&&browser!=="Firefox"&&browser!=="Other"){return true}return false},isCanvasSupported:function(){var elem=document.createElement("canvas");return !!(elem.getContext&&elem.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported()){return false}var glContext=this.getWebglCanvas();return !!window.WebGLRenderingContext&&!!glContext},isIE:function(){if(navigator.appName==="Microsoft Internet Explorer"){return true}else{if(navigator.appName==="Netscape"&&/Trident/.test(navigator.userAgent)){return true}}return false},hasSwfObjectLoaded:function(){return typeof window.swfobject!=="undefined"},hasMinFlashInstalled:function(){return window.swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var node=document.createElement("div");node.setAttribute("id",this.options.swfContainerId);document.body.appendChild(node)},loadSwfAndDetectFonts:function(done){var hiddenCallback="___fp_swf_loaded";window[hiddenCallback]=function(fonts){done(fonts)};var id=this.options.swfContainerId;this.addFlashDivNode();var flashvars={onReady:hiddenCallback};var flashparams={allowScriptAccess:"always",menu:"false"};window.swfobject.embedSWF(this.options.swfPath,id,"1","1","9.0.0",false,flashvars,flashparams,{})},getWebglCanvas:function(){var canvas=document.createElement("canvas");var gl=null;try{gl=canvas.getContext("webgl")||canvas.getContext("experimental-webgl")}catch(e){console.warn(e)}if(!gl){gl=null}return gl},each:function(obj,iterator,context){if(obj===null){return}if(this.nativeForEach&&obj.forEach===this.nativeForEach){obj.forEach(iterator,context)}else{if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)==={}){return}}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)==={}){return}}}}}},map:function(obj,iterator,context){var results=[];if(obj==null){return results}if(this.nativeMap&&obj.map===this.nativeMap){return obj.map(iterator,context)}this.each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list)});return results},x64Add:function(m,n){m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];n=[n[0]>>>16,n[0]&65535,n[1]>>>16,n[1]&65535];var o=[0,0,0,0];o[3]+=m[3]+n[3];o[2]+=o[3]>>>16;o[3]&=65535;o[2]+=m[2]+n[2];o[1]+=o[2]>>>16;o[2]&=65535;o[1]+=m[1]+n[1];o[0]+=o[1]>>>16;o[1]&=65535;o[0]+=m[0]+n[0];o[0]&=65535;return[(o[0]<<16)|o[1],(o[2]<<16)|o[3]]},x64Multiply:function(m,n){m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];n=[n[0]>>>16,n[0]&65535,n[1]>>>16,n[1]&65535];var o=[0,0,0,0];o[3]+=m[3]*n[3];o[2]+=o[3]>>>16;o[3]&=65535;o[2]+=m[2]*n[3];o[1]+=o[2]>>>16;o[2]&=65535;o[2]+=m[3]*n[2];o[1]+=o[2]>>>16;o[2]&=65535;o[1]+=m[1]*n[3];o[0]+=o[1]>>>16;o[1]&=65535;o[1]+=m[2]*n[2];o[0]+=o[1]>>>16;o[1]&=65535;o[1]+=m[3]*n[1];o[0]+=o[1]>>>16;o[1]&=65535;o[0]+=(m[0]*n[3])+(m[1]*n[2])+(m[2]*n[1])+(m[3]*n[0]);o[0]&=65535;return[(o[0]<<16)|o[1],(o[2]<<16)|o[3]]},x64Rotl:function(m,n){n%=64;if(n===32){return[m[1],m[0]]}else{if(n<32){return[(m[0]<<n)|(m[1]>>>(32-n)),(m[1]<<n)|(m[0]>>>(32-n))]}else{n-=32;return[(m[1]<<n)|(m[0]>>>(32-n)),(m[0]<<n)|(m[1]>>>(32-n))]}}},x64LeftShift:function(m,n){n%=64;if(n===0){return m}else{if(n<32){return[(m[0]<<n)|(m[1]>>>(32-n)),m[1]<<n]}else{return[m[1]<<(n-32),0]}}},x64Xor:function(m,n){return[m[0]^n[0],m[1]^n[1]]},x64Fmix:function(h){h=this.x64Xor(h,[0,h[0]>>>1]);h=this.x64Multiply(h,[4283543511,3981806797]);h=this.x64Xor(h,[0,h[0]>>>1]);h=this.x64Multiply(h,[3301882366,444984403]);h=this.x64Xor(h,[0,h[0]>>>1]);return h},x64hash128:function(key,seed){key=key||"";seed=seed||0;var remainder=key.length%16;var bytes=key.length-remainder;var h1=[0,seed];var h2=[0,seed];var k1=[0,0];var k2=[0,0];var c1=[2277735313,289559509];var c2=[1291169091,658871167];for(var i=0;i<bytes;i=i+16){k1=[((key.charCodeAt(i+4)&255))|((key.charCodeAt(i+5)&255)<<8)|((key.charCodeAt(i+6)&255)<<16)|((key.charCodeAt(i+7)&255)<<24),((key.charCodeAt(i)&255))|((key.charCodeAt(i+1)&255)<<8)|((key.charCodeAt(i+2)&255)<<16)|((key.charCodeAt(i+3)&255)<<24)];k2=[((key.charCodeAt(i+12)&255))|((key.charCodeAt(i+13)&255)<<8)|((key.charCodeAt(i+14)&255)<<16)|((key.charCodeAt(i+15)&255)<<24),((key.charCodeAt(i+8)&255))|((key.charCodeAt(i+9)&255)<<8)|((key.charCodeAt(i+10)&255)<<16)|((key.charCodeAt(i+11)&255)<<24)];k1=this.x64Multiply(k1,c1);k1=this.x64Rotl(k1,31);k1=this.x64Multiply(k1,c2);h1=this.x64Xor(h1,k1);h1=this.x64Rotl(h1,27);h1=this.x64Add(h1,h2);h1=this.x64Add(this.x64Multiply(h1,[0,5]),[0,1390208809]);k2=this.x64Multiply(k2,c2);k2=this.x64Rotl(k2,33);k2=this.x64Multiply(k2,c1);h2=this.x64Xor(h2,k2);h2=this.x64Rotl(h2,31);h2=this.x64Add(h2,h1);h2=this.x64Add(this.x64Multiply(h2,[0,5]),[0,944331445])}k1=[0,0];k2=[0,0];switch(remainder){case 15:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+14)],48));case 14:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+13)],40));case 13:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+12)],32));case 12:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+11)],24));case 11:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+10)],16));case 10:k2=this.x64Xor(k2,this.x64LeftShift([0,key.charCodeAt(i+9)],8));case 9:k2=this.x64Xor(k2,[0,key.charCodeAt(i+8)]);k2=this.x64Multiply(k2,c2);k2=this.x64Rotl(k2,33);k2=this.x64Multiply(k2,c1);h2=this.x64Xor(h2,k2);case 8:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+7)],56));case 7:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+6)],48));case 6:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+5)],40));case 5:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+4)],32));case 4:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+3)],24));case 3:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+2)],16));case 2:k1=this.x64Xor(k1,this.x64LeftShift([0,key.charCodeAt(i+1)],8));case 1:k1=this.x64Xor(k1,[0,key.charCodeAt(i)]);k1=this.x64Multiply(k1,c1);k1=this.x64Rotl(k1,31);k1=this.x64Multiply(k1,c2);h1=this.x64Xor(h1,k1)}h1=this.x64Xor(h1,[0,key.length]);h2=this.x64Xor(h2,[0,key.length]);h1=this.x64Add(h1,h2);h2=this.x64Add(h2,h1);h1=this.x64Fmix(h1);h2=this.x64Fmix(h2);h1=this.x64Add(h1,h2);h2=this.x64Add(h2,h1);return("00000000"+(h1[0]>>>0).toString(16)).slice(-8)+("00000000"+(h1[1]>>>0).toString(16)).slice(-8)+("00000000"+(h2[0]>>>0).toString(16)).slice(-8)+("00000000"+(h2[1]>>>0).toString(16)).slice(-8)}};Fingerprint2.VERSION="1.8.0";return Fingerprint2});DnsAdminInfo=function(){this.init.apply(this,arguments)};DnsAdminInfo.prototype={_ENTER_KEY_CODE:13,_ajaxReady:true,_retryCount:0,_nNotFoundDomain:1,_nNReturnCodeWrongIDC:2,_nMultiDomain:3,_nUsingSSOOrGroupName:4,_nUsingInternalEmail:5,_nNotValidEmail:6,init:function(){this._attachEvent();$("#_mailDomain").val("");$("#_privateEmail").val("");setTimeout(function(){$("#_mailDomain").focus()},100)},_attachEvent:function(){var a=this;$("#_mailDomain").blur(function(){a._checkMailDomain()});$("#_privateEmail").blur(function(){a._checkEmail()});$("#_addDnsAdminInfoBtn").click(function(){a._addDnsAdminInfo()});$("#_txtCopyBtn").click(function(){$("#_txtValue").select();var b=document.execCommand("copy")});$("#_cNameValueCopyBtn").click(function(){$("#_cNameValue").select();var b=document.execCommand("copy")})},_inputValidCheck:function(){var a=this._inputDomainValidCheck();if(a==false){return false}return this._inputEmailValidCheck()},_inputDomainValidCheck:function(){var a=$("#_mailDomain");if($.trim($(a).val())==""){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_1);setTimeout(function(){$(a).focus()},100);return false}return true},_inputEmailValidCheck:function(){var a=$("#_privateEmail");if($.trim($(a).val())==""){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_5);return false}return true},_checkMailDomain:function(){_this=this;var a=$("#_mailDomain").val();if(!this._inputDomainValidCheck()){return}$.ajax({url:"/dns/admin/domain/validation",type:"POST",async:false,dataType:"json",data:({domain:a}),success:function(b){if(b.returnCode==0){_this._retryCount=0;$("#domainId").val(b.domainId);$("#tenantId").val(b.tenantId);$("#_domainMessage").text("")}else{if(b.returnCode==_this._nNotFoundDomain){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_1)}else{if(b.returnCode==_this._nNReturnCodeWrongIDC){if(_this._retryCount==0){_this._retryCount++;_this._checkMailDomain()}else{$("#div_fail_message").show();_this._retryCount=0}}else{if(b.returnCode==_this._nMultiDomain){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_2)}else{if(b.returnCode==_this._nUsingSSOOrGroupName){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_3)}else{$("#_domainMessage").text(Message.DEFAULT_ERROR_MESSAGE)}}}}}if(b.returnCode!=0){setTimeout(function(){$("#_mailDomain").focus()},100)}}})},_checkEmail:function(){_this=this;var a=$("#_privateEmail").val();var b=$("#domainId").val();var c=$("#tenantId").val();if(!this._inputEmailValidCheck()){return}$.ajax({url:"/dns/admin/email/validation",type:"POST",async:false,dataType:"json",data:({privateEmail:a,domainId:b,tenantId:c}),success:function(d){if(d.returnCode==0){$("#_privateEmailMessage").text("")}else{if(d.returnCode==_this._nUsingInternalEmail){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_4)}else{if(d.returnCode==_this._nNotValidEmail){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_5)}else{$("#_privateEmailMessage").text(Message.DEFAULT_ERROR_MESSAGE)}}}}})},_addDnsAdminInfo:function(){_this=this;if(!this._ajaxReady){return}var a=$("#_mailDomain").val();var b=$("#_privateEmail").val();if(!this._inputValidCheck()){return}this._ajaxReady=false;$.ajax({url:"/dns/admin/info/add",type:"POST",async:false,dataType:"json",data:({domain:a,privateEmail:b}),success:function(d){if(d.returnCode==0){var c=$("#goToStep2");$(c).find("input[name=domainId]").val(d.domainId);$(c).find("input[name=tenantId]").val(d.tenantId);$(c).attr("action","/dns/admin/info/get").submit()}else{if(d.returnCode==_this._nNotFoundDomain){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_1);setTimeout(function(){$("#_mailDomain").focus()},100)}else{if(d.returnCode==_this._nMultiDomain){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_2);setTimeout(function(){$("#_mailDomain").focus()},100)}else{if(d.returnCode==_this._nUsingSSOOrGroupName){$("#_domainMessage").text(Message.DNS_ADMIN_INFO_3);setTimeout(function(){$("#_mailDomain").focus()},100)}else{if(d.returnCode==_this._nUsingInternalEmail){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_4);setTimeout(function(){$("#_privateEmail").focus()},100)}else{if(d.returnCode==_this._nNotValidEmail){$("#_privateEmailMessage").text(Message.DNS_ADMIN_INFO_5);setTimeout(function(){$("#_privateEmail").focus()},100)}else{$("#_domainMessage").text(Message.DEFAULT_ERROR_MESSAGE)}}}}}}_this._ajaxReady=true}})}};DnsAdminPersonalInfo=function(){this.init.apply(this,arguments)};DnsAdminPersonalInfo.prototype={_domainName:"",_ajaxReady:true,_tenantId:"",_domainId:"",_nUsingInternalEmail:5,_nNotValidEmail:6,init:function(a){this._domainName=a.domainName;this._tenantId=a.tenantId;this._domainId=a.domainId;var b=a.browserLanguage;this._sCountryCode=$("#inputCountryCode").val();if(b=="ko_KR"){this._setCountry("+82")}else{if(b=="ja_JP"){this._setCountry("+81")}else{if(b=="zh_CN"){this._setCountry("+86")}else{if(b=="zh_TW"){this._setCountry("+886")}else{this._setCountry("+1")}}}}this._attachEvent()},_attachEvent:function(){var a=this;$(".countryCodeButton").on("click",function(){if($(".countryCodeButton").hasClass("open")){$(".countryCodeButton").removeClass("open")}else{$(".countryCodeButton").addClass("open")}});$(".countryItem").on("click",function(){$(".countryCodeButton").text($(this).find(".name").text());$(".countryItem").find(".inner").removeClass("selected");a._sCountryCode=$(this).find(".code").text();$(".countryCodeButton").removeClass("open");$(this).find(".inner").addClass("selected")});$(document).on("click",function(b){if(!$(".country_list").is(b.target)&&!$(".countryCodeButton").is(b.target)){$(".countryCodeButton").removeClass("open")}});$("#user_email").blur(function(){a._inputEmailValidCheck()});$("#user_phone").blur(function(){a._inputMobileValidCheck()});$("#verifyDomainOwnershipBtn").click(function(){document.location.href="/dns/admin/info/view"});$("#registerAdminPersonalInfoBtn").click(function(){a._registerAdminPersonalInfoBtn()});$("#_findIdBtn").on("click",function(){document.location.href="/view/find/id?accessUrl="});$("#_findPwBtn").on("click",function(){document.location.href="/view/find/password?accessUrl="})},_setCountry:function(a){var b=$(".countryItem .inner").filter(function(){return $(this).find(".code").text()===a}).first();$(".countryCodeButton").text(b.find(".name").text());b.addClass("selected");this._sCountryCode=b.find(".code").text()},_inputEmailValidCheck:function(){var f=this;var e=$("#user_email").val();if($.trim(e)==""){this._showInvalidEmail(Message.DNS_ADMIN_INFO_5);return false}if(e!=$("#user_email").val().toLowerCase()){this._showInvalidEmail(Message.FIND_PW_21);return false}var d=false;for(var b=0;b<e.length;b++){if(e.charAt(b)==" "){this._showInvalidEmail(Message.DNS_ADMIN_INFO_5);return false}if(e.charAt(b)=="@"){d=true}}if(!d){this._showInvalidEmail(Message.DNS_ADMIN_INFO_5);return false}var a=e.split("@");if(a[1]==f._domainName){this._showInvalidEmail(Message.DNS_ADMIN_INFO_4);return false}var c=false;$.ajax({url:"/dns/admin/email/validation",type:"POST",async:false,dataType:"json",data:({privateEmail:e,domainId:f._domainId,tenantId:f._tenantId}),success:function(g){if(g.returnCode==0){f._hideInvalidEmail();c=true}else{if(g.returnCode==f._nUsingInternalEmail){f._showInvalidEmail(Message.DNS_ADMIN_INFO_4)}else{if(g.returnCode==f._nNotValidEmail){f._showInvalidEmail(Message.DNS_ADMIN_INFO_5)}else{f._showInvalidEmail(Message.DEFAULT_ERROR_MESSAGE)}}}}});return c},_inputMobileValidCheck:function(){var a=$("#user_phone");if($.trim(a.val())==""){this._hideInvalidPhone();return true}if($.isNumeric(a.val())==false){this._showInvalidPhone(Message.FIND_PW_20);return false}this._hideInvalidPhone();return true},_inputValidCheck:function(){var a=this._inputMobileValidCheck();if(a==false){return false}return this._inputEmailValidCheck()},_showInvalidEmail:function(a){$("#invalidEmailMessage").text(a).show();$("#user_email").parent().addClass("invalid")},_showInvalidPhone:function(a){$("#invalidPhoneMessage").text(a).show();$("#user_phone").parent().addClass("invalid")},_hideInvalidEmail:function(){$("#invalidEmailMessage").hide();$("#user_email").parent().removeClass("invalid")},_hideInvalidPhone:function(a){$("#invalidPhoneMessage").hide();$("#user_phone").parent().removeClass("invalid")},_registerAdminPersonalInfoBtn:function(){var d=this;if(!d._ajaxReady){return}if(!d._inputValidCheck()){return}var b=$("#user_email").val();var a=$("#user_phone").val();var c=d._sCountryCode;d._ajaxReady=false;$.ajax({url:"/dns/admin/personalInfo/add/callback",type:"POST",async:false,data:({privateEmail:b,mobilePhone:c+" "+a,tenantId:d._tenantId,domainId:d._domainId}),success:function(e){if(e.returnCode==0){$(".contents").html($("#registerSuccess"))}else{$("#notValidMessage").text(Message.DEFAULT_ERROR_MESSAGE)}d._ajaxReady=true}})}};IntegrationPasswordChange=function(){this.init.apply(this,arguments)};IntegrationPasswordChange.prototype={_ENTER_KEY_CODE:13,_MAX_PASSWORD_LENGTH:20,_ajaxReady:true,_RESULT_CODE_TOKEN_EXPIRED:320,_nReturnCodeDomainChangeName:141,init:function(b,c,f,d,e,a){this._oTenantConfig=b;this._bIsAvailableToChangeEmail=c;this._bIsAvailableToChangePassword=f;this._isShowingCurrentPw=d;this.oBulkRequest=a;this._isNcs=e;this._attachEvent();this._passwordGradeChecker=new PasswordGradeChecker(this._oTenantConfig);this._focusFirstInput()},_focusFirstInput:function(){$(".input_box").first().focus()},_attachEvent:function(){var a=this;$("#tab-forced").click(function(b){b.stopPropagation();b.preventDefault();$("#tab-forced").attr("aria-selected","true");$("#tab-request").attr("aria-selected","false");$("#tabpanel-forced").show();$("#tabpanel-request").hide();a._focusFirstInput()});$("#tab-request").click(function(b){b.stopPropagation();b.preventDefault();$("#tab-forced").attr("aria-selected","false");$("#tab-request").attr("aria-selected","true");$("#tabpanel-forced").hide();$("#tabpanel-request").show()});$("#askChangeBtn").click(function(b){b.stopPropagation();b.preventDefault();a._askChangePassword()});$("#successLayerCloseBtn").click(function(){$("#changeSuccessLayer").hide();if($("#successLayerCloseBtn").attr("data-useTwoStepLogin")=="Y"){$("#twoStepLogin").attr("action",$("#successLayerCloseBtn").attr("data-twoStepNextUrl")).submit();return}if($("#accessUrl").val()!=""){window.location=decodeURIComponent($("#accessUrl").val()).replace(/</g,"&lt;").replace(/>/g,"&gt;")}else{if($("#passwordChangeLayer").is(":visible")){a._resetLayer()}window.close()}});$("#backBtn").click(function(b){b.stopPropagation();b.preventDefault();if($("#accessUrl").val()!=""){window.location=$("#accessUrl").val().replace(/</g,"&lt;").replace(/>/g,"&gt;")}});$("#user_pwd").on("input",function(c){var b=$("#user_pwd").val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#user_pwd").val($("#user_pwd").val().substr(0,a._MAX_PASSWORD_LENGTH))}});$("#user_pwd2").on("input",function(c){var b=$("#user_pwd2").val();if(b.length>a._MAX_PASSWORD_LENGTH){$("#user_pwd2").val($("#user_pwd2").val().substr(0,a._MAX_PASSWORD_LENGTH))}});$("#user_pwd2").keydown(function(b){if(b.keyCode==a._ENTER_KEY_CODE){a._changePassword()}});$("#changeBtn").click(function(b){b.stopPropagation();b.preventDefault();if($("#onlyChangeEmail").val()=="true"){a._onlyChangeEmail()}else{a._changePassword()}});$("#new_id").focusin(function(){$("#new_id").parent().addClass("focus");$("#new_id").parent().removeClass("invalid")});$("#new_id").focusout(function(){$("#new_id").parent().removeClass("focus");a._checkEmail()});$("#user_current").focusin(function(){$("#user_current").parent().addClass("focus");$("#currentPasswordLayer").removeClass("invalid")});$("#user_current").focusout(function(){$("#user_current").parent().removeClass("focus");$(this).parent().find(".ico_pwd_check").removeClass("checked");var b=$("#user_current").val();if(b.length>0){$(this).parent().find(".ico_pwd_check").addClass("checked")}});$("#user_pwd").focusin(function(){$("#newPasswordLayer").removeClass("invalid");$("#newPasswordLayer").addClass("focus")});$("#user_pwd").focusout(function(){$("#newPasswordLayer").removeClass("focus");a._passwordGradeChecker._doCheckSafetyLevel()});$("#user_pwd2").focusin(function(){$("#newPasswordLayer2").addClass("focus");$("#newPasswordLayer2").removeClass("invalid")});$("#user_pwd2").focusout(function(){$("#newPasswordLayer2").removeClass("focus");a._passwordGradeChecker._validCheckPassword()});$(".btn_masking").click(function(f){var b=$(this).parent().find(".input_box");var g=b.attr("type");var d=g==="password"?"text":"password";b.attr("type",d);b.focus();var c=$(this);if(c.hasClass("checked")){c.removeClass("checked")}else{c.addClass("checked")}})},_showPasswordDefaultLayer:function(a){if(a=="password"){$("#newPasswordLayer").removeClass("invalid");$("#pwErrorMessage").html("").hide();$("#newPasswordAlert").removeClass("checked")}else{if(a=="passwordConfirm"){$("#newPasswordLayer2").removeClass("invalid");$("#pwErrorMessage2").html("").hide();$("#newPasswordAlert2").removeClass("checked")}else{if(a=="currentPassword"){$("#currentPasswordLayer").find(".input_cover").removeClass("invalid");$("#currentPasswordErrorMessage").text("").hide();$("#currentPasswordAlert").removeClass("checked")}else{if(a=="all"){$(".input_cover").removeClass("invalid");$(".invalid_desc").text("").hide()}}}}},_showPasswordErrorLayer:function(a){if(a=="password"){$("#newPasswordLayer").addClass("invalid");$("#newPasswordAlert").removeClass("checked")}else{if(a=="passwordConfirm"){$("#newPasswordLayer2").addClass("invalid");$("#newPasswordAlert2").removeClass("checked")}}},_showPasswordCorrectlayer:function(a){if(a=="password"){$("#newPasswordInput").find(".input_cover").removeClass("invalid");$("#newPasswordAlert").addClass("checked");$("#pwErrorMessage").hide()}else{if(a=="passwordConfirm"){$("#newPasswordInput").find(".input_cover").removeClass("invalid");$("#newPasswordAlert2").addClass("checked");$("#pwErrorMessage2").hide()}}},_validCheckPassword:function(){this._showPasswordDefaultLayer("all");var d=$.trim($("#user_current").val());var a=$.trim($("#user_pwd").val());var c=$.trim($("#user_pwd2").val());if(this._isShowingCurrentPw&&d==""){$("#currentPasswordLayer").addClass("invalid");$("#currentPasswordErrorMessage").text(Message.PASSWORD_CHANGE_8).show();return false}if(a==""){this._showPasswordErrorLayer("password");$("#pwErrorMessage").text(Message.PASSWORD_CHANGE_8).show();this._showPasswordDefaultLayer("passwordConfirm");return false}if(c==""){this._showPasswordErrorLayer("passwordConfirm");$("#pwErrorMessage2").text(Message.PASSWORD_CHANGE_8).show();this._showPasswordDefaultLayer("password");return false}var b=this._passwordGradeChecker._calculatePwResult();if(b==false){return false}return this._passwordGradeChecker._validCheckPasswordConfirm()},_validCheckEmail:function(){var b=$.trim($("#new_id").val());if(b==""){$("#emailErrorMessage").text(Message.ID_CHANGE_2).show();$("#new_id").parent().addClass("invalid");return false}var a=/(\.\.)|\.$|^(\.)/g;if(a.test(b)==true){$("#emailErrorMessage").text(Message.ID_CHANGE_1).show();return false}return true},_changePassword:function(){var d=this;this._isCorrectEmail=true;if(!this._ajaxReady){return}if(this._bIsAvailableToChangeEmail){this._checkEmail().always(function(e){if(e){d._isCorrectEmail=true}else{d._isCorrectEmail=false}})}if(this._isCorrectEmail==false){return}if(this._bIsAvailableToChangePassword==false){return}if(!this._validCheckPassword()){return}var a;var b={};var c=$("#user_current").val();b.currentPassword=this._isShowingCurrentPw?Base64.encode(c):"";b.newPassword=Base64.encode($("#user_pwd").val());b.newEmail=$("#new_id").val();b.usage=$("#usage").val();b.isAvailableToChangePassword=d._bIsAvailableToChangePassword;b.isAvailableToChangeEmail=d._bIsAvailableToChangeEmail;b.targetUserTenantId=d._oTenantConfig.tenantId;b.targetUserDomainId=d._oTenantConfig.domainId;b.targetUserIdNo=$("#userIdNo").val();b.targetCurrentEmail=$("#currentEmail").val();b.token=$("#token").val();b.keepLoginYn=$("#keepLoginYn").val();b.serviceCode=$("#serviceCode").val();b.partnerDomainId=$("#partnerDomainId").val();b.privateInfo=$("#privateInfo").val();b.isTempId=$("#isTempId").val();b.rememberIdYn=$("#rememberIdYn").val();if(this._checkBulkType()){b.type=d.oBulkRequest.bulkType;b.userIdNos=d.oBulkRequest.userIdNos;b.mailDomain=$("#mailDomain").val();a="/integrate/password/bulk-reset"}else{if($("#useTwoStepLogin").val()=="Y"&&$("#serviceCode").val()=="login_web"){b.accessUrl=$("#accessUrl").val();a="/integrate/password/two-step/expired"}else{a="/integrate/password/passwordChange"}}this._ajaxReady=false;$.ajax({url:a,type:"POST",data:b,success:function(f){d._ajaxReady=true;if(f.returnCode=="00"){if($("#usage").val()=="mobileAdmin"){var g="?";if(($("#accessUrl").val()).includes("?")){g="&"}$("#accessUrl").val($("#accessUrl").val()+g+"isChangePw=true")}if(f.useTwoStepLoginYn=="Y"){$("#successLayerCloseBtn").attr("data-useTwoStepLogin","Y");$("#successLayerCloseBtn").attr("data-twoStepNextUrl",f.nextUrl);var e=$("#twoStepLogin");$(e).find("input[name=usage]").val(f.usage);$(e).find("input[name=redirectUrl]").val(f.redirectUrl);$(e).find("input[name=userIdNo]").val(f.userIdNo);$(e).find("input[name=domainId]").val(f.domainId);$(e).find("input[name=sessionKey]").val(f.sessionKey)}d._showSuccessLayer(Message.INTEGRATION_PASSWORD_CHANGE_SUCCESS)}else{if(f.returnCode==d._nReturnCodeDomainChangeName){window.location=f.redirectUrl}else{if(f.returnCode>100){$("#emailErrorMessage").text(f.returnMessage).show()}else{if(f.returnCode==23||f.returnCode==15||f.returnCode==14){$("#currentPasswordErrorMessage").html(f.returnMessage).show();$("#currentPasswordLayer").addClass("invalid").focus();$("#currentPasswordAlert").removeClass("checked")}else{if(f.returnCode==16){d._showSuccessLayer(Message.INTEGRATION_PASSWORD_CHANGE_IN_PROGRESS)}else{$("#pwErrorMessage").html(f.returnMessage).show();$("#newPasswordLayer").addClass("invalid");$("#newPasswordAlert").removeClass("checked")}}}}}},error:function(){d._ajaxReady=true}})},_checkEmail:function(){var a=$.Deferred();var b=this;if(this._bIsAvailableToChangeEmail){if(!this._validCheckEmail()){return false}}$.ajax({async:false,url:"/integrate/email/checkValidation",type:"POST",data:{newEmail:$("#new_id").val(),targetUserDomainId:b._oTenantConfig.domainId,targetUserIdNo:$("#userIdNo").val()},success:function(c){if(c.returnCode=="00"){$("#emailLayer").removeClass("invalid");$("#emailErrorMessage").text("").hide();a.resolve(true)}else{$("#emailErrorMessage").text(c.returnMessage).show();$("#emailLayer").addClass("invalid");a.reject(false)}},error:function(c){a.reject(false)}});return a},_askChangePassword:function(){if(!this._ajaxReady){return}var c=this;var a={};var b;if(this._checkBulkType()){a.targetUserTenantId=c._oTenantConfig.tenantId;a.targetUserDomainId=c._oTenantConfig.domainId;a.type=c.oBulkRequest.bulkType;a.userIdNos=c.oBulkRequest.userIdNos;a.mailDomain=$("#mailDomain").val();b="/integrate/password/bulk-reset/ask-change"}else{b="/integrate/password/askPasswordChange";a.tenantId=c._oTenantConfig.tenantId;a.domainId=c._oTenantConfig.domainId;a.userIdNo=$("#userIdNo").val()}this._ajaxReady=false;$.ajax({type:"POST",url:b,data:a,success:function(d){c._ajaxReady=true;if(d.returnCode=="00"){if($("#accessUrl").val()!=""){$("#accessUrl").val($("#accessUrl").val()+"?loginUpdateRequest=true&targetUserIdNo="+$("#userIdNo").val())}c._showSuccessLayer(Message.INTEGRATION_PASSWORD_CHANGE_ASK_SUCCESS)}else{if(d.returnCode==16){c._showSuccessLayer(Message.INTEGRATION_PASSWORD_CHANGE_IN_PROGRESS)}}},error:function(){c._ajaxReady=true}})},_onlyChangeEmail:function(){var a=this;if(!this._validCheckEmail()){return false}this._ajaxReady=false;$.ajax({url:"/integrate/email/changeEmail",type:"POST",data:{targetUserTenantId:a._oTenantConfig.tenantId,targetUserDomainId:a._oTenantConfig.domainId,targetCurrentEmail:$("#currentEmail").val(),targetUserIdNo:$("#userIdNo").val(),newEmail:$("#new_id").val(),usage:$("#usage").val(),partnerDomainId:$("#partnerDomainId").val(),isTempId:$("#isTempId").val()},success:function(b){a._ajaxReady=true;if(b.returnCode=="00"){if($("#usage").val()=="mobileAdmin"){}a._showSuccessLayer(Message.INTEGRATION_ID_CHANGE_SUCCESS)}else{if(b.returnCode==16){a._showSuccessLayer(Message.INTEGRATION_PASSWORD_CHANGE_IN_PROGRESS)}else{if(b.returnCode==a._nReturnCodeDomainChangeName){window.location=b.redirectUrl}else{if(b.returnCode>100){$("#emailErrorMessage").text(b.returnMessage).show();$("#emailLayer").addClass("invalid")}else{if(b.returnCode==23){$("#currentPasswordAlert").html(b.returnMessage).show()}else{$("#pwErrorMessage").html(b.returnMessage).show();a._showPasswordErrorLayer("password")}}}}}},error:function(){a._ajaxReady=true}})},_showSuccessLayer:function(a){$(".inform_title").text(a);$(".ly_wrap").show();$("#successLayerCloseBtn").focus()},_checkBulkType:function(){if(this.oBulkRequest===undefined){return}return this.oBulkRequest.changeType==="bulk"},};SnsFingerPrint=function(){this.init.apply(this,arguments)};SnsFingerPrint.prototype={_sRedirectUrl:"",_sUserIdNo:"",_sDomainId:"",_sTenantId:"",_sLoginType:"",_sBrowserLanguage:"",_sEmail:"",_sAccessUrl:"",_bIsParentPage:"",_sSnsType:"",_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(d,c,a,e,h,i,b,k,f,j,g){this._sRedirectUrl=d;this._sUserIdNo=c;this._sDomainId=a;this._sTenantId=e;this._sLoginType=h;this._sBrowserLanguage=i;this._sIsWebLoginView=b;this._sEmail=k;this._sAccessUrl=f;this._bIsParentPage=j;this._sSnsType=g;this._setFingerPrint()},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,e){var d=b._makeFingerPrintDetail(c,e);b._call(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,e){var d=b._makeFingerPrintDetail(c,e);b._call(c,d)})},500)}}catch(a){b._redirectView()}},_makeFingerPrintDetail:function(a,f){var e="";for(var d in f){var g=f[d];if(!g){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}return e},_call:function(a,b){var c=this;$.ajax({url:"/api/device/sns/fingerprint",type:"POST",async:false,dataType:"json",data:({userIdNo:this._sUserIdNo,domainId:this._sDomainId,tenantId:this._sTenantId,loginType:this._sLoginType,fingerPrint:a,language:this._sBrowserLanguage,fingerPrintDetail:b,email:this._sEmail,accessUrl:this._sAccessUrl}),success:function(d){c._redirectView()},error:function(d,f,e){c._redirectView()}})},_redirectView:function(){var b=this;if(b._sIsWebLoginView){if(b._bIsParentPage=="true"){window.location.href=b._sAccessUrl}else{try{if(b._sSnsType==="ncp"){window.location.href=b._sAccessUrl}else{window.opener.postMessage("lineLoginSuccessRefresh","*");self.close()}}catch(a){window.location.href=b._sRedirectUrl}}}else{window.location.href=b._sRedirectUrl}}};SsoFingerPrint=function(){this.init.apply(this,arguments)};SsoFingerPrint.prototype={_sRedirectUrl:"",_sKey:"",_sSsoType:"",_fingerPrintExcludeOptions:{excludeAvailableScreenResolution:true,excludeJsFonts:true,excludeFlashFonts:true,excludeIndexedDB:true,excludeDoNotTrack:true,excludeCpuClass:true,excludeOpenDatabase:true,excludePlugins:true,excludeAdBlock:true,excludeTouchSupport:true,excludeAddBehavior:true},init:function(b,c,a){this._sRedirectUrl=b;this._sKey=c;this._sSsoType=a;this._setFingerPrint()},_setFingerPrint:function(){var b=this;try{if(window.requestIdleCallback){requestIdleCallback(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,e){var d=b._makeFingerPrintDetail(c,e);b._call(c,d)})})}else{setTimeout(function(){new Fingerprint2(b._fingerPrintExcludeOptions).get(function(c,e){var d=b._makeFingerPrintDetail(c,e);b._call(c,d)})},500)}}catch(a){window.location.href=this._sRedirectUrl}},_makeFingerPrintDetail:function(a,f){var e="";for(var d in f){var g=f[d];if(!g){continue}var c=g.key;var h=g.value;if(c=="canvas"||c=="webgl"){h=String(h).substr(0,100)}var b=c+"="+h;e+=b+";"}return e},_call:function(a,b){var c=this;$.ajax({url:"/api/sso/fingerprint/set",type:"POST",async:false,dataType:"json",data:({url:this._sRedirectUrl,key:this._sKey,ssoType:this._sSsoType,fingerPrint:a,fingerPrintDetail:b}),success:function(d){window.location.href=c._sRedirectUrl},error:function(d,f,e){window.location.href=c._sRedirectUrl}})}};window.onerror=function(d,b,g,c,a){var f=(window.navigator||{}).userAgent;var b=(b==undefined)?"":b;var e={message:(d==undefined)?"":d,url:b,lineNo:(g==undefined)?"":g,colNo:(c==undefined)?"":c,error:(a==undefined)?"":a.stack,userAgent:(f==undefined)?"":f};if(isUserAgentUnderIE10(f)){return}if(b.toLowerCase().indexOf("auth.")==-1){return}sendNelo(e)};function isUserAgentUnderIE10(a){return/(MSIE (9|8|7)|Trident\/(5|4|3))/.test(a)}function sendNelo(a){try{var c=new XMLHttpRequest();c.open("POST","/client/error/send");c.setRequestHeader("Content-Type","application/json");c.send(JSON.stringify(a))}catch(b){console.warn(b)}};TwoStepLink=function(){this.init.apply(this,arguments)};TwoStepLink.prototype={_oTwoStepLogin:"",_domainUsePhoneLogin:"",_bIsExistPrivateEmail:"",_bIsExistPhoneNo:"",_SELECTED_TYPE_KEY:"selectedLoginType",_nExternalSSOMobileLogin:1,_nUnregisteredDeviceProgress:2,_nOtherLoginOver90Days:3,_nOtherLoginNotConnected:4,_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidPrivateEmail:13,_nInvalidPhoneNumber:14,_nInvalidIdOrPassword:20,_nNotExistMember:21,_nLoginStopUser:22,_nFailLoginAppBlockedUser:27,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nNoServiceAuth:54,_nThirdPartyMdmOtherDomainLoginRestricted:55,_nUnavailableDomain:72,_nUnavailableDomain2:75,_nUnavailableDomain3:76,_nUnavailableDomain4:78,_nLoginSessionExpired:90,_nUnexpectedError:99,_nOngoingProductUpdate:140,_nDomainChangeName:141,_nAbuser:998,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",init:function(b,d,e){var f=this;f._oTwoStepLogin=b;f._domainUsePhoneLogin=e;if(b.privateEmail){$("#privateEmail").val(b.privateEmail);f._bIsExistPrivateEmail="true"}if(b.phoneNo){$("#phoneNo").val(b.phoneNo);f._bIsExistPhoneNo="true"}if(d){var a=$(".country_list .code").filter(function(){return $(this).text()===d}).first();if(a.length){a.closest(".inner").addClass("selected");var c=a.closest(".inner").find(".name").text();$("#selectedCountry").text(c)}}if(e=="false"&&f._bIsExistPrivateEmail!="true"){$("#domainUsePhoneLogin").attr("style","display:none;")}if(f._bIsExistPhoneNo!="true"){$("#isExistPhoneNumber").attr("style","display:none;")}f._addClassForIpad();f._initRegisterButton();f._attachEvent()},_addClassForIpad:function(){if(this._oTwoStepLogin.twoStepLoginUsage==="mobile_profile"){$("#root").addClass("m_app")}},_attachEvent:function(){var a=this;$("#register").on("click",function(){a._register()});$("#removePrivateEmail").on("click",function(){$("#privateEmail").val("");a._sPrivateEmail="";a._enableRegisterButton()});$("#removePhoneNo").on("click",function(){$("#phoneNo").val("");a._sPhoneNumber="";a._enableRegisterButton()});$("#phoneNo").on("input",function(){a._limitPhoneNumber();var b=$("#phoneNo").val();if(b.length>0){a._hidePhoneErrorMessage();a._hidePhoneVerifyMessage();$("#register").attr("disabled",false)}}).focusout(function(){a._enableRegisterButton()});$("#privateEmail").on("input",function(){a._limitPrivateEmail();var b=$("#privateEmail").val();if(b.length>0){a._hidePrivateEmailErrorMessage();a._hidePrivateEmailVerifyMessage();a._hidePrivateEmailSameMessage();$("#register").attr("disabled",false)}}).focusout(function(){a._enableRegisterButton()});$("#mobileClose").on("click",function(){worksAuth.didFinishConnect2StepVerify(false)});$("#selectedCountry").on("click",function(){$(this).toggleClass("open")});$(".country-select").on("click",function(c){c.preventDefault();var d=$(this).find(".name").text();var b=$(this).find(".code").text();$("#selectedCountry").text(d).attr("data-countryCode",b).toggleClass("open");$(".country-select.selected").removeClass("selected");$(this).addClass("selected")});$(document).click(function(b){if(!$("#selectedCountry").is(b.target)){$("#selectedCountry").removeClass("open")}})},_initRegisterButton:function(){var a=this;a._disableRegisterButton();a._enableRegisterButton()},_validatePhoneNumber:function(){var c=this;c._limitPhoneNumber();var a=c._convertToHalfWidth($("#phoneNo").val());var b=new RegExp("^[0-9]+([0-9]+|(-[0-9]+))+$");if(b.test(a)==false){c._showPhoneErrorMessage();c._disableRegisterButton();return false}return true},_validatePrivateEmail:function(){var c=this;c._limitPrivateEmail();var a=c._convertToHalfWidth($("#privateEmail").val());var b=new RegExp("^[\\-_.0-9a-zA-Z]{1,64}@[\\-_.0-9a-zA-Z]+\\.[a-zA-z]{2,}$");if(b.test(a)==false){c._showPrivateEmailVerifyMessage();return false}return true},_showPhoneErrorMessage:function(){$("#phoneNoInvalid").show()},_showPhoneVerifyMessage:function(){$("#phoneNoVerify").show()},_hidePhoneErrorMessage:function(){$("#phoneNoInvalid").hide()},_hidePhoneVerifyMessage:function(){$("#phoneNoVerify").hide()},_showPrivateEmailErrorMessage:function(){$("#privateEmailInvalid").show()},_showPrivateEmailVerifyMessage:function(){$("#privateEmailVerify").show()},_showPrivateEmailSameMessage:function(){$("#privateEmailSame").show()},_hidePrivateEmailErrorMessage:function(){$("#privateEmailInvalid").hide()},_hidePrivateEmailVerifyMessage:function(){$("#privateEmailVerify").hide()},_hidePrivateEmailSameMessage:function(){$("#privateEmailSame").hide()},_disableRegisterButton:function(){$("#register").attr("disabled",true)},_limitPrivateEmail:function(){var b=this;var a=$("#privateEmail").val();if(a.length>255){$("#privateEmail").val(a.substr(0,255))}},_limitPhoneNumber:function(){var b=this;var a=$("#phoneNo").val();if(a.length>24){$("#phoneNo").val(a.substr(0,24))}},_enableRegisterButton:function(){var d=this;var c=d._convertToHalfWidth($("#privateEmail").val());var b=d._convertToHalfWidth($("#phoneNo").val());var a=true;if(d._domainUsePhoneLogin=="true"||d._bIsExistPrivateEmail=="true"){if(c.length==0){d._disableRegisterButton();d._showPrivateEmailErrorMessage();d._hidePrivateEmailVerifyMessage();a=false}else{if(d._validatePrivateEmail()==false){d._hidePrivateEmailErrorMessage();d._disableRegisterButton();a=false}else{d._hidePrivateEmailErrorMessage();d._hidePrivateEmailVerifyMessage()}}}else{if(c.length>0){if(d._validatePrivateEmail()==false){d._showPrivateEmailVerifyMessage();d._disableRegisterButton();a=false}else{d._hidePrivateEmailErrorMessage();d._hidePrivateEmailVerifyMessage()}}else{d._hidePrivateEmailErrorMessage();d._hidePrivateEmailVerifyMessage()}}if(d._bIsExistPhoneNo=="true"){if(b.length==0){d._disableRegisterButton();d._hidePhoneErrorMessage();d._showPhoneVerifyMessage();a=false}}if(b.length>0){if(d._validatePhoneNumber()==false){d._disableRegisterButton();d._showPhoneErrorMessage();d._hidePhoneVerifyMessage();a=false}else{d._hidePhoneErrorMessage();d._hidePhoneVerifyMessage()}}if(c.length==0&&b.length==0){d._disableRegisterButton();a=false}if(a==true){$("#register").attr("disabled",false)}return a},_register:function(){var f=this;try{if(f._enableRegisterButton()==false){return}var b=$("#privateEmail").val();var a=$("#phoneNo").val();f._oTwoStepLogin.privateEmail=f._convertToHalfWidth($.trim(b));f._oTwoStepLogin.phoneNo=f._convertToHalfWidth($.trim(a));var c=f._oTwoStepLogin.phoneNo==""?"":$("#selectedCountry").attr("data-countryCode");if(b==f._oTwoStepLogin.email){f._showPrivateEmailSameMessage();return}$.ajax({url:"/2step-login/link/register",type:"POST",async:false,dataType:"json",data:({userIdNo:f._oTwoStepLogin.userIdNo,domainId:f._oTwoStepLogin.domainId,twoStepLoginUsage:f._oTwoStepLogin.twoStepLoginUsage,privateEmail:f._oTwoStepLogin.privateEmail,phoneNo:f._oTwoStepLogin.phoneNo,domainUseOrgSync:false,countryCode:c,sessionKey:f._oTwoStepLogin.sessionKey,redirectUrl:f._oTwoStepLogin.redirectUrl,isPhoneLogin:f._oTwoStepLogin.isPhoneLogin}),success:function(k){var j=f._oTwoStepLogin.twoStepLoginUsage;if(k.code==0){if(j=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(true)}else{if(j=="web_profile"){if(k.redirectUrl==""){window.close()}else{window.location=k.redirectUrl}}else{if(j=="mobile_login"){var l="/login/mSuccess?userIdNo="+k.userIdNo+"&domainId="+k.domainId+"&tenantId="+k.tenantId+"&email="+k.email+"&fidoRegisterEnabled="+k.fidoRegisterEnabled;if(k.useDomainAclYn){l+="&useDomainAclYn="+k.useDomainAclYn}if(k.domainAclListJson){l+="&domainAclList="+k.domainAclListJson}if(k.userIp){l+="&userIp="+k.userIp}window.location=l}else{if(j=="web_login"){sessionStorage.removeItem(f._SELECTED_TYPE_KEY);window.location=k.redirectUrl}else{if(j=="message_noti"){window.location=k.redirectUrl}else{if(j=="first_auth_mail"){window.location="/password/completeJoinView"}else{window.close()}}}}}}}else{if(k.code==f._nInvalidParameter||k.code==f._nInvalidDomainId||k.code==f._nNotExistMember||k.code==f._nUnexpectedError||k.code==f._nUserIsUsingPhoneLogin){if(j=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(false)}window.close()}else{if(k.code==f._nExternalSSOMobileLogin){var i=$("#externalSSOMobile");$(i).find("input[name=keyForUrlScheme]").val(k.keyForUrlScheme);$(i).find("input[name=serviceCode]").val(k.serviceCode);$(i).find("input[name=appType]").val(k.appType);$(i).find("input[name=idcCode]").val(k.idcCode);$(i).attr("action","/login/external/view").submit()}else{if(k.code==f._nInvalidPrivateEmail){f._showPrivateEmailVerifyMessage()}else{if(k.code==f._nInvalidPhoneNumber){f._showPhoneVerifyMessage()}else{if(k.code==f._nLoginSessionExpired){if(j=="mobile_login"){window.location="/login/mFail?message="+f._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=f._oTwoStepLogin.redirectUrl}}else{if(k.code==f._nLoginStopUser||k.code==f._nFailLoginAppBlockedUser||k.code==f._nNoServiceAuth||k.code==f._nThirdPartyMdmOtherDomainLoginRestricted||k.code==f._nUnavailableDomain||k.code==f._nUnavailableDomain2||k.code==f._nUnavailableDomain3||k.code==f._nUnavailableDomain4||k.code==f._nOngoingProductUpdate||k.code==f._nDomainChangeName||k.code==f._nAbuser||k.code==f._nInvalidIdOrPassword){if(f._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+k.returnMessageId}else{alert(k.returnMessage);window.location=f._oTwoStepLogin.redirectUrl}}else{if(k.code==f._nUnregisteredDeviceProgress){var g=$("#unregisteredDeviceForm");g.find("input[name=accessUrl]").val(k.accessUrl);g.find("input[name=sessionKey]").val(k.sessionKey);g.find("input[name=phoneNo]").val(k.phoneNo);g.find("input[name=countryCode]").val(k.countryCode);g.find("input[name=serviceCode]").val(k.serviceCode);g.find("input[name=language]").val(k.language);g.find("input[name=phoneNoForView]").val(k.phoneNoForView);g.find("input[name=phoneIntegrateType]").val("unregistered_device");g.attr("action",k.nextUrl).submit()}else{if(k.code==f._nOtherLoginOver90Days){var h=$("#otherLoginLastLoginForm");h.find("input[name=accessUrl]").val(k.accessUrl);h.find("input[name=phoneNo]").val(k.phoneNo);h.find("input[name=countryCode]").val(k.countryCode);h.find("input[name=phoneNoForView]").val(k.phoneNoForView);h.find("input[name=serviceCode]").val(k.serviceCode);h.find("input[name=language]").val(k.language);h.find("input[name=fidoRegisterEnabled]").val(k.fidoRegisterEnabled);h.find("input[name=phoneIntegrateType]").val("over_90_days_re_auth");h.attr("action",k.nextUrl).submit()}else{if(k.code==f._nOtherLoginNotConnected){var e=$("#phoneLoginConnectForm");e.find("input[name=accessUrl]").val(k.accessUrl);e.find("input[name=deviceId]").val(k.deviceId);e.find("input[name=serviceCode]").val(k.serviceCode);e.find("input[name=language]").val(k.language);e.find("input[name=phoneIntegrateType]").val("after_login_connect");e.attr("action",k.nextUrl).submit()}else{if(j=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(false)}window.close()}}}}}}}}}}},error:function(e,h,g){window.close()}})}catch(d){window.close()}},_convertToHalfWidth:function(a){if(a.length==0){return a}return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})}};TwoStepOrg=function(){this.init.apply(this,arguments)};TwoStepOrg.prototype={_oTwoStepLogin:"",_domainUsePhoneLogin:"",_SELECTED_TYPE_KEY:"selectedLoginType",_nExternalSSOMobileLogin:1,_nUnregisteredDeviceProgress:2,_nOtherLoginOver90Days:3,_nOtherLoginNotConnected:4,_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidIdOrPassword:20,_nNotExistMember:21,_nLoginStopUser:22,_nFailLoginAppBlockedUser:27,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nNoServiceAuth:54,_nThirdPartyMdmOtherDomainLoginRestricted:55,_nUnavailableDomain:72,_nUnavailableDomain2:75,_nUnavailableDomain3:76,_nUnavailableDomain4:78,_nLoginSessionExpired:90,_nUnexpectedError:99,_nOngoingProductUpdate:140,_nDomainChangeName:141,_nAbuser:998,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",init:function(a){var b=this;b._oTwoStepLogin=a;b._setPrivateEmail(a.privateEmail);b._setPhoneNumber(a.countryCode,a.phoneNo);b._showDefaultMessage();b._disableRegisterButton();b._enableRegisterButton();b._attachEvent()},_getEl:function(a){return $("#content ."+a)},_setPrivateEmail:function(a){$("#privateEmailText").attr("disabled",true);if(a!==""){$("#privateEmailText").val(a)}else{$("#privateEmail").addClass("disabled");$("#privateEmailText").addClass("disabled")}},_setPhoneNumber:function(a,b){$("#phoneNumberText").attr("disabled",true);if(b!==""){$("#phoneNumberText").val(a+" "+b)}else{$("#phoneNumber").addClass("disabled");$("#phoneNumber").addClass("disabled")}},_disableRegisterButton:function(){$("#register").attr("disabled",true);$("#register").hide()},_enableRegisterButton:function(){var c=this;var b=c._oTwoStepLogin.privateEmail;var a=c._oTwoStepLogin.phoneNo;if(c._domainUsePhoneLogin=="true"){if(b.length==0){c._disableRegisterButton();return false}}if(b.length==0&&a.length==0){c._disableRegisterButton();return false}$("#register").attr("disabled",false);$("#register").show();return true},_showDefaultMessage:function(){var a=this;if(a._oTwoStepLogin.privateEmail||a._oTwoStepLogin.phoneNo){a._getEl("_authInfo").show()}else{a._getEl("_noAuthInfo").show()}},_attachEvent:function(){var a=this;$("#mobileClose").on("click",function(){worksAuth.didFinishConnect2StepVerify(false)});$("#register").on("click",function(){a._register()})},_register:function(){var b=this;try{$.ajax({url:"/2step-login/link/register",type:"POST",async:false,dataType:"json",data:({userIdNo:b._oTwoStepLogin.userIdNo,domainId:b._oTwoStepLogin.domainId,twoStepLoginUsage:b._oTwoStepLogin.twoStepLoginUsage,privateEmail:b._oTwoStepLogin.privateEmail,phoneNo:b._oTwoStepLogin.phoneNo,domainUseOrgSync:true,countryCode:"",sessionKey:b._oTwoStepLogin.sessionKey,redirectUrl:b._oTwoStepLogin.redirectUrl,isPhoneLogin:b._oTwoStepLogin.isPhoneLogin}),success:function(h){var g=b._oTwoStepLogin.twoStepLoginUsage;if(h.code==0){if(g=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(true)}else{if(g=="web_profile"){if(h.redirectUrl==""){window.close()}else{window.location=h.redirectUrl}}else{if(h.twoStepLoginUsage=="mobile_login"){var i="/login/mSuccess?userIdNo="+h.userIdNo+"&domainId="+h.domainId+"&tenantId="+h.tenantId+"&email="+h.email;if(h.useDomainAclYn){i+="&useDomainAclYn="+h.useDomainAclYn}if(h.domainAclListJson){i+="&domainAclList="+h.domainAclListJson}if(h.userIp){i+="&userIp="+h.userIp}window.location.href=i}else{if(g=="web_login"){window.location=h.redirectUrl;sessionStorage.removeItem(b._SELECTED_TYPE_KEY)}else{if(g=="message_noti"){window.location=h.redirectUrl}else{window.close()}}}}}}else{if(h.code==b._nInvalidParameter||h.code==b._nInvalidDomainId||h.code==b._nNotExistMember||h.code==b._nUnexpectedError||h.code==b._nUserIsUsingPhoneLogin){if(g=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(false)}window.close()}else{if(h.code==b._nExternalSSOMobileLogin){var f=$("#externalSSOMobile");$(f).find("input[name=keyForUrlScheme]").val(h.keyForUrlScheme);$(f).find("input[name=serviceCode]").val(h.serviceCode);$(f).find("input[name=appType]").val(h.appType);$(f).find("input[name=idcCode]").val(h.idcCode);$(f).attr("action","/login/external/view").submit()}else{if(h.code==b._nLoginSessionExpired){if(g=="mobile_login"){window.location="/login/mFail?message="+b._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=b._oTwoStepLogin.redirectUrl}}else{if(h.code==b._nLoginStopUser||h.code==b._nFailLoginAppBlockedUser||h.code==b._nNoServiceAuth||h.code==b._nThirdPartyMdmOtherDomainLoginRestricted||h.code==b._nUnavailableDomain||h.code==b._nUnavailableDomain2||h.code==b._nUnavailableDomain3||h.code==b._nUnavailableDomain4||h.code==b._nOngoingProductUpdate||h.code==b._nDomainChangeName||h.code==b._nAbuser||h.code==b._nInvalidIdOrPassword){if(b._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+h.returnMessageId}else{alert(h.returnMessage);window.location=b._oTwoStepLogin.redirectUrl}}else{if(h.code==b._nUnregisteredDeviceProgress){var d=$("#unregisteredDeviceForm");d.find("input[name=accessUrl]").val(h.accessUrl);d.find("input[name=sessionKey]").val(h.sessionKey);d.find("input[name=phoneNo]").val(h.phoneNo);d.find("input[name=countryCode]").val(h.countryCode);d.find("input[name=serviceCode]").val(h.serviceCode);d.find("input[name=language]").val(h.language);d.find("input[name=phoneNoForView]").val(h.phoneNoForView);d.find("input[name=phoneIntegrateType]").val("unregistered_device");d.attr("action",h.nextUrl).submit()}else{if(h.code==b._nOtherLoginOver90Days){var e=$("#otherLoginLastLoginForm");e.find("input[name=accessUrl]").val(h.accessUrl);e.find("input[name=phoneNo]").val(h.phoneNo);e.find("input[name=countryCode]").val(h.countryCode);e.find("input[name=phoneNoForView]").val(h.phoneNoForView);e.find("input[name=serviceCode]").val(h.serviceCode);e.find("input[name=language]").val(h.language);e.find("input[name=fidoRegisterEnabled]").val(h.fidoRegisterEnabled);e.find("input[name=phoneIntegrateType]").val("over_90_days_re_auth");e.attr("action",h.nextUrl).submit()}else{if(h.code==b._nOtherLoginNotConnected){var c=$("#phoneLoginConnectForm");c.find("input[name=redirectUrl]").val(h.accessUrl);c.find("input[name=deviceId]").val(h.deviceId);c.find("input[name=serviceCode]").val(h.serviceCode);c.find("input[name=language]").val(h.language);c.find("input[name=phoneIntegrateType]").val("after_login_connect");c.attr("action",h.nextUrl).submit()}else{if(g=="mobile_profile"){worksAuth.didFinishConnect2StepVerify(false)}window.close()}}}}}}}}},error:function(c,e,d){window.close()}})}catch(a){window.close()}}};TwoStepLogin=function(){this.init.apply(this,arguments)};TwoStepLogin.prototype={_oTwoStepLogin:"",_bIsPhoneLogin:"",_domainUsePhoneLogin:"",_sDisplayEmail:"",_sDisplayPhoneNumber:"",_bDomainUseOrgSync:false,_bNeedBlockLayer:false,_bReadOnly:false,_bNeedRegister:false,_sTwoStepLoginRegister:"twostep_login_register",_sTwoStepLoginRegisterWebSecurity:"twostep_login_register_web_security",_sTwoStepLoginRegisterMobileSecurity:"twostep_login_register_mobile_security",_sTwoStepLoginRegisterType:"",_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidPrivateEmail:13,_nInvalidPhoneNumber:14,_nNotExistMember:21,_nSmsExceedDailyMaxCount:35,_nSmsExceed15MCountErrorCode:39,_nOverSendMailCount:40,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nLoginSessionExpired:90,_nNotExistAuthenticationInfo:91,_nUnexpectedError:99,init:function(b,f,a,e,h,c,d){var g=this;g._oTwoStepLogin=b;g._bIsPhoneLogin=f;g._sDisplayEmail=a;g._sDisplayPhoneNumber=e;g._bDomainUseOrgSync=h;g._bNeedBlockLayer=c;g._bNeedRegister=d;g._initPrivateEmailAndPhoneNo();g._attachEvent()},_attachEvent:function(){var a=this;$("#privateEmailButton").on("click",function(){a._sendAuthNoToEmail()});$("#phoneNumberButton").on("click",function(){a._sendAuthNoToMobile()});$("#securityClose").on("click",function(){worksAuth.didFinishSecurityAuthentication(false)});if(a._oTwoStepLogin.twoStepLoginUsage=="web_security"){a._sTwoStepLoginRegisterType=a._sTwoStepLoginRegisterWebSecurity}else{if(a._oTwoStepLogin.twoStepLoginUsage=="mobile_security"){a._sTwoStepLoginRegisterType=a._sTwoStepLoginRegisterMobileSecurity}else{a._sTwoStepLoginRegisterType=a._sTwoStepLoginRegister}}a._getEl("_phoneNumberRegister").on("click",function(){var b=$("#phoneNumberRegister");b.find("input[name=phoneIntegrateType]").val(a._sTwoStepLoginRegisterType);b.attr("action","/phone/auth/view").submit()});a._getEl("_privateEmailRegister").on("click",function(){var b=$("#privateEmailRegister");b.find("input[name=emailIntegrateType]").val(a._sTwoStepLoginRegisterType);b.attr("action","/private-email/auth/view").submit()})},_getEl:function(a){return $("#content ."+a)},_initPrivateEmailAndPhoneNo:function(){var a=this;if(a._bNeedBlockLayer){return}if(a._bDomainUseOrgSync){a._bReadOnly=true}if(a._bIsPhoneLogin){if(a._bNeedRegister){a._showPrivateEmailRegisterLayer();return}if(a._sDisplayEmail){a._getEl("_twoStepLoginProcess").attr("style","");a._showPrivateEmailLayer()}else{if(!a._bReadOnly){a._showPrivateEmailRegisterLayer()}}}else{if(a._bNeedRegister){a._showPhoneNumberRegisterLayer();a._showPrivateEmailRegisterLayer();return}if(a._sDisplayEmail==""&&a._sDisplayPhoneNumber==""){a._showPhoneNumberRegisterLayer();a._showPrivateEmailRegisterLayer()}else{a._getEl("_twoStepLoginProcess").attr("style","");if(a._sDisplayEmail){a._showPrivateEmailLayer()}else{if(!a._bReadOnly){a._showPrivateEmailRegisterLayer()}}if(a._sDisplayPhoneNumber){a._showPhoneNumberLayer()}else{if(!a._bReadOnly){a._showPhoneNumberRegisterLayer()}}}}},_showPhoneNumberLayer:function(){var a=this;a._getEl("_phoneNumber").attr("class","_phoneNumber method sms");a._getEl("_phoneNumber").attr("style","");$("#phoneNumberButton").attr("disabled",false);$("#phoneNumber").text(a._oTwoStepLogin.countryCode+" "+a._sDisplayPhoneNumber)},_showPhoneNumberRegisterLayer:function(){var a=this;a._getEl("_phoneNumberRegister").attr("style","")},_showPrivateEmailLayer:function(){var a=this;a._getEl("_privateEmail").attr("class","_privateEmail method");a._getEl("_privateEmail").attr("style","");$("#privateEmailButton").attr("disabled",false);$("#privateEmail").text(a._sDisplayEmail)},_showPrivateEmailRegisterLayer:function(){var a=this;a._getEl("_privateEmailRegister").attr("style","")},_sendAuthNoToEmail:function(){var a=this;$.ajax({url:"/2step-login/auth/send/email",type:"POST",async:false,dataType:"json",data:({userIdNo:a._oTwoStepLogin.userIdNo,sessionKey:a._oTwoStepLogin.sessionKey}),success:function(c){if(c.code==0){var b=$("#twoStepLoginAuth");$(b).find("input[name=userIdNo]").val(a._oTwoStepLogin.userIdNo);$(b).find("input[name=redirectUrl]").val(a._oTwoStepLogin.redirectUrl);$(b).find("input[name=authKey]").val(c.authKey);$(b).find("input[name=sessionKey]").val(a._oTwoStepLogin.sessionKey);$(b).find("input[name=twoStepLoginUsage]").val(a._oTwoStepLogin.twoStepLoginUsage);$(b).find("input[name=displayEmail]").val(a._sDisplayEmail);$(b).find("input[name=displayPhoneNumber]").val(a._sDisplayPhoneNumber);$(b).find("input[name=isPhoneLogin]").val(a._bIsPhoneLogin);if(a._oTwoStepLogin.twoStepLoginUsage=="web_security"||a._oTwoStepLogin.twoStepLoginUsage=="mobile_security"){$(b).attr("action","/2step-login/auth/security/email").submit()}else{$(b).attr("action","/2step-login/auth/email").submit()}}else{if(c.code==a._nOverSendMailCount){alert(Message.OTP_VERIFY_03)}else{if(c.code==a._nLoginSessionExpired){alert(Message.TWO_STEP_LOGIN_3)}else{if(c.code==a._nNotExistAuthenticationInfo){alert(Message.TWO_STEP_LOGIN_5)}else{alert(Message.DEFAULT_ERROR_MESSAGE)}}}}},})},_sendAuthNoToMobile:function(){var a=this;$.ajax({url:"/2step-login/auth/send/phone",type:"POST",async:false,dataType:"json",data:({userIdNo:a._oTwoStepLogin.userIdNo,sessionKey:a._oTwoStepLogin.sessionKey}),success:function(c){if(c.code==0){var b=$("#twoStepLoginAuth");$(b).find("input[name=userIdNo]").val(a._oTwoStepLogin.userIdNo);$(b).find("input[name=redirectUrl]").val(a._oTwoStepLogin.redirectUrl);$(b).find("input[name=countryCode]").val(a._oTwoStepLogin.countryCode);$(b).find("input[name=authKey]").val(c.authKey);$(b).find("input[name=sessionKey]").val(a._oTwoStepLogin.sessionKey);$(b).find("input[name=twoStepLoginUsage]").val(a._oTwoStepLogin.twoStepLoginUsage);$(b).find("input[name=displayEmail]").val(a._sDisplayEmail);$(b).find("input[name=displayPhoneNumber]").val(a._sDisplayPhoneNumber);$(b).find("input[name=isPhoneLogin]").val(a._bIsPhoneLogin);if(a._oTwoStepLogin.twoStepLoginUsage=="web_security"||a._oTwoStepLogin.twoStepLoginUsage=="mobile_security"){$(b).attr("action","/2step-login/auth/security/phone").submit()}else{$(b).attr("action","/2step-login/auth/phone").submit()}}else{if(c.code==a._nSmsExceedDailyMaxCount){alert(Message.OTP_VERIFY_04)}else{if(c.code==a._nSmsExceed15MCountErrorCode){alert(Message.OTP_VERIFY_03)}else{if(c.code==a._nLoginSessionExpired){alert(Message.TWO_STEP_LOGIN_3)}else{if(c.code==a._nNotExistAuthenticationInfo){alert(Message.TWO_STEP_LOGIN_5)}else{alert(Message.DEFAULT_ERROR_MESSAGE)}}}}}},})},};TwoStepLoginAuth=function(){this.init.apply(this,arguments)};TwoStepLoginAuth.prototype={_sCountryCode:"",_sUserIdNo:"",_sSessionKey:"",_sTwoStepLoginUsage:"",_sAuthType:"",_sAuthKey:"",_sRedirectUrl:"",_bIsPhoneLogin:"",_sDomainId:"",_nExternalSSOMobileLogin:1,_nUnregisteredDeviceProgress:2,_nOtherLoginOver90Days:3,_nOtherLoginNotConnected:4,_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidPrivateEmail:13,_nInvalidPhoneNumber:14,_nInvalidIdOrPassword:20,_nNotExistMember:21,_nLoginStopUser:22,_nFailLoginAppBlockedUser:27,_nSmsExceedDailyMaxCount:35,_nAuthNumberIsInvalid:36,_nAuthNumberSessionExpired:37,_nSmsAuthNoIsNotValid:38,_nSmsExceed15MCountErrorCode:39,_nOverSendMailCount:40,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nNoServiceAuth:54,_nThirdPartyMdmOtherDomainLoginRestricted:55,_nUnavailableDomain:72,_nUnavailableDomain2:75,_nUnavailableDomain3:76,_nUnavailableDomain4:78,_nLoginSessionExpired:90,_nUnexpectedError:99,_nOngoingProductUpdate:140,_nDomainChangeName:141,_nAbuser:998,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",_sTWOSTEP_LOGIN_VIEW:"/2step-login/view",_sTWOSTEP_LOGIN_SECURITY_VIEW:"/2step-login/security/view",_SELECTED_TYPE_KEY:"selectedLoginType",_aEventQueue:new Array(),LEFT_ARROW_KEY:37,RIGHT_ARROW_KEY:39,UP_ARROW_KEY:38,DOWN_ARROW_KEY:40,BACKSPACE_KEY:8,ENTER_KEY_CODE:13,init:function(i,g,d,f,j,e,c,b,a){var h=this;h._sCountryCode=g;h._sUserIdNo=d;h._sSessionKey=f;h._sTwoStepLoginUsage=j;h._sAuthType=i;h._sAuthKey=e;h._sRedirectUrl=c;h._bIsPhoneLogin=b;h._sDomainId=a;h._attachEvent()},_attachEvent:function(){var a=this;$("._authNo").keydown(function(b){a._keydownProcess(b)});$("._authNo").on("keyup",function(b){a._checkAuthNo(b)});$("._authNo").on("click",function(b){b.stopPropagation();$(b.target).addClass("valid")}).focusout(function(b){b.stopPropagation();$(b.target).removeClass("valid")});$("#resendAuthNo").on("click",function(){a._reSendAuthNo()});$("#twoStepPrev").on("click",function(b){b.stopPropagation();b.preventDefault();a._goTwoStepLoginView()});$("._authNo").on("paste",function(b){a._pasteCatch(b)});$("._authNo").on("input",function(b){a._setCopyValue($(b.target))});$(".input_cover input, .number_cover input").on("focus",function(){$(this).parents("[class*='_cover']").addClass("focus")});$(".input_cover input, .number_cover input").on("focusout",function(){$(this).parents("[class*='_cover']").removeClass("focus")});$("#showLayer").on("click",function(){$("#noticeLayer").show()});$("#helpClose").on("click",function(){$("#noticeLayer").hide()});$("#verificationRequest").on("click",function(){a._sendVerificationRequestToAdmin()});$("#resendToastClose").on("click",function(){$("#resendToastLayer").hide()});$(document).click(function(c){var b=$(c.target);if(!b.hasClass("_showLayer")){if(b.closest("._noticeLayerInside").length<1){$("#noticeLayer").hide()}}});$("#goBack").on("click",function(){window.history.back()})},_getEl:function(a){return $("#wrap ."+a)},_goTwoStepLoginView:function(){var b=this;var a=$("#twoStepLogin");if(b._sTwoStepLoginUsage=="web_security"||b._sTwoStepLoginUsage=="mobile_security"){$(a).find("input[name=usage]").val(b._sTwoStepLoginUsage);$(a).find("input[name=redirectUrl]").val(b._sRedirectUrl);$(a).attr("action",b._sTWOSTEP_LOGIN_SECURITY_VIEW).submit()}else{$(a).find("input[name=usage]").val(b._sTwoStepLoginUsage);$(a).find("input[name=redirectUrl]").val(b._sRedirectUrl);$(a).find("input[name=userIdNo]").val(b._sUserIdNo);$(a).find("input[name=domainId]").val(b._sDomainId);$(a).find("input[name=sessionKey]").val(b._sSessionKey);$(a).find("input[name=isPhoneLogin]").val(b._bIsPhoneLogin);$(a).attr("action",b._sTWOSTEP_LOGIN_VIEW).submit()}},_keydownProcess:function(b){var a=$(b.target);var c=a.val().trim();c=c.replace(/[^0-9]/g,"");if(c===""){return}if(b.keyCode===this.LEFT_ARROW_KEY||b.keyCode===this.RIGHT_ARROW_KEY||b.keyCode===this.BACKSPACE_KEY){return}else{if(b.keyCode===this.DOWN_ARROW_KEY){if(c==0){a.val(0);b.stopPropagation()}return}else{if(b.keyCode===this.UP_ARROW_KEY){if(c==9){a.val(9);b.stopPropagation()}return}else{this._lengthCheck(a)}}}},_lengthCheck:function(a){if(a.attr("data-no")==="4"&&a.val().length>=1){a.attr("readonly",true)}if(a.val().length>=1){if(a.attr("data-selected")==="y"){a.attr("data-selected","n");return}this._nextAuthNo(a)}},_nextAuthNo:function(b){var a=b.attr("data-no");b.attr("data-selected","n");$("._authNo").each(function(){if(parseInt($(this).attr("data-no"))===parseInt(a)+1){if($(this).val()!==""){$(this).select()}else{$(this).focus()}return false}})},_selectOrFocus:function(a){if(a.val()==null||a.val()===""){a.focus();a.attr("data-selected","n")}else{a.select();a.attr("data-selected","y")}},_checkAuthNo:function(d){var g=this;var a=$(d.target);var c=parseInt(a.attr("data-no"));var f=a.val().trim();if(d.keyCode===this.LEFT_ARROW_KEY){if(c===1){return}this._selectOrFocus($("._authNo"+(c-1)));return}else{if(d.keyCode===this.RIGHT_ARROW_KEY){if(c===4){return}this._selectOrFocus($("._authNo"+(c+1)));return}else{if(d.keyCode===this.UP_ARROW_KEY){if(f>9){a.val(9)}return}else{if(d.keyCode===this.DOWN_ARROW_KEY){if(f<0){a.val(0)}return}else{if(d.keyCode===this.BACKSPACE_KEY){this._selectOrFocus($("._authNo"+(c-1)))}}}}}if(f==null||f===""){a.val("");return}this._hideFailElement();this._hideResendMessage();$("._authNo").each(function(){$(this).attr("readonly",false)});var b=this._makeAuthNo();if(b.length===4){if(this._pushQueue(b)){setTimeout(function(){g._processQueue()},200)}}else{if(a.attr("data-no")==="1"){a.focus()}this._nextAuthNo(a)}},_sendAuthNoToEmail:function(){var a=this;$.ajax({url:"/2step-login/auth/send/email",type:"POST",async:false,dataType:"json",data:({userIdNo:a._sUserIdNo,sessionKey:a._sSessionKey}),success:function(b){if(b.code==0){a._sAuthKey=b.authKey;setTimeout(function(){a._showResendMessage()},500)}else{if(b.code==a._nOverSendMailCount){alert(Message.OTP_VERIFY_03);a._goTwoStepLoginView()}else{if(b.code==a._nLoginSessionExpired){alert(Message.TWO_STEP_LOGIN_3)}else{alert(Message.DEFAULT_ERROR_MESSAGE);a._goTwoStepLoginView()}}}a._resetInput()},})},_sendAuthNoToMobile:function(){var a=this;$.ajax({url:"/2step-login/auth/send/phone",type:"POST",async:false,dataType:"json",data:({userIdNo:a._sUserIdNo,sessionKey:a._sSessionKey}),success:function(b){if(b.code==0){a._sAuthKey=b.authKey;setTimeout(function(){a._showResendMessage()},500)}else{if(b.code==a._nSmsExceedDailyMaxCount){alert(Message.OTP_VERIFY_04);a._goTwoStepLoginView()}else{if(b.code==a._nSmsExceed15MCountErrorCode){alert(Message.OTP_VERIFY_03);a._goTwoStepLoginView()}else{if(b.code==a._nLoginSessionExpired){alert(Message.TWO_STEP_LOGIN_3)}else{alert(Message.DEFAULT_ERROR_MESSAGE);a._goTwoStepLoginView()}}}}a._resetInput()},})},_reSendAuthNo:function(){var b=this;var a=b._sAuthType;b._hideResendMessage();if(a=="phone"){b._sendAuthNoToMobile()}else{b._sendAuthNoToEmail()}},_pasteCatch:function(f){if(oNweCommonUtils.isMsBrowser()==false){return}var j=f.originalEvent.clipboardData||window.clipboardData;if(j==null){return}var g=j.getData("Text");if(g===""||g==null){return}var b=parseInt($(f.target).attr("data-no"));var c=0;for(var d=b;d<g.length+b;d++){$("._authNo"+d).val(g.slice(c,++c).replace(/[^0-9]/g,""));this._addInputHighlight($("._authNo"+d));if(d===4){break}}this._hideFailElement();var a=this._makeAuthNo();if(a.length<4){f.preventDefault();return}var h=this;if(this._pushQueue(a)){setTimeout(function(){h._processQueue()},200)}},_setCopyValue:function(a){if(oNweCommonUtils.isMsBrowser()){return}var g=this;var c=a.val();if(c.length<2){return}a.val("");var f=parseInt(a.attr("data-no"));c=c.substr(0,4);var d=0;for(var e=f;e<c.length+f;e++){$("._authNo"+e).val(c.slice(d,++d).replace(/[^0-9]/g,""));if(g._bIsMobile===false){g._addInputHighlight($("._authNo"+e))}else{g._addInputHighlight($("._authNo"+e).parents("p"))}}if(c.length<4){$("._authNo"+(c.length+1)).focus()}this._hideFailElement();var b=g._makeAuthNo();if(b.length<4){return}if(this._pushQueue(b)){setTimeout(function(){g._processQueue()},200)}},_addInputHighlight:function(a){a.addClass("valid")},_hideFailElement:function(){$("#failMessage").hide();$(".number_cover").removeClass("invalid")},_showFailElement:function(a){$("#failMessage").text(a);$("#failMessage").show()},_showResendMessage:function(){$("#resendToastLayer").show();this._hideFailElement()},_hideResendMessage:function(){$("#resendToastLayer").hide()},_resetInput:function(){$("._authNo").val("");$("._authNo1").focus()},_makeAuthNo:function(){var a="";$("._authNo").each(function(){a+=$(this).val()});return a},_pushQueue:function(a){var b=this;if(b._aEventQueue.length===0){b._aEventQueue.push(a);return true}return false},_processQueue:function(){this._requestAuthNoCheck(this._aEventQueue.shift())},_requestAuthNoCheck:function(a){var d=this;var b="";var c={userIdNo:d._sUserIdNo,sessionKey:d._sSessionKey,authNo:a,authKey:d._sAuthKey,redirectUrl:d._sRedirectUrl,isPhoneLogin:d._bIsPhoneLogin};if(d._sTwoStepLoginUsage=="web_security"||d._sTwoStepLoginUsage=="mobile_security"){b="/2step-login/login/security/process/"+d._sAuthType;c.usage=d._sTwoStepLoginUsage}else{b="/2step-login/login/process/"+d._sAuthType}$("._authNo").prop("disabled",true);$.ajax({type:"post",async:false,url:b,data:c,success:function(i){$("._authNo").prop("disabled",false);if(i.code==0){if(i.twoStepLoginUsage=="web_login"||i.twoStepLoginUsage=="web_security"){sessionStorage.removeItem(d._SELECTED_TYPE_KEY);window.location.href=i.redirectUrl}if(i.twoStepLoginUsage=="mobile_login"){var j="/login/mSuccess?userIdNo="+i.userIdNo+"&domainId="+i.domainId+"&tenantId="+i.tenantId+"&email="+i.email+"&fidoRegisterEnabled="+i.fidoRegisterEnabled;if(i.useDomainAclYn){j+="&useDomainAclYn="+i.useDomainAclYn}if(i.domainAclListJson){j+="&domainAclList="+i.domainAclListJson}if(i.userIp){j+="&userIp="+i.userIp}window.location.href=j}else{if(i.twoStepLoginUsage=="mobile_security"){worksAuth.didFinishSecurityAuthentication(true)}else{if(i.twoStepLoginUsage=="first_auth_mail"){window.location.href="/password/completeJoinView"}}}}else{if(i.code==d._nExternalSSOMobileLogin){var h=$("#externalSSOMobile");$(h).find("input[name=keyForUrlScheme]").val(i.keyForUrlScheme);$(h).find("input[name=serviceCode]").val(i.serviceCode);$(h).find("input[name=appType]").val(i.appType);$(h).find("input[name=idcCode]").val(i.idcCode);$(h).attr("action","/login/external/view").submit()}else{if(i.code==d._nSmsAuthNoIsNotValid){$(".number_cover").addClass("invalid");d._showFailElement(Message.replaceParam(Message.OTP_VERIFY_02,i.failCount+"/"+i.maxFailCount))}else{if(i.code==d._nAuthNumberSessionExpired){$(".number_cover").addClass("invalid");d._showFailElement(Message.OTP_VERIFY_01)}else{if(i.code==d._nAuthNumberIsInvalid){$(".number_cover").addClass("invalid");d._showFailElement(Message.replaceParam(Message.OTP_VERIFY_02,i.failCount+"/"+i.maxFailCount))}else{if(i.code==d._nLoginSessionExpired){if(d._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+d._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=d._sRedirectUrl}}else{if(i.code==d._nLoginStopUser||i.code==d._nFailLoginAppBlockedUser||i.code==d._nNoServiceAuth||i.code==d._nThirdPartyMdmOtherDomainLoginRestricted||i.code==d._nUnavailableDomain||i.code==d._nUnavailableDomain2||i.code==d._nUnavailableDomain3||i.code==d._nUnavailableDomain4||i.code==d._nOngoingProductUpdate||i.code==d._nDomainChangeName||i.code==d._nAbuser||i.code==d._nInvalidIdOrPassword){if(d._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+i.returnMessageId}else{if(d._sTwoStepLoginUsage=="mobile_security"){worksAuth.didFinishSecurityAuthentication(false)}else{alert(i.returnMessage);window.location=d._sRedirectUrl}}}else{if(i.code==d._nUnregisteredDeviceProgress){var f=$("#unregisteredDeviceForm");f.find("input[name=redirectUrl]").val(i.accessUrl);f.find("input[name=sessionKey]").val(i.sessionKey);f.find("input[name=phoneNo]").val(i.phoneNo);f.find("input[name=countryCode]").val(i.countryCode);f.find("input[name=serviceCode]").val(i.serviceCode);f.find("input[name=phoneNoForView]").val(i.phoneNoForView);f.find("input[name=language]").val(i.language);f.find("input[name=phoneIntegrateType]").val("unregistered_device");f.attr("action",i.nextUrl).submit()}else{if(i.code==d._nOtherLoginOver90Days){var g=$("#otherLoginLastLoginForm");g.find("input[name=accessUrl]").val(i.accessUrl);g.find("input[name=phoneNo]").val(i.phoneNo);g.find("input[name=countryCode]").val(i.countryCode);g.find("input[name=phoneNoForView]").val(i.phoneNoForView);g.find("input[name=serviceCode]").val(i.serviceCode);g.find("input[name=language]").val(i.language);g.find("input[name=fidoRegisterEnabled]").val(i.fidoRegisterEnabled);g.find("input[name=phoneIntegrateType]").val("over_90_days_re_auth");g.attr("action",i.nextUrl).submit()}else{if(i.code==d._nOtherLoginNotConnected){var e=$("#phoneLoginConnectForm");e.find("input[name=accessUrl]").val(i.accessUrl);e.find("input[name=deviceId]").val(i.deviceId);e.find("input[name=serviceCode]").val(i.serviceCode);e.find("input[name=language]").val(i.language);e.find("input[name=phoneIntegrateType]").val("after_login_connect");e.attr("action",i.nextUrl).submit()}else{$("#failMessage").text(Message.DEFAULT_ERROR_MESSAGE);$("#failMessage").show()}}}}}}}}}}d._resetInput()}})},_sendVerificationRequestToAdmin:function(){var a=this;$.ajax({url:"/2step-login/send/verification-request",type:"POST",async:false,dataType:"json",data:({userIdNo:a._sUserIdNo,domainId:a._sDomainId}),success:function(b){if(b.code==0){alert(Message.TWO_STEP_LOGIN_6)}},})},};ThirdPartyTwoStepAuth=function(){this.init.apply(this,arguments)};ThirdPartyTwoStepAuth.prototype={_nExternalSSOMobileLogin:1,_nUnregisteredDeviceProgress:2,_nOtherLoginOver90Days:3,_nOtherLoginNotConnected:4,_nInvalidParameter:11,_nInvalidDomainId:12,_nInvalidPrivateEmail:13,_nInvalidPhoneNumber:14,_nInvalidIdOrPassword:20,_nNotExistMember:21,_nLoginStopUser:22,_nFailLoginAppBlockedUser:27,_nSmsExceedDailyMaxCount:35,_nAuthNumberIsInvalid:36,_nAuthNumberSessionExpired:37,_nSmsAuthNoIsNotValid:38,_nSmsExceed15MCountErrorCode:39,_nOverSendMailCount:40,_nDomainIsUsingUserSync:41,_nUserIsUsingPhoneLogin:51,_nNoServiceAuth:54,_nThirdPartyMdmOtherDomainLoginRestricted:55,_nUnavailableDomain:72,_nUnavailableDomain2:75,_nUnavailableDomain3:76,_nUnavailableDomain4:78,_nLoginSessionExpired:90,_nInvalidIdToken:92,_nUnexpectedError:99,_nOngoingProductUpdate:140,_nDomainChangeName:141,_nAbuser:998,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",_sTWOSTEP_LOGIN_VIEW:"/2step-login/view",_sTWOSTEP_LOGIN_SECURITY_VIEW:"/2step-login/security/view",_SELECTED_TYPE_KEY:"selectedLoginType",init:function(a){this._makeRedirection(a)},_makeRedirection:function(e){var f=JSON.parse(e);var h=this;if(f.code==0){if(f.twoStepLoginUsage=="web_login"||f.twoStepLoginUsage=="web_security"){window.location.href=f.redirectUrl;return}if(f.twoStepLoginUsage=="mobile_login"){var g="/login/mSuccess?userIdNo="+f.userIdNo+"&domainId="+f.domainId+"&tenantId="+f.tenantId+"&email="+f.email+"&fidoRegisterEnabled="+f.fidoRegisterEnabled;if(f.useDomainAclYn){g+="&useDomainAclYn="+f.useDomainAclYn}if(f.domainAclListJson){g+="&domainAclList="+f.domainAclListJson}if(f.userIp){g+="&userIp="+f.userIp}window.location.href=g}else{if(f.twoStepLoginUsage=="mobile_security"){worksAuth.didFinishSecurityAuthentication(true)}else{if(f.twoStepLoginUsage=="first_auth_mail"){window.location.href="/password/completeJoinView"}}}}else{if(f.code==h._nExternalSSOMobileLogin){var d=$("#externalSSOMobile");$(d).find("input[name=keyForUrlScheme]").val(f.keyForUrlScheme);$(d).find("input[name=serviceCode]").val(f.serviceCode);$(d).find("input[name=appType]").val(f.appType);$(d).find("input[name=idcCode]").val(f.idcCode);$(d).attr("action","/login/external/view").submit()}else{if(f.code==h._nLoginSessionExpired){if(h._sTwoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+h._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=f.redirectUrl}}else{if(f.code==h._nInvalidIdToken){if(f.twoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+f.returnMessageId}else{if(f.twoStepLoginUsage=="mobile_security"){worksAuth.didFinishSecurityAuthentication(false)}else{alert(f.message);window.location=f.redirectUrl}}}else{if(f.code==h._nLoginStopUser||f.code==h._nFailLoginAppBlockedUser||f.code==h._nNoServiceAuth||f.code==h._nThirdPartyMdmOtherDomainLoginRestricted||f.code==h._nUnavailableDomain||f.code==h._nUnavailableDomain2||f.code==h._nUnavailableDomain3||f.code==h._nUnavailableDomain4||f.code==h._nOngoingProductUpdate||f.code==h._nDomainChangeName||f.code==h._nAbuser||f.code==h._nInvalidIdOrPassword){if(f.twoStepLoginUsage=="mobile_login"){window.location="/login/mFail?message="+f.returnMessageId}else{if(f.twoStepLoginUsage=="mobile_security"){worksAuth.didFinishSecurityAuthentication(false)}else{alert(f.returnMessage);window.location=f.redirectUrl}}}else{if(f.code==h._nUnregisteredDeviceProgress){var b=$("#unregisteredDeviceForm");b.find("input[name=redirectUrl]").val(f.accessUrl);b.find("input[name=sessionKey]").val(f.sessionKey);b.find("input[name=phoneNo]").val(f.phoneNo);b.find("input[name=countryCode]").val(f.countryCode);b.find("input[name=serviceCode]").val(f.serviceCode);b.find("input[name=phoneNoForView]").val(f.phoneNoForView);b.find("input[name=language]").val(f.language);b.find("input[name=phoneIntegrateType]").val("unregistered_device");b.attr("action",f.nextUrl).submit()}else{if(f.code==h._nOtherLoginOver90Days){var c=$("#otherLoginLastLoginForm");c.find("input[name=accessUrl]").val(f.accessUrl);c.find("input[name=phoneNo]").val(f.phoneNo);c.find("input[name=countryCode]").val(f.countryCode);c.find("input[name=phoneNoForView]").val(f.phoneNoForView);c.find("input[name=serviceCode]").val(f.serviceCode);c.find("input[name=language]").val(f.language);c.find("input[name=fidoRegisterEnabled]").val(f.fidoRegisterEnabled);c.find("input[name=phoneIntegrateType]").val("over_90_days_re_auth");c.attr("action",f.nextUrl).submit()}else{if(f.code==h._nOtherLoginNotConnected){var a=$("#phoneLoginConnectForm");a.find("input[name=accessUrl]").val(f.accessUrl);a.find("input[name=deviceId]").val(f.deviceId);a.find("input[name=serviceCode]").val(f.serviceCode);a.find("input[name=language]").val(f.language);a.find("input[name=phoneIntegrateType]").val("after_login_connect");a.attr("action",f.nextUrl).submit()}else{alert(f.errorMessage);location.href=f.redirectUrl}}}}}}}}}};UnregisteredDeviceName=function(){this.init.apply(this,arguments)};UnregisteredDeviceName.prototype={_failCount:0,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",_NAME_CHECK_FAIL_10_TIMES:"unregistered.device.message.37",init:function(){this._attachEvent();this._hideClearButton($("._lastNameClearBtn"),$("._lastNameInput"));this._hideClearButton($("._firstNameClearBtn"),$("._firstNameInput"))},_attachEvent:function(){var a=this;$("._lastNameClearBtn").click(function(){a._clearInput($("._lastNameInput"));a._hideClearButton($("._lastNameClearBtn"),$("._lastNameInput"))});$("._lastNameInput").keyup(function(){a._showClearButton($("._lastNameClearBtn"),$("._lastNameInput"));a._hideClearButton($("._lastNameClearBtn"),$("._lastNameInput"));if(a._valid(false)){a._clearFailMessage()}});$("._firstNameClearBtn").click(function(){a._clearInput($("._firstNameInput"));a._hideClearButton($("._firstNameClearBtn"),$("._firstNameInput"))});$("._firstNameInput").keyup(function(){a._showClearButton($("._firstNameClearBtn"),$("._firstNameInput"));a._hideClearButton($("._firstNameClearBtn"),$("._firstNameInput"));if(a._valid(false)){a._clearFailMessage()}});$("._confirm").click(function(){a._confirm()})},_clearFailMessage:function(){var a=$("._lastNameInput").val();var b=$("._firstNameInput").val();if(a.length>0&&b.length>0){this._hideInvalidMessage()}},_clearInput:function(a){a.val("");a.focus()},_confirm:function(){this._hideInvalidMessage();if(this._valid(true)){this._checkUserName()}},_valid:function(b){if(($("._lastNameInput").val()==""||$("._lastNameInput").val()==null)&&($("._firstNameInput").val()==""||$("._firstNameInput").val()==null)){if(b){alert(Message.UNREGISTERED_DEVICE_03)}this._showInvalidMessage(Message.UNREGISTERED_DEVICE_39);return false}var c=$("._lastNameInput").val()+$("._firstNameInput").val();if(c.length>80){if(b){alert(Message.UNREGISTERED_DEVICE_03)}this._showInvalidMessage(Message.replaceParam(Message.UNREGISTERED_DEVICE_37,c.length));return false}var a="!@&()-_+[]{},./";if(oNweCommonUtils.isContainSpecialChar($("._lastNameInput").val(),a)){if(b){alert(Message.UNREGISTERED_DEVICE_03)}this._showInvalidMessage(Message.UNREGISTERED_DEVICE_38);return false}if(oNweCommonUtils.isContainSpecialChar($("._firstNameInput").val(),a)){if(b){alert(Message.UNREGISTERED_DEVICE_03)}this._showInvalidMessage(Message.UNREGISTERED_DEVICE_38);return false}return true},_hideClearButton:function(a,b){if(b.val()==""||b.val()==null){a.hide()}},_showClearButton:function(a,b){if(b.val()!=null&&b.val()!=""){a.show()}},_hideInvalidMessage:function(){$("._failMessage").hide()},_showInvalidMessage:function(a){$("._failMessage").html(a);$("._failMessage").show()},_checkUserName:function(){var a=this;$.ajax({type:"post",async:false,url:"/unregistered/devices/auth/name/check",data:{sessionKey:$("._sessionKey").val(),lastName:$("._lastNameInput").val(),firstName:$("._firstNameInput").val()},success:function(b){if(b.code=="00"){var c="/login/mSuccess?userIdNo="+b.userIdNo+"&domainId="+b.domainId+"&tenantId="+b.tenantId+"&email="+b.email+"&fidoRegisterEnabled="+b.fidoRegisterEnabled;if(b.useDomainAclYn){c+="&useDomainAclYn="+b.useDomainAclYn}if(b.domainAclListJson){c+="&domainAclList="+b.domainAclListJson}if(b.userIp){c+="&userIp="+b.userIp}window.location.href=c}else{if(b.code=="30"){alert(Message.UNREGISTERED_DEVICE_03);a._showInvalidMessage(Message.UNREGISTERED_DEVICE_38)}else{if(b.code=="31"){a._failCount++;if(a._failCount==10){alert(Message.UNREGISTERED_DEVICE_05);a._failCount=0;window.location="/login/mFail?message="+a._NAME_CHECK_FAIL_10_TIMES}else{alert(Message.UNREGISTERED_DEVICE_04);a._hideInvalidMessage()}}else{window.location="/login/mFail?message="+a._SESSION_EXPIRED_MESSAGE_ID}}}}})}};AgreeJpAllUser=function(){this.init.apply(this,arguments)};AgreeJpAllUser.prototype={_sClientType:"",_sAuthUrl:"",_bIsMobileApp:false,_bIsPcApp:false,init:function(c,b,a,d){var e=this;e._sClientType=c;e._sAuthUrl=b;e._bIsMobileApp=a;e._bIsPcApp=d;e._attachEvent()},_attachEvent:function(){var a=this;$("#btnAgree").on("click",function(){a._agree()});$("#btnDisagree").on("click",function(){a._disagree()});$("#btnDetail").on("click",function(){a._showDetail()})},_agree:function(){var a=this;$.ajax({url:"/agree/jpalluser/"+a._sClientType,type:"POST",async:false,dataType:"json",data:null,success:function(b){if(b.code==0){a._close()}else{if(b.code==11){a._disagree()}else{if(b.code==21){alert(Message.AGREEJPALLUSER_MSG_1);a._close()}else{alert(Message.DEFAULT_ERROR_MESSAGE)}}}},error:function(){alert(Message.DEFAULT_ERROR_MESSAGE)}})},_disagree:function(){var a=this;if(a._bIsMobileApp||a._bIsPcApp){location.href="http://logout"}else{parent.postMessage({action:"GNB_LOGOUT"},"*")}},_showDetail:function(){var a=this;if(a._bIsMobileApp){oneapp.openBrowser("https://docs.worksmobile.com/lw-login-pu-terms")}else{window.open("https://docs.worksmobile.com/lw-login-pu-terms")}},_close:function(){var a=this;if(a._bIsMobileApp||a._bIsPcApp){location.href="http://close"}else{parent.postMessage({action:"GNB_CLOSE_COMMON_PROMOTION_LAYER"},"*")}}};PhoneIntegrate=function(){this.init.apply(this,arguments)};PhoneIntegrate.prototype={_bIsUseMobileLoginPage:true,_bIsFromLinkPage:false,_bIsAuthenticationMessage:false,_sPhoneIntegrateType:"",_sServiceCode:"",_sUsageCode:"",_sAccessUrl:"",_sDeviceId:"",_sRequestedPhoneNo:"",_sRequestedCountryCode:"",_sForceConnectSessionKey:"",_nExternalSSOMobileLogin:1,_nOtherLoginNotConnected:4,_nInvalidPhoneNumber:14,_nInvalidPhoneFormat:22,_nAuthNumberSessionExpired:23,_nAuthNumberIsInvalid:25,_nSmsDailyQuotaOver:27,_nSmsMinQuotaOver:28,_nSmsUuidQuotaOver:29,_nLoginSessionExpired:10,_nDomainPhoneExternalAuthOff:32,_nMemberPhoneExternalAuthOff:33,_nDomainPhoneLoginAuthOff:34,_nAlreadyUsingPhone:90,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",_sUsageWebProfile:"web_profile",_sUsageMobileProfile:"mobile_profile",_sUsageWebTalk:"web_talk",_sUsageMobileTalk:"mobile_talk",_sUsagePcTalk:"pc_talk",_sUsageMobileExtPhoneSearch:"mobile_ext_phone_search",_sUsageWebExtPhoneSearch:"web_ext_phone_search",_sPhoneIntegrateTypeExternalUserLink:"external_user_link",_sOver90DaysReAuth:"over_90_days_re_auth",_sUnregisteredDevice:"unregistered_device",_sTwoStepLoginRegister:"twostep_login_register",_sTwoStepLoginRegisterWebSecurity:"twostep_login_register_web_security",_sTwoStepLoginRegisterMobileSecurity:"twostep_login_register_mobile_security",init:function(a){var b=this;b._bIsUseMobileLoginPage=a.isUseMobileLoginPage;b._bIsFromLinkPage=a.isFromLinkPage;b._bIsAuthenticationMessage=a.isAuthenticationMessage;b._sPhoneIntegrateType=a.phoneIntegrateType;b._sServiceCode=a.serviceCode;b._sUsageCode=a.usageCode;b._sAccessUrl=a.accessUrl;b._sDeviceId=a.deviceId;$("._previewBtn").hide();$("._closeBtn").hide();if(b._bIsFromLinkPage){if(b._bIsUseMobileLoginPage==false){b._sAccessUrl=b._getUrlParam("redirectUrl")}else{$("._closeBtn").show();$("._closeBtn").click(function(){location.href="http://close"})}}else{if(b._bIsUseMobileLoginPage===true){if(b._sPhoneIntegrateType===b._sOver90DaysReAuth||b._sPhoneIntegrateType===b._sUnregisteredDevice||b._sPhoneIntegrateType===b._sTwoStepLoginRegister||b._sPhoneIntegrateType===b._sTwoStepLoginRegisterWebSecurity||b._sPhoneIntegrateType===b._sTwoStepLoginRegisterMobileSecurity){$("._previewBtn").show();$("._previewBtn").click(function(){b._back()})}}}if(b._sPhoneIntegrateType===b._sPhoneIntegrateTypeExternalUserLink){$("._externalPhoneSearch").attr("checked",true).attr("disabled",true)}b._attachEvent()},_attachEvent:function(){var a=this;$("._phoneInput").keyup(function(){if(a._validPhoneNo()){a._hideFailMessage()}});$("._sendAuthNo").click(function(){a._sendAuthNoToMobile(false)});$("._resendAuthNo").click(function(){a._sendAuthNoToMobile(true)});$("._check").click(function(){a._check()});$("#selectedCountry").on("click",function(){$(this).toggleClass("open")});$("#tooltip").on("click",function(){$(this).toggleClass("open")});$("#tooltipClose").on("click",function(){$("#tooltip").toggleClass("open")});$(".country-select").on("click",function(c){c.preventDefault();var d=$(this).find(".name").text();var b=$(this).find(".code").text();$("#selectedCountry").text(d).attr("data-countryCode",b).toggleClass("open");$(".country-select.selected").removeClass("selected");$(this).addClass("selected")});$(document).click(function(b){if(!$("#selectedCountry").is(b.target)){$("#selectedCountry").removeClass("open")}});$("#connectCancel").click(function(){$("#phoneAlreadyUseLayer").attr("style","display:none;")});$("#connectConfirm").click(function(){var b=$('input:radio[name="using_number"]:checked').val();if(b==="force_update"){a._forceUpdatePhoneNo()}else{a._refresh()}});$("._passConnect").click(function(){a._passConnect()});$("#mobileForceConnect").click(function(){a._forceUpdatePhoneNo()});$("#mobileEnterAnother").click(function(){a._refresh()})},_switchBtn:function(){$("._sendAuthNo").hide();$("._resendAuthNo").show()},_isEmpty:function(a){return a.val()==null||a.val()==""},_validPhoneNo:function(){if($("._phoneInput").val()==null||$("._phoneInput").val()==""){this._showFailMessage(Message.UNREGISTERED_DEVICE_22);$("._phoneInput").focus();return false}var b=new RegExp("[^0-9|-]");var a=this._convertToHalfWidth($("._phoneInput").val());a=a.replace(/^\s+|\s+$/g,"");if(a==null||a==""){this._showFailMessage(Message.UNREGISTERED_DEVICE_22);$("._phoneInput").focus();return false}if(b.test(a)){this._showFailMessage(Message.UNREGISTERED_DEVICE_21);return false}if(a.length>24){this._showFailMessage(Message.UNREGISTERED_DEVICE_21);return false}this._hideFailMessage();return true},_showFailMessage:function(a){$("._invalidMessageForPhone").text(a);$("._invalidMessageForPhone").show();$("._inputCoverForPhone").addClass("invalid")},_hideFailMessage:function(){$("._invalidMessageForPhone").hide();$("._inputCoverForPhone").removeClass("invalid")},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_sendAuthNoToMobile:function(e){if(this._validPhoneNo()==false){return false}var a=this._convertToHalfWidth($("._phoneInput").val());a=a.replace(/^\s+|\s+$/g,"");if(e==false){this._switchBtn()}if(e){$("._authNoInput").val("")}var c=$("#selectedCountry").attr("data-countryCode");var f=this;var b;var d={countryCode:c,phoneNo:a,phoneIntegrateType:f._sPhoneIntegrateType};if(f._sPhoneIntegrateType==f._sTwoStepLoginRegister||f._sPhoneIntegrateType===f._sTwoStepLoginRegisterWebSecurity||f._sPhoneIntegrateType===f._sTwoStepLoginRegisterMobileSecurity){d.sessionKey=$("._sessionKey").val();b="/phone/auth/send/sms"}else{b="/phone/integrate/send/sms"}$.ajax({type:"POST",async:false,url:b,data:d,success:function(g){if(g.code=="00"){$("._authNoSessionKey").val(g.authNoSessionKey);$("._sentAuthNoYn").val("Y");$("._authNoInput").focus();f._sRequestedPhoneNo=a;f._sRequestedCountryCode=c;f._hideFailElement()}else{if(g.code==f._nSmsDailyQuotaOver){f._sRequestedPhoneNo=a;f._sRequestedCountryCode=c;alert(Message.UNREGISTERED_DEVICE_24)}else{if(g.code==f._nSmsMinQuotaOver){f._sRequestedPhoneNo=a;f._sRequestedCountryCode=c;alert(Message.UNREGISTERED_DEVICE_23)}else{if(g.code==f._nSmsUuidQuotaOver){f._sRequestedPhoneNo=a;f._sRequestedCountryCode=c;alert(Message.PHONE_CONNECT_1)}else{if(g.code==f._nInvalidPhoneFormat){f._showFailMessage(Message.UNREGISTERED_DEVICE_21);$("._phoneInput").focus();return false}else{alert(Message.DEFAULT_ERROR_MESSAGE)}}}}}},})},_showFailElement:function(a){$("#failMessage").text(a);$("#failMessage").show();$("._inputCoverForAuthNo").addClass("invalid")},_hideFailElement:function(){$("#failMessage").hide();$("._inputCoverForAuthNo").removeClass("invalid")},_passConnect:function(){var a=this;$.ajax({type:"post",async:false,url:"/phone/integrate/connect/skip",data:{deviceId:a._sDeviceId,serviceCode:a._sServiceCode},success:function(b){if(b.code=="00"){if(a._bIsUseMobileLoginPage==true){var d=false;if(b.fidoRegisterEnabled){d=b.fidoRegisterEnabled}var c="/login/mSuccess?userIdNo="+b.userIdNo+"&domainId="+b.domainId+"&tenantId="+b.tenantId+"&email="+b.email+"&fidoRegisterEnabled="+d;window.location.href=c}else{window.location.href=a._sAccessUrl}}else{a._showFailElement(Message.DEFAULT_ERROR_MESSAGE)}}})},_refresh:function(){$("._refreshForm").attr("action","/phone/integrate/connect/view");$("._refreshForm").submit()},_check:function(){if(this._validPhoneNo()==false){return false}if($("._authNoInput").val()==null||$("._authNoInput").val()==""){this._showFailElement(Message.UNREGISTERED_DEVICE_18);$("._authNoInput").focus();return false}if($("._sentAuthNoYn").val()!=="Y"){this._showFailElement(Message.UNREGISTERED_DEVICE_25);$("._authNoInput").focus();return false}this._requestAuthNoCheck($("._authNoInput").val())},_requestAuthNoCheck:function(b){var f=this;var d=$("#selectedCountry").attr("data-countryCode");var a=f._convertToHalfWidth($("._phoneInput").val());a=a.replace(/^\s+|\s+$/g,"");if(f._sRequestedPhoneNo!=a||f._sRequestedCountryCode!=d){f._showFailMessage(Message.PHONE_CONNECT_2);return}var c;var e={countryCode:d,phoneNo:a,phoneIntegrateType:f._sPhoneIntegrateType,authNo:b,authNoSessionKey:$("._authNoSessionKey").val(),serviceCode:f._sServiceCode};if(f._sPhoneIntegrateType==f._sTwoStepLoginRegister||f._sPhoneIntegrateType===f._sTwoStepLoginRegisterWebSecurity||f._sPhoneIntegrateType===f._sTwoStepLoginRegisterMobileSecurity){e.sessionKey=$("._sessionKey").val();c="/phone/auth/verify/check"}else{e.deviceId=f._sDeviceId;e.savePhoneNoYn=$("._savePhone").prop("checked")?"Y":"N";e.externalPhoneSearchYn=$("._externalPhoneSearch").prop("checked")?"Y":"N";if(f._sPhoneIntegrateType==f._sUnregisteredDevice){e.sessionKey=$("._sessionKey").val()}c="/phone/integrate/verify/check"}$.ajax({type:"post",async:false,url:c,data:e,success:function(i){if(i.code=="00"||i.code=="0"){if(f._sPhoneIntegrateType==f._sTwoStepLoginRegister||f._sPhoneIntegrateType===f._sTwoStepLoginRegisterWebSecurity||f._sPhoneIntegrateType===f._sTwoStepLoginRegisterMobileSecurity){f._handlePhoneAuthSuccess(i)}else{if(f._bIsFromLinkPage){f._handleLinkPageSuccess()}else{f._handleLoginPageSuccess(i)}}}else{if(i.code==f._nAuthNumberSessionExpired){f._showFailElement(Message.OTP_VERIFY_01)}else{if(i.code==f._nAuthNumberIsInvalid){f._showFailElement(Message.replaceParam(Message.UNREGISTERED_DEVICE_28,i.failCount+"/"+i.maxFailCount))}else{if(i.code==f._nSmsDailyQuotaOver){f._hideFailElement();alert(Message.UNREGISTERED_DEVICE_24)}else{if(i.code==f._nSmsMinQuotaOver){f._hideFailElement();alert(Message.UNREGISTERED_DEVICE_23)}else{if(i.code==f._nSmsUuidQuotaOver){alert(Message.PHONE_CONNECT_1)}else{if(i.code==f._nAlreadyUsingPhone){f._hideFailElement();f._sForceConnectSessionKey=i.forceConnectSessionKey;$("#phoneAlreadyUseLayer").attr("style","display:block;")}else{if(i.code==f._nLoginSessionExpired){if(f._sPhoneIntegrateType==f._sTwoStepLoginRegister||f._sPhoneIntegrateType===f._sTwoStepLoginRegisterWebSecurity||f._sPhoneIntegrateType===f._sTwoStepLoginRegisterMobileSecurity){if(f._bIsUseMobileLoginPage==true){window.location="/login/mFail?message="+f._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=f._sAccessUrl}}else{window.location="/login/mFail?message="+f._SESSION_EXPIRED_MESSAGE_ID}}else{if(i.code==f._nDomainPhoneExternalAuthOff||i.code==f._nMemberPhoneExternalAuthOff||i.code==f._nDomainPhoneLoginAuthOff){f._hideFailElement();alert(i.message);if(f._sUsageCode===f._sUsageMobileExtPhoneSearch){location.href="http://close"}}else{if(i.code==f._nExternalSSOMobileLogin){var h=$("#externalSSOMobile");$(h).find("input[name=keyForUrlScheme]").val(i.keyForUrlScheme);$(h).find("input[name=serviceCode]").val(i.serviceCode);$(h).find("input[name=appType]").val(i.appType);$(h).find("input[name=idcCode]").val(i.idcCode);$(h).attr("action","/login/external/view").submit()}else{if(i.code==f._nInvalidPhoneNumber){f._showFailMessage(Message.UNREGISTERED_DEVICE_21);$("._phoneInput").focus()}else{if(i.code==f._nOtherLoginNotConnected){var g=$("#phoneLoginConnectForm");g.find("input[name=accessUrl]").val(i.accessUrl);g.find("input[name=deviceId]").val(i.deviceId);g.find("input[name=serviceCode]").val(i.serviceCode);g.find("input[name=language]").val(i.language);g.find("input[name=phoneIntegrateType]").val("after_login_connect");g.attr("action",i.nextUrl).submit()}else{f._showFailElement(Message.DEFAULT_ERROR_MESSAGE)}}}}}}}}}}}}}})},_forceUpdatePhoneNo:function(){var b=this;var a;a={};a.countryCode=$("#selectedCountry").attr("data-countryCode");a.phoneNo=$("._phoneInput").val();a.deviceId=b._sDeviceId;a.serviceCode=b._sServiceCode;a.savePhoneNoYn=$("._savePhone").prop("checked")?"Y":"N";a.externalPhoneSearchYn=$("._externalPhoneSearch").prop("checked")?"Y":"N";a.phoneIntegrateType=b._sPhoneIntegrateType;if(b._sPhoneIntegrateType==b._sUnregisteredDevice){a.sessionKey=$("._sessionKey").val()}a.forceConnectSessionKey=b._sForceConnectSessionKey;$.ajax({type:"post",async:false,url:"/phone/integrate/connect/force",data:a,success:function(c){if(c.code=="00"){if(b._bIsFromLinkPage){b._handleLinkPageSuccess()}else{b._handleLoginPageSuccess(c)}}else{b._showFailElement(Message.DEFAULT_ERROR_MESSAGE)}}})},_handleLinkPageSuccess:function(){var a=this;if(a._sUsageCode===a._sUsageMobileTalk){location.href="http://close"}else{if(a._sUsageCode===a._sUsageMobileProfile||a._sUsageCode===a._sUsageMobileExtPhoneSearch){worksAuth.linkOtherLogin("phone",true,null)}else{a._moveToRedirectUrl("")}}},_handleLoginPageSuccess:function(a){var d=this;if(d._bIsUseMobileLoginPage==true){var c=$("._fidoRegisterEnabled").val();if(c=="false"){c=a.fidoRegisterEnabled}var b="/login/mSuccess?userIdNo="+a.userIdNo+"&domainId="+a.domainId+"&tenantId="+a.tenantId+"&email="+a.email+"&fidoRegisterEnabled="+c;window.location.href=b}else{window.location.href=d._sAccessUrl}},_handlePhoneAuthSuccess:function(a){var c=this;if(a.twoStepLoginUsage=="web_login"||a.twoStepLoginUsage=="web_security"){sessionStorage.removeItem(c._SELECTED_TYPE_KEY);window.location.href=a.redirectUrl}if(a.twoStepLoginUsage=="mobile_login"){var b="/login/mSuccess?userIdNo="+a.userIdNo+"&domainId="+a.domainId+"&tenantId="+a.tenantId+"&email="+a.email+"&fidoRegisterEnabled="+a.fidoRegisterEnabled;if(a.useDomainAclYn){b+="&useDomainAclYn="+a.useDomainAclYn}if(a.domainAclListJson){b+="&domainAclList="+a.domainAclListJson}if(a.userIp){b+="&userIp="+a.userIp}window.location.href=b}else{if(a.twoStepLoginUsage=="mobile_security"){worksAuth.didFinishSecurityAuthentication(true)}}},_moveToRedirectUrl:function(a){var c=this;var b=c._sAccessUrl;if(b){$.get("/otherLogin/checkUrl",{accessUrl:decodeURIComponent(b)},function(d){if(d){var e="message="+encodeURIComponent(a);if(d.indexOf("?")>0){e="&"+e}else{e="?"+e}location.replace(d+e);return d}else{if(a){alert(a)}window.open("about:blank","_self").close()}})}else{if(a){alert(a)}window.open("about:blank","_self").close()}},_getUrlParam:function(a){var c=this._filter(window.location.href).replace(/</g,"&lt;").replace(/>/g,"&gt;");var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(c);if(b==null){return null}else{return decodeURI(b[1])||0}},_back:function(){var a=this;if(a._sPhoneIntegrateType===a._sTwoStepLoginRegister||a._sPhoneIntegrateType===a._sTwoStepLoginRegisterWebSecurity||a._sPhoneIntegrateType===a._sTwoStepLoginRegisterMobileSecurity){window.history.back()}else{$("._previewStepForm").submit()}},_filter:function(a){if(a.includes("worksmobile.com")==false&&a.includes("gov-naverworks.com")==false&&a.includes("navercorp.com")==false&&a.includes("ncpworkplace.com")==false&&a.includes("whalespace.io")==false){return""}else{return a}}};AuthSelect=function(){this.init.apply(this,arguments)};AuthSelect.prototype={_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",_bIsUseMobileLoginPage:"",_sUserIdNo:"",_sDomainId:"",_sTenantId:"",_sEmail:"",_sAccessUrl:"",_sPhoneIntegrateType:"",_sOver90DaysReAuth:"over_90_days_re_auth",_sUnregisteredDevice:"unregistered_device",init:function(b,c,a,d,i,e,h,f,g){this._bIsUseMobileLoginPage=b;this._sUserIdNo=c;this._sDomainId=a;this._sTenantId=d;this._sEmail=i;this._sAccessUrl=e;this._sServiceCode=h;this._bFidoRegisterEnabled=f;this._sPhoneIntegrateType=g;this._attachEvent()},_attachEvent:function(){var a=this;$("._usingPhone").click(function(){a._usingPhone()});$("._changedPhone").click(function(){a._changedPhone()});$("._passAuth").click(function(){a._passAuth()})},_usingPhone:function(){$("._nextStepForm").attr("action","/phone/integrate/reauth/verify/view");$("._nextStepForm").submit()},_changedPhone:function(){$("._nextStepForm").attr("action","/phone/integrate/connect/view");$("._nextStepForm").submit()},_passAuth:function(){var b=this;if(b._sPhoneIntegrateType===b._sOver90DaysReAuth){if(b._bIsUseMobileLoginPage===true){var a="/login/mSuccess?userIdNo="+b._sUserIdNo+"&domainId="+b._sDomainId+"&tenantId="+b._sTenantId+"&email="+b._sEmail+"&fidoRegisterEnabled="+b._bFidoRegisterEnabled;window.location.href=a}else{window.location.href=b._sAccessUrl}}else{if(b._sPhoneIntegrateType===b._sUnregisteredDevice){if(confirm(Message.UNREGISTERED_DEVICE_31+"\n"+Message.replaceParam(Message.UNREGISTERED_DEVICE_32,$("._phoneNoForView").val()))){$.ajax({type:"post",async:false,url:"/unregistered/devices/auth/pass",data:{sessionKey:$("._sessionKey").val()},success:function(c){if(c.code=="00"){var d="/login/mSuccess?userIdNo="+c.userIdNo+"&domainId="+c.domainId+"&tenantId="+c.tenantId+"&email="+c.email+"&fidoRegisterEnabled="+c.fidoRegisterEnabled;window.location.href=d}else{window.location="/login/mFail?message="+b._SESSION_EXPIRED_MESSAGE_ID}}})}}}}};ReAuthView=function(){this.init.apply(this,arguments)};ReAuthView.prototype={_aEventQueue:new Array(),_nAuthNumberSessionExpired:23,_nAuthNumberIsInvalid:25,_nSmsDailyQuotaOver:27,_nSmsMinQuotaOver:28,_nSmsUuidQuotaOver:29,_nLoginSessionExpired:10,LEFT_ARROW_KEY:37,RIGHT_ARROW_KEY:39,UP_ARROW_KEY:38,DOWN_ARROW_KEY:40,BACKSPACE_KEY:8,ENTER_KEY_CODE:13,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",_bIsUseMobileLoginPage:"",_sUserIdNo:"",_sDomainId:"",_sTenantId:"",_sEmail:"",_sAccessUrl:"",_sPhoneIntegrateType:"",init:function(b,c,a,d,i,e,h,f,g){this._bIsUseMobileLoginPage=b;this._sUserIdNo=c;this._sDomainId=a;this._sTenantId=d;this._sEmail=i;this._sAccessUrl=e;this._sServiceCode=h;this._bFidoRegisterEnabled=f;this._sPhoneIntegrateType=g;this._attachEvent()},_attachEvent:function(){var a=this;$("._authNo").keydown(function(b){a._keydownProcess(b)});$("._authNo").on("keyup",function(b){a._checkAuthNo(b)});$("._authNo").on("click",function(b){b.stopPropagation();$(b.target).addClass("valid")}).focusout(function(b){b.stopPropagation();$(b.target).removeClass("valid")});$("#resendAuthNo").on("click",function(){a._reSendAuthNo()});$("._authNo").on("paste",function(b){a._pasteCatch(b)});$("._authNo").on("input",function(b){a._setCopyValue($(b.target))});$(".input_cover input, .number_cover input").on("focus",function(){$(this).parents("[class*='_cover']").addClass("focus")});$(".input_cover input, .number_cover input").on("focusout",function(){$(this).parents("[class*='_cover']").removeClass("focus")});$("._previewBtn").click(function(){a._back()});$("#resendToastClose").on("click",function(){$("#resendToastLayer").hide()})},_showResendMessage:function(){$("#resendToastLayer").show();this._hideFailElement()},_hideResendMessage:function(){$("#resendToastLayer").hide()},_back:function(){$("._previewStepForm").submit()},_checkAuthNo:function(d){var g=this;var a=$(d.target);var c=parseInt(a.attr("data-no"));var f=a.val().trim();if(d.keyCode===this.LEFT_ARROW_KEY){if(c===1){return}this._selectOrFocus($("._authNo"+(c-1)));return}else{if(d.keyCode===this.RIGHT_ARROW_KEY){if(c===4){return}this._selectOrFocus($("._authNo"+(c+1)));return}else{if(d.keyCode===this.UP_ARROW_KEY){if(f>9){a.val(9)}return}else{if(d.keyCode===this.DOWN_ARROW_KEY){if(f<0){a.val(0)}return}else{if(d.keyCode===this.BACKSPACE_KEY){this._selectOrFocus($("._authNo"+(c-1)))}}}}}if(f==null||f===""){a.val("");return}this._hideFailElement();this._hideResendMessage();$("._authNo").each(function(){$(this).attr("readonly",false)});var b=this._makeAuthNo();if(b.length===4){if(this._pushQueue(b)){setTimeout(function(){g._processQueue()},200)}}else{if(a.attr("data-no")==="1"){a.focus()}this._nextAuthNo(a)}},_selectOrFocus:function(a){if(a.val()==null||a.val()===""){a.focus();a.attr("data-selected","n")}else{a.select();a.attr("data-selected","y")}},_pasteCatch:function(f){if(oNweCommonUtils.isMsBrowser()==false){return}var j=f.originalEvent.clipboardData||window.clipboardData;if(j==null){return}var g=j.getData("Text");if(g===""||g==null){return}var b=parseInt($(f.target).attr("data-no"));var c=0;for(var d=b;d<g.length+b;d++){$("._authNo"+d).val(g.slice(c,++c).replace(/[^0-9]/g,""));this._addInputHighlight($("._authNo"+d));if(d===4){break}}this._hideFailElement();var a=this._makeAuthNo();if(a.length<4){f.preventDefault();return}var h=this;if(this._pushQueue(a)){setTimeout(function(){h._processQueue()},200)}},_keydownProcess:function(b){var a=$(b.target);var c=a.val().trim();c=c.replace(/[^0-9]/g,"");if(c===""){return}if(b.keyCode===this.LEFT_ARROW_KEY||b.keyCode===this.RIGHT_ARROW_KEY||b.keyCode===this.BACKSPACE_KEY){return}else{if(b.keyCode===this.DOWN_ARROW_KEY){if(c==0){a.val(0);b.stopPropagation()}return}else{if(b.keyCode===this.UP_ARROW_KEY){if(c==9){a.val(9);b.stopPropagation()}return}else{this._lengthCheck(a)}}}},_lengthCheck:function(a){if(a.attr("data-no")==="4"&&a.val().length>=1){a.attr("readonly",true)}if(a.val().length>=1){if(a.attr("data-selected")==="y"){a.attr("data-selected","n");return}this._nextAuthNo(a)}},_nextAuthNo:function(b){var a=b.attr("data-no");b.attr("data-selected","n");$("._authNo").each(function(){if(parseInt($(this).attr("data-no"))===parseInt(a)+1){if($(this).val()!==""){$(this).select()}else{$(this).focus()}return false}})},_setCopyValue:function(a){if(oNweCommonUtils.isMsBrowser()){return}var g=this;var c=a.val();if(c.length<2){return}a.val("");var f=parseInt(a.attr("data-no"));c=c.substr(0,4);var d=0;for(var e=f;e<c.length+f;e++){$("._authNo"+e).val(c.slice(d,++d).replace(/[^0-9]/g,""));if(g._bIsMobile===false){g._addInputHighlight($("._authNo"+e))}else{g._addInputHighlight($("._authNo"+e).parents("p"))}}if(c.length<4){$("._authNo"+(c.length+1)).focus()}this._hideFailElement();var b=g._makeAuthNo();if(b.length<4){return}if(this._pushQueue(b)){setTimeout(function(){g._processQueue()},200)}},_addInputHighlight:function(a){a.addClass("valid")},_hideFailElement:function(){$("#failMessage").hide();$(".number_cover").removeClass("invalid")},_makeAuthNo:function(){var a="";$("._authNo").each(function(){a+=$(this).val()});return a},_pushQueue:function(a){if(this._aEventQueue.length===0){this._aEventQueue.push(a);return true}return false},_processQueue:function(){this._requestAuthNoCheck(this._aEventQueue.shift())},_reSendAuthNo:function(){var a=this;a._hideResendMessage();a._sendAuthNoToMobile();$("#resendToastLayer").show()},_sendAuthNoToMobile:function(){var a=this;$.ajax({url:"/phone/integrate/send/sms",type:"POST",async:false,dataType:"json",data:{countryCode:$("._countryCode").val(),phoneNo:$("._phoneNo").val(),phoneIntegrateType:a._sPhoneIntegrateType},success:function(b){if(b.code=="00"){$("._authNoSessionKey").val(b.authNoSessionKey);a._showResendMessage()}else{if(b.code==a._nSmsDailyQuotaOver){alert(Message.OTP_VERIFY_04)}else{if(b.code==a._nSmsMinQuotaOver){alert(Message.OTP_VERIFY_03)}else{if(b.code==a._nSmsUuidQuotaOver){alert(Message.PHONE_CONNECT_1)}else{alert(Message.DEFAULT_ERROR_MESSAGE)}}}}a._resetInput()},})},_requestAuthNoCheck:function(a){var b=this;$("._authNo").prop("disabled",true);$.ajax({type:"post",async:false,url:"/phone/integrate/reauth/verify/check",data:{sessionKey:$("._sessionKey").val(),authNo:a,authNoSessionKey:$("._authNoSessionKey").val(),countryCode:$("._countryCode").val(),phoneNo:$("._phoneNo").val(),phoneIntegrateType:b._sPhoneIntegrateType,serviceCode:b._sServiceCode},success:function(c){$("._authNo").prop("disabled",false);if(c.code=="00"){if(b._bIsUseMobileLoginPage===true){var e=false;if(c.fidoRegisterEnabled){e=c.fidoRegisterEnabled}else{e=b._bFidoRegisterEnabled}var d="/login/mSuccess?userIdNo="+c.userIdNo+"&domainId="+c.domainId+"&tenantId="+c.tenantId+"&email="+c.email+"&fidoRegisterEnabled="+e;if(c.useDomainAclYn){d+="&useDomainAclYn="+c.useDomainAclYn}if(c.domainAclListJson){d+="&domainAclList="+c.domainAclListJson}if(c.userIp){d+="&userIp="+c.userIp}window.location.href=d}else{window.location.href=b._sAccessUrl}}else{if(c.code==b._nAuthNumberSessionExpired){$(".number_cover").addClass("invalid");b._showFailElement(Message.OTP_VERIFY_01)}else{if(c.code==b._nAuthNumberIsInvalid){$(".number_cover").addClass("invalid");b._showFailElement(Message.replaceParam(Message.OTP_VERIFY_02,c.failCount+"/"+c.maxFailCount))}else{if(c.code==b._nSmsDailyQuotaOver){alert(Message.OTP_VERIFY_04)}else{if(c.code==b._nSmsMinQuotaOver){alert(Message.OTP_VERIFY_03)}else{if(c.code==b._nSmsUuidQuotaOver){alert(Message.PHONE_CONNECT_1)}else{$("#failMessage").text(Message.DEFAULT_ERROR_MESSAGE);$("#failMessage").show()}}}}}}b._resetInput()}})},_showFailElement:function(a){$("#failMessage").text(a);$("#failMessage").show()},_resetInput:function(){$("._authNo").val("");$("._authNo1").focus()}};PrivateEmailAuth=function(){this.init.apply(this,arguments)};PrivateEmailAuth.prototype={_bIsUseMobileLoginPage:true,_sEmailIntegrateType:"",_sServiceCode:"",_sEmail:"",_sSessionKey:"",_sAccessUrl:"",_sPrivateEmail:"",_sRequestedPrivateEmail:"",_bIsPhoneLogin:false,_nAuthNumberSessionExpired:37,_nAuthNumberIsInvalid:36,_nOverSendMailCount:40,_nLoginSessionExpired:10,_nExternalSSOMobileLogin:1,_nUnregisteredDeviceProgress:2,_nOtherLoginOver90Days:3,_nOtherLoginNotConnected:4,_nInvalidPrivateEmail:13,_SESSION_EXPIRED_MESSAGE_ID:"twostep.login.30",_sTwoStepLoginRegister:"twostep_login_register",_sTwoStepLoginRegisterWebSecurity:"twostep_login_register_web_security",_sTwoStepLoginRegisterMobileSecurity:"twostep_login_register_mobile_security",init:function(a){var b=this;b._sAccessUrl=a.accessUrl;b._sServiceCode=a.serviceCode;b._bIsUseMobileLoginPage=a.isUseMobileLoginPage;b._sEmailIntegrateType=a.emailIntegrateType;b._sSessionKey=a.sessionKey;b._sEmail=a.email;b._sPrivateEmail=a.privateEmail;b._bIsPhoneLogin=a.isPhoneLogin;if(b._sPrivateEmail){$("._emailInput").val(b._sPrivateEmail)}b._attachEvent()},_attachEvent:function(){var a=this;$("._emailInput").keyup(function(){a._processToggle()});$("._emailInput").focusout(function(){if(a._validEmail()){a._hideFailInputMessage()}});$("._authNoInput").keyup(function(){a._processToggle()});$("._previewBtn").click(function(){a._back()});$("._sendAuthNo").click(function(){a._sendAuthNoToEmail(false)});$("._resendAuthNo").click(function(){a._sendAuthNoToEmail(true)});$("._check").click(function(){a._check()})},_processToggle:function(){if(this._isEmpty($("._emailInput"))&&this._isEmpty($("._authNoInput"))){}else{this._hideFailElement()}},_switchBtn:function(){$("._sendAuthNo").hide();$("._resendAuthNo").show()},_isEmpty:function(a){return a.val()==null||a.val()==""},_validEmail:function(){var c=this;c._limitPrivateEmail();var a=c._convertToHalfWidth($("._emailInput").val());if(a.length==0){c._showFailInputMessage(Message.EMAIL_CONNECT_1);return false}var b=new RegExp("^[\\-_.0-9a-zA-Z]{1,64}@[\\-_.0-9a-zA-Z]+\\.[a-zA-z]{2,}$");if(b.test(a)==false){c._showFailInputMessage(Message.EMAIL_CONNECT_2);return false}if(a!==a.toLowerCase()){c._showFailInputMessage(Message.FIND_PW_21);return false}if(this._sEmail!=""&&a==this._sEmail){this._showInvalidSameEmailMessage();return false}c._hideFailInputMessage();return true},_limitPrivateEmail:function(){var b=this;var a=$("._emailInput").val();if(a.length>255){$("._emailInput").val(a.substr(0,255))}},_hideFailInputMessage:function(){$("._invalidMessageForEmail").hide();$("._invalidMessageForSameEmail").hide();$("._inputEmailError").removeClass("invalid");$("._inputAuthNoError").removeClass("invalid")},_showInvalidSameEmailMessage:function(){this._hideFailInputMessage();$("._invalidMessageForSameEmail").show();$("._inputEmailError").addClass("invalid")},_showFailInputMessage:function(a){this._hideFailInputMessage();$("._invalidMessageForEmail").text(a).show();$("._inputEmailError").addClass("invalid")},_showFailElement:function(a){$("#failMessage").text(a).show();$("._inputAuthNoError").addClass("invalid")},_hideFailElement:function(){$("#failMessage").hide()},_convertToHalfWidth:function(a){return a.replace(/[！-～]/g,function(b){return String.fromCharCode(b.charCodeAt(0)-65248)})},_sendAuthNoToEmail:function(b){if(this._validEmail()==false){return false}var a=this._convertToHalfWidth($("._emailInput").val());if(b==false){this._switchBtn()}if(b){$("._authNoInput").val("")}var c=this;$.ajax({url:"/private-email/auth/send",type:"POST",async:false,dataType:"json",data:{sessionKey:c._sSessionKey,privateEmail:a,emailIntegrateType:c._sEmailIntegrateType},success:function(d){if(d.code==0){$("._authNoKey").val(d.authKey);$("._sentAuthNoYn").val("Y");$("._authNoInput").focus();c._sRequestedPrivateEmail=a;c._hideFailElement()}else{if(d.code==c._nOverSendMailCount){c._sRequestedPrivateEmail=a;alert(Message.UNREGISTERED_DEVICE_23)}else{if(d.code==c._nLoginSessionExpired){alert(Message.TWO_STEP_LOGIN_3)}else{c._showFailElement(Message.DEFAULT_ERROR_MESSAGE)}}}},})},_check:function(){if(this._validEmail()==false){return false}if($("._authNoInput").val()==null||$("._authNoInput").val()==""){this._showFailElement(Message.UNREGISTERED_DEVICE_25);$("._authNoInput").focus();return false}if($("._sentAuthNoYn").val()!=="Y"){this._showFailElement(Message.UNREGISTERED_DEVICE_25);$("._authNoInput").focus();return false}var a=this._convertToHalfWidth($("._emailInput").val());if(this._sRequestedPrivateEmail!=""&&this._sRequestedPrivateEmail!=a){this._showFailInputMessage(Message.EMAIL_CONNECT_3);return false}this._requestAuthNoCheck($("._authNoInput").val(),a)},_requestAuthNoCheck:function(a,c){var e=this;var b;var d;d={};d.authNo=a;d.privateEmail=c;d.authKey=$("._authNoKey").val();d.emailIntegrateType=e._sEmailIntegrateType;d.sessionKey=e._sSessionKey;d.isPhoneLogin=e._bIsPhoneLogin;$.ajax({type:"post",async:false,url:"/private-email/auth/verify/check",data:d,success:function(j){if(j.code=="0"){e._handleAuthSuccess(j)}else{if(j.code==e._nExternalSSOMobileLogin){var i=$("#externalSSOMobile");$(i).find("input[name=keyForUrlScheme]").val(j.keyForUrlScheme);$(i).find("input[name=serviceCode]").val(j.serviceCode);$(i).find("input[name=appType]").val(j.appType);$(i).find("input[name=idcCode]").val(j.idcCode);$(i).attr("action","/login/external/view").submit()}else{if(j.code==e._nAuthNumberSessionExpired){e._showFailElement(Message.OTP_VERIFY_01)}else{if(j.code==e._nAuthNumberIsInvalid){e._showFailElement(Message.replaceParam(Message.UNREGISTERED_DEVICE_28,j.failCount+"/"+j.maxFailCount))}else{if(j.code==e._nLoginSessionExpired){if(e._bIsUseMobileLoginPage==true){window.location="/login/mFail?message="+e._SESSION_EXPIRED_MESSAGE_ID}else{alert(Message.TWO_STEP_LOGIN_4);window.location=e._sAccessUrl}}else{if(j.code==e._nInvalidPrivateEmail){e._showPrivateEmailVerifyMessage()}else{if(j.code==e._nOtherLoginNotConnected){var f=$("#phoneLoginConnectForm");f.find("input[name=accessUrl]").val(j.accessUrl);f.find("input[name=deviceId]").val(j.deviceId);f.find("input[name=serviceCode]").val(j.serviceCode);f.find("input[name=language]").val(j.language);f.find("input[name=phoneIntegrateType]").val("after_login_connect");f.attr("action",j.nextUrl).submit()}else{if(j.code==e._nUnregisteredDeviceProgress){var g=$("#unregisteredDeviceForm");g.find("input[name=redirectUrl]").val(j.accessUrl);g.find("input[name=sessionKey]").val(j.sessionKey);g.find("input[name=phoneNo]").val(j.phoneNo);g.find("input[name=countryCode]").val(j.countryCode);g.find("input[name=serviceCode]").val(j.serviceCode);g.find("input[name=phoneNoForView]").val(j.phoneNoForView);g.find("input[name=language]").val(j.language);g.find("input[name=phoneIntegrateType]").val("unregistered_device");g.attr("action",j.nextUrl).submit()}else{if(j.code==e._nOtherLoginOver90Days){var h=$("#otherLoginLastLoginForm");h.find("input[name=accessUrl]").val(j.accessUrl);h.find("input[name=phoneNo]").val(j.phoneNo);h.find("input[name=countryCode]").val(j.countryCode);h.find("input[name=phoneNoForView]").val(j.phoneNoForView);h.find("input[name=serviceCode]").val(j.serviceCode);h.find("input[name=language]").val(j.language);h.find("input[name=fidoRegisterEnabled]").val(j.fidoRegisterEnabled);h.find("input[name=phoneIntegrateType]").val("over_90_days_re_auth");h.attr("action",j.nextUrl).submit()}else{e._showFailElement(Message.DEFAULT_ERROR_MESSAGE)}}}}}}}}}}})},_handleAuthSuccess:function(a){var c=this;if(a.twoStepLoginUsage=="web_login"||a.twoStepLoginUsage=="web_security"){sessionStorage.removeItem(c._SELECTED_TYPE_KEY);window.location.href=a.redirectUrl}if(a.twoStepLoginUsage=="mobile_login"){var b="/login/mSuccess?userIdNo="+a.userIdNo+"&domainId="+a.domainId+"&tenantId="+a.tenantId+"&email="+a.email+"&fidoRegisterEnabled="+a.fidoRegisterEnabled;if(a.useDomainAclYn){b+="&useDomainAclYn="+a.useDomainAclYn}if(a.domainAclListJson){b+="&domainAclList="+a.domainAclListJson}if(a.userIp){b+="&userIp="+a.userIp}window.location.href=b}else{if(a.twoStepLoginUsage=="mobile_security"){worksAuth.didFinishSecurityAuthentication(true)}}},_back:function(){window.history.back()}};function removeIdc(b){var a=b;if($("#locationList").val()===undefined){return b}else{var c=$("#locationList").val().replace(/\[/gi,"").replace(/\]/gi,"").replace(/\'/gi,"").replace(/ /gi,"").split(",");c.forEach(function(d){a=a.replace(d+"-","")});return a}}function addMessageEventListener(){window.addEventListener("message",function(d){if(d.data=="lineLoginSuccessRefresh"){window.location.reload()}if(d.data.eventType==="ncpLoginParentSuccess"){window.location=d.data.accessUrl}if(removeIdc(d.origin)!==removeIdc(window.location.origin)){return}if(d.data.msgToken!==$("#msgToken").val()){return}if(d.data.eventType=="lineLoginParentRedirect"){var c=$("#twoStepLogin");$(c).find("input[name=usage]").val(d.data.usage);$(c).find("input[name=redirectUrl]").val(d.data.redirectUrl);$(c).find("input[name=userIdNo]").val(d.data.userIdNo);$(c).find("input[name=domainId]").val(d.data.domainId);$(c).find("input[name=sessionKey]").val(d.data.sessionKey);$(c).attr("action",d.data.nextUrl).submit()}else{if(d.data.eventType=="otherLoginLastLoginParentRedirect"){var b=$("#otherLoginLastLoginForm");b.find("input[name=accessUrl]").val(d.data.accessUrl);b.find("input[name=phoneNo]").val(d.data.phoneNo);b.find("input[name=countryCode]").val(d.data.countryCode);b.find("input[name=phoneNoForView]").val(d.data.phoneNoForView);b.find("input[name=serviceCode]").val(d.data.serviceCode);b.find("input[name=fidoRegisterEnabled]").val(d.data.fidoRegisterEnabled);b.find("input[name=phoneIntegrateType]").val("over_90_days_re_auth");b.attr("action",d.data.nextUrl).submit()}else{if(d.data.eventType=="otherLoginFirstConnect"){var a=$("#phoneLoginConnectForm");a.find("input[name=accessUrl]").val(d.data.accessUrl);a.find("input[name=deviceId]").val(d.data.deviceId);a.find("input[name=serviceCode]").val(d.data.serviceCode);a.find("input[name=language]").val(d.data.language);a.find("input[name=phoneIntegrateType]").val("after_login_connect");a.attr("action",d.data.nextUrl).submit()}}}})};DeviceConstants={ENTER_KEY_CODE:13,ENTER:"Enter",MAX_PASSWORD_LENGTH:20,};var oCommonDeviceLogin={getUrlParam:function(a){var c=this.filter(window.location.href).replace(/</g,"&lt;").replace(/>/g,"&gt;");var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(c);if(b==null){return null}else{return decodeURI(b[1])||0}},filter:function(a){if(a.includes("worksmobile.com")==false&&a.includes("gov-naverworks.com")==false&&a.includes("navercorp.com")==false&&a.includes("ncpworkplace.com")==false&&a.includes("whalespace.io")==false){return""}else{return a}}};PcAppIdPwLogin=function(){this.init.apply(this,arguments)};PcAppIdPwLogin.prototype={_sMailDomain:"",_sUserId:"",_sAccessUrl:"",_sServiceCode:"",_sDeviceId:"",_retryCount:0,init:function(b,c,a){oCommonDeviceLogin.initCommon();this._attachEvent();this._sUserId=b;this._sServiceCode=c;this._sMailDomain=a;this._sAccessUrl=encodeURIComponent(location.href);this._sDeviceId=oCommonDeviceLogin.getUrlParam("deviceId");this._supportableSNSLogin()},_attachEvent:function(){var a=this;$("#inputId, #password, #captchaValue").keydown(function(b){if(b.key===DeviceConstants.ENTER){a._pcAppIdPwLogin()}});$("#_loginBtn").click(function(){a._pcAppIdPwLogin()});$("#lineLogin").click(function(){a._snsLogin("line")});$("#naverLogin").click(function(){a._snsLogin("naver")});$("#fidoAuthentication").click(function(b){a._masterDeviceLogin()});$("#_pwFindBtn").click(function(){oCommonDeviceLogin.findPassword(a._sMailDomain,a._sServiceCode,a._sAccessUrl)})},_pcAppIdPwLogin:function(){var d=this;try{if(this._loginReady===false){return}var a=oCommonDeviceLogin.convertToHalfWidth($.trim($("#inputId").val()));var b=oCommonDeviceLogin.convertToHalfWidth($.trim($("#password").val()));if(oCommonDeviceLogin.inputValidCheck(a,b)===false){return}this._loginReady=false;a=a+"@"+this._sMailDomain;$.ajax({url:"/pcapp/loginProcessV2",type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({inputId:a,password:b,serviceCode:d._sServiceCode,accessUrl:d._sAccessUrl,captchaKey:$("#captchaKey").val(),captchaValue:$("#captchaValue").val(),deviceId:$("#deviceId").val(),rememberIdYn:($("#id_remember_chk").is(":checked")?"Y":"N")})}).done(function(e){window.location=e.redirectUrl}).fail(function(m,f,j){d._loginReady=true;if(m.readyState=="0"){oCommonDeviceLogin.showWarning(Message.NETWORK_ERROR_MESSAGE_WEB);return}var h=m.status;var k=m.responseJSON;var l=k.message;if(h===301){var g=m.getResponseHeader("X-Request-Method");if(g=="GET"){window.location=k.redirectUrl;return}if(g=="POST"){var i=k.data;var e=document.createElement("form");e.method="post";e.action=k.redirectUrl;for(var n in i){if(i.hasOwnProperty(n)){var o=document.createElement("input");o.setAttribute("type","hidden");o.setAttribute("name",n);o.setAttribute("value",i[n]);e.appendChild(o)}}document.body.appendChild(e);e.submit();return}}if(h===307){if(d._retryCount===0){d._retryCount++;d._pcAppIdPwLogin()}else{oCommonDeviceLogin.showWarning(Message.DEFAULT_ERROR_MESSAGE);d._retryCount=0}}if(h===400||h===401||h===403){oCommonDeviceLogin.checkCaptcha();oCommonDeviceLogin.showWarning(l);return}if(h===429){oCommonDeviceLogin.showWarning(l);oCommonDeviceLogin.captchaOn(k.body.captchaKey);return}oCommonDeviceLogin.showWarning(Message.DEFAULT_ERROR_MESSAGE)})}catch(c){oCommonDeviceLogin.showWarning(Message.DEFAULT_ERROR_MESSAGE);d._loginReady=true}},_masterDeviceLogin:function(){var b=this;var a=oCommonDeviceLogin.convertToHalfWidth($.trim($("#inputId").val()));a=a+"@"+b._sMailDomain;$.ajax({url:"/fido2/auth/req/view/check",type:"GET",async:false,data:{loginParam:a},success:function(d){if(d.redirectUrl){var c=new URLSearchParams(window.location.search);c.set("loginParam",a);window.location.href=d.redirectUrl+"?"+c}else{if(d.message){alert(d.message)}}},})},_supportableSNSLogin:function(){$("#naverLogin").show()},_snsLogin:function(a){var c=this;var b="/login/snslogin/"+a+"?serviceCode="+c._sServiceCode+"&language="+$.cookie("language");if(this._sDeviceId){b+="&deviceId="+this._sDeviceId}window.location=b},};MobileIdPwLogin=function(){this.init.apply(this,arguments)};MobileIdPwLogin.prototype={_loginReady:true,_sMailDomain:"",_sUserId:"",_sAccessUrl:"",_sServiceCode:"",_sMdmCode:"",_sDeviceId:"",_retryCount:0,init:function(b,c,a){oCommonDeviceLogin.initCommon();this._attachEvent();this._sUserId=b;this._sServiceCode=c;this._sMailDomain=a;this._sAccessUrl=encodeURIComponent(location.href);this._sMdmCode=oCommonDeviceLogin.getUrlParam("code");this._sDeviceId=oCommonDeviceLogin.getUrlParam("deviceId")},_attachEvent:function(){var a=this;$("#user_id, #user_pwd, #user_auth").keydown(function(b){if(b.key===DeviceConstants.ENTER){a._mobileIdPwLogin()}});$("#loginBtn").click(function(){a._mobileIdPwLogin()});$("#findPwdBtn").click(function(){oCommonDeviceLogin.findPassword(a._sMailDomain,a._sServiceCode,a._sAccessUrl)})},_mobileIdPwLogin:function(){var f=this;try{if(this._loginReady===false){return}var a=oCommonDeviceLogin.convertToHalfWidth($.trim($("#user_id").val()));var b=oCommonDeviceLogin.convertToHalfWidth($.trim($("#user_pwd").val()));if(oCommonDeviceLogin.inputValidCheck(a,b)===false){return}this._loginReady=false;a=a+"@"+this._sMailDomain;var d=oCommonDeviceLogin.getUrlParam("code");$.ajax({url:"/mobile/loginProcessV2",type:"POST",dataType:"json",beforeSend:function(e){e.setRequestHeader("Access-Control-Allow-Origin","*")},data:({inputId:a,password:b,serviceCode:f._sServiceCode,accessUrl:f._sAccessUrl,captchaKey:$("#captchaKey").val(),captchaValue:$("#user_auth").val(),mdmCode:d,deviceId:$("#deviceId").val(),deviceIdSessionKey:$("#deviceIdSessionKey").val()})}).done(function(e){window.location=e.redirectUrl}).fail(function(n,g,k){f._loginReady=true;if(n.readyState=="0"){oCommonDeviceLogin.showWarning(Message.NETWORK_ERROR_MESSAGE_WEB);return}var i=n.status;var l=n.responseJSON;var m=l.message;if(i===301){var h=n.getResponseHeader("X-Request-Method");if(h=="GET"){window.location=l.redirectUrl;return}if(h=="POST"){var j=l.data;var e=document.createElement("form");e.method="post";e.action=l.redirectUrl;for(var o in j){if(j.hasOwnProperty(o)){var p=document.createElement("input");p.setAttribute("type","hidden");p.setAttribute("name",o);p.setAttribute("value",j[o]);e.appendChild(p)}}document.body.appendChild(e);e.submit();return}}if(i===307){if(f._retryCount===0){f._retryCount++;f._mobileIdPwLogin()}else{oCommonDeviceLogin.showWarning(Message.DEFAULT_ERROR_MESSAGE);f._retryCount=0}}if(i===400||i===401||i===403){oCommonDeviceLogin.checkCaptcha();oCommonDeviceLogin.showWarning(m);return}if(i===429){oCommonDeviceLogin.showWarning(m);oCommonDeviceLogin.captchaOn(l.body.captchaKey);return}oCommonDeviceLogin.showWarning(Message.DEFAULT_ERROR_MESSAGE)})}catch(c){oCommonDeviceLogin.showWarning(Message.DEFAULT_ERROR_MESSAGE);f._loginReady=true}}};AccountList=function(){this.init.apply(this,arguments)};AccountList.prototype={init:function(b,a){this._sIsEmpty=true;this._oWorksLoginIdInfoList=this._parseMaskedLoginIdListString(b);this._sFilterDomain=a;this._sloginParamInputId="#user_id";this._attachEvent()},_attachEvent:function(){var a=this;$(this._sloginParamInputId).click(function(b){a._refreshLoginIdList();b.stopPropagation()});$(document).click(function(b){if(!$("#login_id_list").is(b.target)&&!$(this._sloginParamInputId).is(b.target)){$("#idInputArea").removeClass("show_account")}});$(this._sloginParamInputId).on("input",function(){a._refreshLoginIdList()});$(this._sloginParamInputId).keydown(function(b){if(b.keyCode===9||b.keyCode===13){$("#idInputArea").removeClass("show_account")}})},_parseMaskedLoginIdListString:function(c){if(!c){this._sIsEmpty=true;return}var a=decodeURIComponent(c.replace(/\+/g," "));var b=JSON.parse(a);this._sIsEmpty=false;return b},_refreshLoginIdList:function(){var g=this;if(this._sIsEmpty){return}var c=$(this._sloginParamInputId).val();var e="";if(c.length>4){e=c.substring(0,4)}else{e=c}var a=this._sFilterDomain;$("#login_id_list").empty();var d="";var b=0;var f=true;this._oWorksLoginIdInfoList.forEach(function(j){var k=j.loginParam;var h=k.substring(k.indexOf("@")+1,k.length);if(g._filterSearchText(e,k)&&h.startsWith(a)){var i=$('<li class="item">\n   <a href="#" class="inner account_cover" data-list-index="'+b+'">\n   <strong class="name">'+j.userName+'</strong>\n   <span class="email">'+j.loginParam+'</span>\n   </a>\n   <button type="button" class="btn_delete account_remove" data-list-index="'+b+'"><span class="blind">close</span></button>\n</li>\n');$("#login_id_list").append(i);f=false}b++});if(!f){$("#login_id_list").append(d);$(".account_cover").on("click",function(){g._redirectLoginStep2ByIndex($(this).data("list-index"))});$(".account_remove").on("click",function(h){g._removeFromList($(this).data("list-index"));h.stopPropagation()});$("#idInputArea").addClass("show_account")}else{$("#idInputArea").removeClass("show_account")}},_filterSearchText:function(d,a){var c=d.length<a.length?d.length:a.length;for(var b=0;b<c;++b){if(a[b]=="*"){continue}if(d[b]!=a[b]){return false}}return true},_removeFromList:function(a){$.ajax({url:"/api/login/login-id",type:"DELETE",data:{index:a},});this._oWorksLoginIdInfoList.splice(a,1);this._refreshLoginIdList()},_redirectLoginStep2ByIndex:function(a){var b=this;$.ajax({url:"/api/login/login-id",type:"GET",data:{index:a},success:function(c){var g=c.loginParam;var e=c.countryCode;var i=window.location.href;var d=$("#id_remember_chk").prop("checked");var f=new URLSearchParams(window.location.search);b._updateParam(f,"loginParam",g);b._updateParam(f,"countryCode",e);if(d){b._updateParam(f,"isIdRememberChecked","true")}var h=i.split("?")[0]+"?"+f.toString();window.location.href=b._filter(h)}})},_updateParam:function(a,b,c){if(!c){return}if(a.has(b)){a.set(b,c)}else{a.append(b,c)}},_filter:function(a){if(a.includes("worksmobile.com")==false&&a.includes("gov-naverworks.com")==false&&a.includes("navercorp.com")==false&&a.includes("ncpworkplace.com")==false&&a.includes("whalespace.io")==false&&a.includes("works.do")==false){return""}else{return a}}};BubbleTip=function(){this.init.apply(this,arguments)};BubbleTip.prototype={init:function(){var a=Array.from(arguments);this._sBubbleTipList=[];var b=this._sBubbleTipList;a.forEach(function(c){var d={buttonId:"#"+c+"Btn",tooltipBoxId:"#"+c+"TooltipBox",closeButtonId:"#"+c+"Close",isOpen:false,openTip:function(){$(this.buttonId).addClass("open");this.isOpen=true},closeTip:function(){$(this.buttonId).removeClass("open");this.isOpen=false}};b.push(d)});this._attachEvent()},_attachEvent:function(){var a=this;$(document).click(function(b){a._sBubbleTipList.forEach(function(c){if(!$(c.tooltipBoxId).is(b.target)){c.closeTip()}})});this._sBubbleTipList.forEach(function(b){$(b.buttonId).click(function(c){a._sBubbleTipList.forEach(function(d){if(b.buttonId==d.buttonId){if(b.isOpen){b.closeTip()}else{b.openTip()}}else{d.closeTip()}});c.stopPropagation()});$(b.closeButtonId).click(function(){b.closeTip()})})}};